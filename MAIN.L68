00001DCE Starting Address
Assembler used: EASy68K Editor/Assembler v5.16.01
Created On: 16/01/2023 16:28:33

00000000                             1  ; ==============================================================================
00000000                             2  ; TITLE : CUATRO EN RAYA
00000000                             3  ; AUTHOR: MARC LLOBERA VILLALONGA
00000000                             4  ;         PERE ROIG VERDERA
00000000                             5  ; ==============================================================================
00000000                             6  
00001000                             7              ORG     $1000
00001000                             8              
00001000                             9              INCLUDE "CONST.X68"
00001000                            10  ; ==============================================================================
00001000                            11  ; GAME CONSTANTS
00001000                            12  ; ==============================================================================
00001000                            13  
00001000                            14  ; --- BOX RELATED CONTANTS ----------------------------------------------------
00001000                            15  
00001000  =00000007                 16  BOXNCOL     EQU     7                       ; NUMBER OF BOXES IN A COLUMN
00001000  =00000006                 17  BOXNROW     EQU     6                       ; NUMBER OF BOXES IN A ROW
00001000  =00AA0000                 18  BOXPCOL     EQU     $00AA0000               ; BOXCONTOUR COLOR
00001000  =00000000                 19  BOXFCOL     EQU     $00000000               ; BOX FILL COLOR
00001000  =0000002D                 20  BOXRAD      EQU     45                      ; BOX RADIUS
00001000                            21  
00001000                            22  ; --- PIECE RELATED CONTANTS ----------------------------------------------------
00001000                            23  
00001000  =000000AA                 24  PIEPCOL1    EQU     $000000AA               ; PIECE CONTOUR COLOR TURN 1
00001000  =000000FF                 25  PIEFCOL1    EQU     $000000FF               ; PIECE FILL COLOR TURN 1
00001000  =0000AAAA                 26  PIEPCOL2    EQU     $0000AAAA               ; PIECE CONTOUR COLOR TURN 2
00001000  =0000FFFF                 27  PIEFCOL2    EQU     $0000FFFF               ; PIECE FILL COLOR TURN 2               
00001000  =00000000                 28  PIEPCOL3    EQU     $00000000               ; PIECE CONTOUR COLOR WIN
00001000  =003FEB1D                 29  PIEFCOL3    EQU     $003FEB1D               ; PIECE FILL COLOR WIN
00001000  =00000003                 30  PIESPEED    EQU     3                       ; MAGNITUDE OF THE FALL VEL.
00001000  =00000023                 31  PIERAD      EQU     35                      ; PIECE RADIUS
00001000                            32  
00001000                            33  ; --- TABLE RELATED CONSTANTS ----------------------------------------------------
00001000                            34  
00001000  =00FF0000                 35  TABPCOL     EQU     $00FF0000               ; TAB CONTOUR COLOR
00001000  =00AA0000                 36  TABFCOL     EQU     $00AA0000               ; TAB FILL COLOR
00001000                            37  
00001000                            38  ; --- STATE RELATED CONSTANTS ----------------------------------------------------
00001000                            39  
00001000  =FFFFFFFF                 40  STANONE     EQU     -1                      ; NON-EXISTENT STATE NUMBER
00001000                            41  
00001000                            42  ; --- FILE CONSTANTS -------------------------------------------------------------
00001000                            43  
00001000= 61 75 74 6F 6D 61 ...     44  FILE        DC.B    'automaticgame.txt',0   ; FILE NAME
00001012                            45              DS.W    0
00001012                            46  
00001012                            47  
00001012                            48  
00001012                            49  
00001012                            50  
00001012                            51  
00001012                            52  
00001012                            53  
00001012                            54  
00001012                            55  
00001012                            56  -------------------- end include --------------------
00001012                            57              INCLUDE "SYS/SYSCONST.X68"
00001012                            58  ; ==============================================================================
00001012                            59  ; SYSTEM CONSTANTS
00001012                            60  ; ==============================================================================
00001012                            61  
00001012                            62  ; --- SCREEN RELATED CONSTANTS -------------------------------------------------
00001012                            63  
00001012  =000003C0                 64  SCRWIDTH    EQU     960                     ; SCREEN WIDTH
00001012  =000002D0                 65  SCRHEIGH    EQU     720                     ; SCREEN HEIGHT
00001012  =0000003C                 66  SCRFPS      EQU     60                       ; SCREEN FRAMES PER SECOND
00001012                            67  
00001012                            68  ; --- KEYCODES -----------------------------------------------------------------
00001012                            69  
00001012  =00000025                 70  KBDLEFT     EQU     $25
00001012  =00000026                 71  KBDUP       EQU     $26
00001012  =00000027                 72  KBDRIGHT    EQU     $27
00001012  =00000028                 73  KBDDOWN     EQU     $28
00001012  =00000020                 74  KBDFIRE1    EQU     ' '
00001012  =0000004D                 75  KBDFIRE2    EQU     'M'
00001012  =00000010                 76  KBDFIRE3    EQU     $10
00001012  =00000050                 77  KBDPAUSE    EQU     'P'
00001012                            78  
00001012                            79  ; --- SOUND IDENTIFIERS --------------------------------------------------------
00001012                            80  
00001012  =00000000                 81  SNDMOVE     EQU     0
00001012  =00000001                 82  SNDFALL     EQU     1
00001012  =00000002                 83  SNDWIN      EQU     2
00001012  =00000003                 84  SNDMUSIC    EQU     3
00001012                            85  
00001012                            86  ; --- TRAP NUMBERS -------------------------------------------------------------
00001012                            87  
00001012  =00000000                 88  SCRUPTN     EQU     0                       ; SCREEN UPDATE TRAP NUMBER
00001012  =00000001                 89  KBDUPTN     EQU     1                       ; KEYBOARD UPDATE TRAP NUMBER
00001012  =00000002                 90  SNDPLTN     EQU     2                       ; SOUND PLAY TRAP NUMBER
00001012                            91  
00001012                            92  ; --- INTERRUPT NUMBERS  -------------------------------------------------------
00001012                            93  
00001012  =00000001                 94  SCRINTN     EQU     1                       ; TIMED INTERRUPT NUMBER
00001012                            95  
00001012                            96  
00001012                            97  -------------------- end include --------------------
00001012                            98              INCLUDE "SYS/SYSTEM.X68"
00001012                            99  ; ==============================================================================
00001012                           100  ; SYSTEM
00001012                           101  ; ==============================================================================
00001012                           102              
00001012                           103  ; ------------------------------------------------------------------------------
00001012                           104  SYSINIT
00001012                           105  ; INITIALIZE SYSTEM.
00001012                           106  ; INPUT    : NONE
00001012                           107  ; OUTPUT   : NONE
00001012                           108  ; MODIFIES : NONE
00001012                           109  ; ------------------------------------------------------------------------------
00001012                           110              
00001012  21FC 00001118 0080       111              MOVE.L  #SCRPLOT,($80+SCRUPTN*4)
0000101A  21FC 0000114E 0084       112              MOVE.L  #KBDUPD,($80+KBDUPTN*4)
00001022  21FC 000010C2 0088       113              MOVE.L  #SNDPLAY,($80+SNDPLTN*4)
0000102A  21FC 00001132 0064       114              MOVE.L  #SCRTIM,($60+SCRINTN*4)
00001032                           115              
00001032  4EB9 000010D4            116              JSR     SCRINIT
00001038  4EB9 00001140            117              JSR     KBDINIT
0000103E  4EB9 0000104C            118              JSR     SNDINIT
00001044                           119              
00001044  40E7                     120              MOVE.W  SR,-(A7)
00001046  0257 D8FF                121              ANDI.W  #$D8FF,(A7)
0000104A  4E73                     122              RTE
0000104C                           123     
0000104C                           124  ; ------------------------------------------------------------------------------
0000104C                           125  SNDINIT
0000104C                           126  ; SOUND SYSTEM INIT
0000104C                           127  ; INPUT    : NONE
0000104C                           128  ; OUTPUT   : NONE
0000104C                           129  ; MODIFIES : NONE
0000104C                           130  ; ------------------------------------------------------------------------------
0000104C  48E7 C0C0                131              MOVEM.L D0-D1/A0-A1,-(A7)            
00001050  4201                     132              CLR.B   D1
00001052  41F9 000010AE            133              LEA     .SNDLIST,A0
00001058  2018                     134  .LOOP       MOVE.L  (A0)+,D0
0000105A  6700 000E                135              BEQ     .DONE
0000105E  2240                     136              MOVE.L  D0,A1
00001060  103C 0047                137              MOVE.B  #71,D0
00001064  4E4F                     138              TRAP    #15
00001066  5201                     139              ADDQ.B  #1,D1
00001068  60EE                     140              BRA     .LOOP
0000106A  4CDF 0303                141  .DONE       MOVEM.L (A7)+,D0-D1/A0-A1      
0000106E  4E75                     142              RTS
00001070= 53 4E 44 2F 4D 4F ...    143  .SNDMOVE    DC.B    'SND/MOVEPIECE.wav',0
00001082= 53 4E 44 2F 50 49 ...    144  .SNDFALL    DC.B    'SND/PIECEFALL.wav',0
00001094= 53 4E 44 2F 57 49 ...    145  .SNDWIN     DC.B    'SND/WIN.wav',0
000010A0= 53 4E 44 2F 4D 55 ...    146  .SNDMUSIC   DC.B    'SND/MUSIC.wav',0
000010AE                           147              DS.W    0
000010AE= 00001070 00001082 ...    148  .SNDLIST    DC.L    .SNDMOVE,.SNDFALL,.SNDWIN,.SNDMUSIC,0
000010C2                           149              
000010C2                           150  ; ------------------------------------------------------------------------------
000010C2                           151  SNDPLAY
000010C2                           152  ; PLAY SOUND
000010C2                           153  ; INPUT    : D7 SOUND ID
000010C2                           154  ; OUTPUT   : NONE
000010C2                           155  ; MODIFIES : NONE
000010C2                           156  ; ------------------------------------------------------------------------------
000010C2  48E7 C000                157              MOVEM.L D0-D1,-(A7)             
000010C6  103C 0048                158              MOVE.B  #72,D0
000010CA  1207                     159              MOVE.B  D7,D1
000010CC  4E4F                     160              TRAP    #15
000010CE  4CDF 0003                161              MOVEM.L (A7)+,D0-D1
000010D2  4E73                     162              RTE
000010D4                           163           
000010D4                           164  ; ------------------------------------------------------------------------------
000010D4                           165  SCRINIT
000010D4                           166  ; INIT SCREEN. SET SCREEN RESOLUTION, SET WINDOWED MODE, CLEAR SCREEN,
000010D4                           167  ; ENABLE DOBLE BUFFER, ENABLE TIMED INTERRUPT.
000010D4                           168  ; INPUT    : NONE
000010D4                           169  ; OUTPUT   : NONE
000010D4                           170  ; MODIFIES : NONE
000010D4                           171  ; ------------------------------------------------------------------------------
000010D4                           172  
000010D4  48E7 F000                173              MOVEM.L D0-D3,-(A7)
000010D8                           174  
000010D8                           175              ; SET SCREEN RESOLUTION
000010D8  103C 0021                176              MOVE.B  #33,D0
000010DC  223C 03C002D0            177              MOVE.L  #SCRWIDTH<<16|SCRHEIGH,D1
000010E2  4E4F                     178              TRAP    #15
000010E4                           179              
000010E4                           180              ; SET WINDOWED MODE
000010E4  7201                     181              MOVE.L  #1,D1
000010E6  4E4F                     182              TRAP    #15
000010E8                           183              
000010E8                           184              ; CLEAR SCREEN
000010E8  103C 000B                185              MOVE.B  #11,D0
000010EC  323C FF00                186              MOVE.W  #$FF00,D1
000010F0  4E4F                     187              TRAP    #15
000010F2                           188              
000010F2                           189              ; ENABLE DOUBLE BUFFER
000010F2  103C 005C                190              MOVE.B #92,D0
000010F6  123C 0011                191              MOVE.B #17,D1
000010FA  4E4F                     192              TRAP #15
000010FC                           193              
000010FC                           194              ; ENABLE TIMED INTERRUPT
000010FC  103C 0020                195              MOVE.B  #32,D0
00001100  123C 0006                196              MOVE.B  #6,D1
00001104  143C 0081                197              MOVE.B  #$80|SCRINTN,D2
00001108  7610                     198              MOVE.L  #1000/SCRFPS,D3
0000110A  4E4F                     199              TRAP    #15
0000110C                           200              
0000110C                           201              ; CLEAR INTERRUPT COUNTER
0000110C  4279 00001EC8            202              CLR.W   (SCRINTCT)
00001112                           203              
00001112  4CDF 000F                204              MOVEM.L (A7)+,D0-D3
00001116                           205              
00001116  4E75                     206              RTS
00001118                           207              
00001118                           208  ; ------------------------------------------------------------------------------
00001118                           209  SCRPLOT
00001118                           210  ; UPDATES DOBLE BUFFER
00001118                           211  ; INPUT    : NONE
00001118                           212  ; OUTPUT   : NONE
00001118                           213  ; MODIFIES : NONE
00001118                           214  ; ------------------------------------------------------------------------------
00001118  48A7 C000                215              MOVEM.W D0-D1,-(A7)
0000111C                           216  
0000111C                           217              ; SWITCH BUFFERS
0000111C  103C 005E                218              MOVE.B  #94,D0
00001120  4E4F                     219              TRAP    #15
00001122                           220              
00001122                           221              ; CLEAR HIDDEN BUFFER
00001122  103C 000B                222              MOVE.B  #11,D0
00001126  323C FF00                223              MOVE.W  #$FF00,D1
0000112A  4E4F                     224              TRAP    #15
0000112C                           225              
0000112C  4C9F 0003                226              MOVEM.W (A7)+,D0-D1
00001130                           227              
00001130  4E73                     228              RTE 
00001132                           229  
00001132                           230  ; ------------------------------------------------------------------------------
00001132                           231  SCRTIM
00001132                           232  ; TIMED INTERRUPT SERVICE ROUTINE
00001132                           233  ; INPUT    : NONE
00001132                           234  ; OUTPUT   : NONE
00001132                           235  ; MODIFIES : NONE
00001132                           236  ; ------------------------------------------------------------------------------
00001132                           237  
00001132  5239 00001EC8            238              ADDQ.B  #1,(SCRINTCT)
00001138  5239 00001EC9            239              ADDQ.B  #1,(SCRCYCCT)
0000113E  4E73                     240              RTE
00001140                           241              
00001140                           242  ; ------------------------------------------------------------------------------
00001140                           243  KBDINIT
00001140                           244  ; INIT KEYBOOARD
00001140                           245  ; INPUT    : NONE
00001140                           246  ; OUTPUT   : NONE
00001140                           247  ; MODIFIES : NONE
00001140                           248  ; ------------------------------------------------------------------------------
00001140  4239 00001EC6            249              CLR.B   (KBDVAL)
00001146  4239 00001EC7            250              CLR.B   (KBDEDGE)
0000114C  4E75                     251              RTS
0000114E                           252              
0000114E                           253  ; ------------------------------------------------------------------------------
0000114E                           254  KBDUPD
0000114E                           255  ; UPDATE KEYBOARD INFO.  
0000114E                           256  ; 7 -> PAUSE
0000114E                           257  ; 6 -> FIRE 3
0000114E                           258  ; 5 -> FIRE 2
0000114E                           259  ; 4 -> FIRE 1
0000114E                           260  ; 3 -> DOWN
0000114E                           261  ; 2 -> RIGHT
0000114E                           262  ; 1 -> UP
0000114E                           263  ; 0 -> LEFT
0000114E                           264  ; INPUT    : NONE
0000114E                           265  ; OUTPUT   : NONE
0000114E                           266  ; MODIFIES : NONE
0000114E                           267  ; ------------------------------------------------------------------------------
0000114E                           268  
0000114E  48E7 F000                269              MOVEM.L D0-D3,-(A7)
00001152                           270  
00001152                           271              ; READ FIRST PART
00001152  103C 0013                272              MOVE.B  #19,D0
00001156  223C 50104D20            273              MOVE.L  #KBDPAUSE<<24|KBDFIRE3<<16|KBDFIRE2<<8|KBDFIRE1,D1
0000115C  4E4F                     274              TRAP    #15
0000115E                           275              
0000115E                           276              ; CONVERT TO DESIRED FORMAT
0000115E  4EB9 0000118E            277              JSR     .PACK
00001164                           278  
00001164                           279              ; READ SECOND PART
00001164  223C 28272625            280              MOVE.L  #KBDDOWN<<24|KBDRIGHT<<16|KBDUP<<8|KBDLEFT,D1
0000116A  4E4F                     281              TRAP    #15
0000116C                           282  
0000116C                           283              ; CONVERT TO DESIRED FORMAT
0000116C  4EB9 0000118E            284              JSR     .PACK
00001172                           285              
00001172                           286              ; COMPUTE KBDEDGE
00001172  1039 00001EC6            287              MOVE.B  (KBDVAL),D0
00001178  4600                     288              NOT.B   D0
0000117A  C002                     289              AND.B   D2,D0
0000117C  13C0 00001EC7            290              MOVE.B  D0,(KBDEDGE)
00001182                           291              
00001182                           292              ; STORE KBDVAL
00001182  13C2 00001EC6            293              MOVE.B  D2,(KBDVAL)
00001188                           294              
00001188  4CDF 000F                295              MOVEM.L (A7)+,D0-D3
0000118C                           296  
0000118C  4E73                     297              RTE
0000118E                           298              
0000118E  363C 0003                299  .PACK       MOVE.W  #3,D3
00001192  E189                     300  .LOOP       LSL.L   #8,D1
00001194  E312                     301              ROXL.B  #1,D2
00001196  51CB FFFA                302              DBRA.W  D3,.LOOP
0000119A  4E75                     303              RTS
0000119C                           304  
0000119C                           305              
0000119C                           306              
0000119C                           307  
0000119C                           308  
0000119C                           309  
0000119C                           310  
0000119C                           311  -------------------- end include --------------------
0000119C                           312              INCLUDE "LIB/UTLCONST.X68"
0000119C                           313  ; ==============================================================================
0000119C                           314  ; UTIL CONSTANTS
0000119C                           315  ; ==============================================================================
0000119C                           316  
0000119C  =00000008                317  UTLCHRWD    EQU     8                       ; CHARACTER WIDTH IN PIXELS
0000119C  =00000008                318  -------------------- end include --------------------
0000119C                           319              INCLUDE "LIB/UTLCODE.X68"
0000119C                           320  ; =============================================================================
0000119C                           321  ; UTILITY CODE
0000119C                           322  ; =============================================================================
0000119C                           323  
0000119C                           324  ; -----------------------------------------------------------------------------
0000119C                           325  UTLINIT
0000119C                           326  ; INITIALIZES UTILITY CODE
0000119C                           327  ; INPUT    - NONE
0000119C                           328  ; OUTPUT   - NONE
0000119C                           329  ; MODIFIES - NONE
0000119C                           330  ; -----------------------------------------------------------------------------
0000119C  48E7 C000                331              MOVEM.L D0-D1,-(A7)
000011A0  103C 0008                332              MOVE.B  #8,D0
000011A4  4E4F                     333              TRAP    #15
000011A6  13C1 00001302            334              MOVE.B  D1,(UTLRNDIX)
000011AC  4CDF 0003                335              MOVEM.L (A7)+,D0-D1
000011B0  4E75                     336              RTS
000011B2                           337  
000011B2                           338  ; -----------------------------------------------------------------------------
000011B2                           339  UTLPRINT
000011B2                           340  ; PRINT SCREEN CENTERED TEXT
000011B2                           341  ; INPUT    : A0 POINTER TO ZERO-TERMINATED STRING
000011B2                           342  ;            D0.B SCREEN ROW TO PRINT TEXT
000011B2                           343  ; OUTPUT   : D0.B NEXT ROW
000011B2                           344  ; MODIFIES : NONE (ASIDE OF OUTPUT)
000011B2                           345  ; -----------------------------------------------------------------------------
000011B2  48E7 C0C0                346              MOVEM.L D0-D1/A0-A1,-(A7)
000011B6  4201                     347              CLR.B   D1
000011B8  2248                     348              MOVE.L  A0,A1
000011BA  4A18                     349  .LOOP       TST.B   (A0)+
000011BC  6700 0006                350              BEQ     .ENDLOOP
000011C0  5201                     351              ADDQ.B  #1,D1
000011C2  60F6                     352              BRA     .LOOP
000011C4  E209                     353  .ENDLOOP    LSR.B   #1,D1
000011C6  0401 003C                354              SUB.B   #(SCRWIDTH/UTLCHRWD)/2,D1
000011CA  4401                     355              NEG.B   D1
000011CC  E141                     356              ASL.W   #8,D1
000011CE  8240                     357              OR.W    D0,D1
000011D0  103C 000B                358              MOVE.B  #11,D0
000011D4  4E4F                     359              TRAP    #15
000011D6  103C 000D                360              MOVE.B  #13,D0
000011DA  4E4F                     361              TRAP    #15
000011DC  4CDF 0303                362              MOVEM.L (A7)+,D0-D1/A0-A1
000011E0  5400                     363              ADDQ.B  #2,D0
000011E2  4E75                     364              RTS
000011E4                           365              
000011E4                           366              
000011E4                           367  
000011E4                           368  
000011E4                           369              ; (SCRWIDTH/UTLCHRWD)/2 - D1/2
000011E4                           370  
000011E4                           371  
000011E4                           372  ; -----------------------------------------------------------------------------
000011E4                           373  UTLRAND
000011E4                           374  ; PROVIDES A PSEUDO-RANDOM BYTE
000011E4                           375  ; INPUT    - NONE
000011E4                           376  ; OUTPUT   - D0.L RANDOM VALUE (ONLY BYTE)
000011E4                           377  ; MODIFIES - NONE (ASIDE OF OUTPUT)
000011E4                           378  ; -----------------------------------------------------------------------------
000011E4  2F08                     379              MOVE.L  A0,-(A7)
000011E6  41F9 00001202            380              LEA     .RANDVEC,A0
000011EC  4280                     381              CLR.L   D0
000011EE  1039 00001302            382              MOVE.B  (UTLRNDIX),D0
000011F4  1030 0800                383              MOVE.B  (A0,D0.L),D0
000011F8  5239 00001302            384              ADDQ.B  #1,(UTLRNDIX)
000011FE  205F                     385              MOVE.L  (A7)+,A0
00001200  4E75                     386              RTS
00001202                           387  
00001202                           388  
00001202= A2 EE 9A 0C F5 24 ...    389  .RANDVEC    DC.B    162, 238, 154, 12 , 245, 36 , 32 , 103
0000120A= 2A A3 51 26 E0 AC ...    390              DC.B    42 , 163, 81 , 38 , 224, 172, 19 , 69
00001212= 75 51 CA FD 33 EB ...    391              DC.B    117, 81 , 202, 253, 51 , 235, 108, 154
0000121A= 60 CC E7 B8 9A EB ...    392              DC.B    96 , 204, 231, 184, 154, 235, 34 , 203
00001222= 1D 76 B5 95 B0 89 ...    393              DC.B    29 , 118, 181, 149, 176, 137, 62 , 108
0000122A= 39 15 48 C9 6E CA ...    394              DC.B    57 , 21 , 72 , 201, 110, 202, 159, 41
00001232= 43 E7 E2 7C 37 25 ...    395              DC.B    67 , 231, 226, 124, 55 , 37 , 84 , 62
0000123A= E9 94 CE E9 E4 52 ...    396              DC.B    233, 148, 206, 233, 228, 82 , 243, 78
00001242= 37 6D 9A 84 A2 28 ...    397              DC.B    55 , 109, 154, 132, 162, 40 , 30 , 39
0000124A= 19 E2 C6 77 80 D4 ...    398              DC.B    25 , 226, 198, 119, 128, 212, 232, 225
00001252= 0A 5A 32 67 33 C2 ...    399              DC.B    10 , 90 , 50 , 103, 51 , 194, 222, 40
0000125A= 59 80 DC 0E 57 FC ...    400              DC.B    89 , 128, 220, 14 , 87 , 252, 243, 252
00001262= 8A AB BC F7 07 4D ...    401              DC.B    138, 171, 188, 247, 7  , 77 , 29 , 234
0000126A= EF D5 77 6E 1E BB ...    402              DC.B    239, 213, 119, 110, 30 , 187, 131, 23
00001272= D6 E0 2A 8F BD 28 ...    403              DC.B    214, 224, 42 , 143, 189, 40 , 212, 130
0000127A= 13 4F 66 EC 0A 64 ...    404              DC.B    19 , 79 , 102, 236, 10 , 100, 122, 188
00001282= 56 52 9A 16 9B 90 ...    405              DC.B    86 , 82 , 154, 22 , 155, 144, 7  , 199
0000128A= 06 8A A4 F7 01 DA ...    406              DC.B    6  , 138, 164, 247, 1  , 218, 166, 82
00001292= F2 E7 77 28 B1 76 ...    407              DC.B    242, 231, 119, 40 , 177, 118, 220, 102
0000129A= A4 42 E3 81 B1 67 ...    408              DC.B    164, 66 , 227, 129, 177, 103, 165, 108
000012A2= BF CE FA 16 BF 38 ...    409              DC.B    191, 206, 250, 22 , 191, 56 , 30 , 161
000012AA= D1 8B 50 0C 5F 49 ...    410              DC.B    209, 139, 80 , 12 , 95 , 73 , 168, 56
000012B2= DE 4C 14 A2 40 DC ...    411              DC.B    222, 76 , 20 , 162, 64 , 220, 93 , 12
000012BA= B6 9B 0A 38 5D AB ...    412              DC.B    182, 155, 10 , 56 , 93 , 171, 89 , 6
000012C2= E2 1B DD 75 15 82 ...    413              DC.B    226, 27 , 221, 117, 21 , 130, 101, 18
000012CA= 8A 26 51 30 9F 47 ...    414              DC.B    138, 38 , 81 , 48 , 159, 71 , 57 , 21
000012D2= 1E 8A BB 71 C6 6E ...    415              DC.B    30 , 138, 187, 113, 198, 110, 185, 152
000012DA= 9F 47 E5 34 94 27 ...    416              DC.B    159, 71 , 229, 52 , 148, 39 , 77 , 6
000012E2= 7D 06 D6 BA 30 0F ...    417              DC.B    125, 6  , 214, 186, 48 , 15 , 212, 22
000012EA= EC 7F 7E 03 CF 2D ...    418              DC.B    236, 127, 126, 3  , 207, 45 , 193, 2
000012F2= 94 5B 23 F2 8B CD ...    419              DC.B    148, 91 , 35 , 242, 139, 205, 248, 237
000012FA= 74 33 EC B9 0F D5 ...    420              DC.B    116, 51 , 236, 185, 15 , 213, 221, 6
00001302                           421  
00001302                           422  
00001302                           423  
00001302                           424  -------------------- end include --------------------
00001302                           425              INCLUDE "LIB/UTLVARS.X68"
00001302                           426  ; =============================================================================
00001302                           427  ; UTILITY VARIABLES
00001302                           428  ; =============================================================================
00001302                           429  
00001302                           430  UTLRNDIX    DS.B    1                       ; NEXT INDEX TO RANDOM NUMBER
00001304                           431              DS.W    0
00001304                           432  -------------------- end include --------------------
00001304                           433              INCLUDE "BOX.X68"
00001304                           434  ; ==============================================================================
00001304                           435  ; BOX MANAGEMENT
00001304                           436  ; ==============================================================================
00001304                           437              
00001304                           438  ; ------------------------------------------------------------------------------
00001304                           439  BOXINIT
00001304                           440  ; INITIALIZE BOX.
00001304                           441  ; INPUT    : NONE 
00001304                           442  ; OUTPUT   : NONE
00001304                           443  ; MODIFIES : NONE
00001304                           444  ; ------------------------------------------------------------------------------
00001304                           445              
00001304  33FC 0083 00001DFE       446              MOVE.W  #BOXRAD*2+41,(BOXPOSX)
0000130C  33FC 0064 00001E00       447              MOVE.W  #BOXRAD*2+10,(BOXPOSY)
00001314                           448              
00001314  4E75                     449              RTS
00001316                           450              
00001316                           451  ; ------------------------------------------------------------------------------
00001316                           452  BOXUPD
00001316                           453  ; UPDATES THE BOX.
00001316                           454  ; INPUT    : NONE 
00001316                           455  ; OUTPUT   : NONE
00001316                           456  ; MODIFIES : NONE
00001316                           457  ; ------------------------------------------------------------------------------
00001316  4E75                     458              RTS
00001318                           459              
00001318                           460  ; ------------------------------------------------------------------------------
00001318                           461  BOXPLOT
00001318                           462  ; PLOT THE BOX.
00001318                           463  ; INPUT    : NONE 
00001318                           464  ; OUTPUT   : NONE
00001318                           465  ; MODIFIES : NONE
00001318                           466  ; ------------------------------------------------------------------------------
00001318  48E7 FE40                467              MOVEM.L D0-D6/A1,-(A7)
0000131C                           468  
0000131C                           469              ; SET PEN COLOR
0000131C  103C 0050                470              MOVE.B  #80,D0
00001320  223C 00AA0000            471              MOVE.L  #BOXPCOL,D1
00001326  4E4F                     472              TRAP    #15
00001328                           473              
00001328                           474              ; SET FILL COLOR
00001328  103C 0051                475              MOVE.B  #81,D0
0000132C  7200                     476              MOVE.L  #BOXFCOL,D1                                                                     
0000132E  4E4F                     477              TRAP    #15                                                                             
00001330                           478              
00001330                           479              ; DEFINE COORDINATES
00001330  3239 00001DFE            480              MOVE.W  (BOXPOSX),D1
00001336  3439 00001DFA            481              MOVE.W  (BOXCOL),D2
0000133C  C3C2                     482              MULS.W  D2,D1
0000133E  0441 005A                483              SUB.W   #BOXRAD*2,D1
00001342                           484              
00001342  3439 00001E00            485              MOVE.W  (BOXPOSY),D2
00001348  3639 00001DFC            486              MOVE.W  (BOXROW),D3
0000134E  C5C3                     487              MULS.W  D3,D2
00001350  0642 005A                488              ADD.W   #PIERAD*2+20,D2
00001354  0442 0055                489              SUB.W   #BOXRAD*2-5,D2
00001358                           490              
00001358  3601                     491              MOVE.W  D1,D3
0000135A  0643 005A                492              ADD.W   #BOXRAD*2,D3
0000135E                           493              
0000135E  3802                     494              MOVE.W  D2,D4
00001360  0644 005A                495              ADD.W   #BOXRAD*2,D4
00001364                           496              
00001364                           497              ; DRAW CIRCLE
00001364  103C 0058                498              MOVE.B  #88,D0
00001368  4E4F                     499              TRAP    #15
0000136A                           500              
0000136A  43F9 00001E10            501              LEA.L   ROW1,A1
00001370  3639 00001DFA            502              MOVE.W  (BOXCOL),D3
00001376  3839 00001DFC            503              MOVE.W  (BOXROW),D4
0000137C  5343                     504              SUBQ.W  #1,D3
0000137E  5344                     505              SUBQ.W  #1,D4
00001380  D2C3                     506              ADD.W   D3,A1   
00001382  C9FC 0007                507              MULS.W  #7,D4
00001386  D2C4                     508              ADD.W   D4,A1
00001388                           509              
00001388  0C11 0000                510              CMP.B   #0,(A1)
0000138C  6700 0016                511              BEQ     .EMPTY
00001390  3A01                     512              MOVE.W  D1,D5
00001392  0645 002D                513              ADD.W   #BOXRAD,D5
00001396  3C02                     514              MOVE.W  D2,D6
00001398  0646 002D                515              ADD.W   #BOXRAD,D6
0000139C  1011                     516              MOVE.B  (A1),D0
0000139E  4EB9 00001524            517              JSR     PIEPLOT
000013A4                           518              
000013A4                           519  .EMPTY
000013A4  4CDF 027F                520              MOVEM.L (A7)+,D0-D6/A1
000013A8                           521  
000013A8  4E75                     522              RTS
000013AA                           523  
000013AA                           524  
000013AA                           525  
000013AA                           526  
000013AA                           527  
000013AA                           528  
000013AA                           529  
000013AA                           530  
000013AA                           531  
000013AA                           532  
000013AA                           533  -------------------- end include --------------------
000013AA                           534              INCLUDE "TABLE.X68"
000013AA                           535  ; ==============================================================================
000013AA                           536  ; TABLE MANAGEMENT
000013AA                           537  ; ==============================================================================
000013AA                           538              
000013AA                           539  ; ------------------------------------------------------------------------------
000013AA                           540  TABINIT
000013AA                           541  ; INITIALIZE TABLE.
000013AA                           542  ; INPUT    : NONE 
000013AA                           543  ; OUTPUT   : NONE
000013AA                           544  ; MODIFIES : NONE
000013AA                           545  ; ------------------------------------------------------------------------------
000013AA                           546  
000013AA  48E7 8040                547              MOVEM.L D0/A1,-(A7)
000013AE                           548  
000013AE                           549              ;INITIALICE ROWS VALUES
000013AE  303C 0029                550              MOVE.W  #6*7-1,D0
000013B2  43F9 00001E10            551              LEA.L   ROW1,A1
000013B8                           552  .LOOP       
000013B8  12BC 0000                553              MOVE.B  #0,(A1)
000013BC  5289                     554              ADD.L  #1,A1
000013BE  51C8 FFF8                555              DBRA    D0,.LOOP
000013C2                           556  
000013C2  4CDF 0201                557              MOVEM.L (A7)+,D0/A1
000013C6                           558  
000013C6  4E75                     559              RTS
000013C8                           560              
000013C8                           561  ; ------------------------------------------------------------------------------
000013C8                           562  TABPLOT
000013C8                           563  ; PLOT THE TABLE.
000013C8                           564  ; INPUT    : NONE 
000013C8                           565  ; OUTPUT   : NONE
000013C8                           566  ; MODIFIES : NONE
000013C8                           567  ; ------------------------------------------------------------------------------
000013C8                           568  
000013C8  48E7 F800                569              MOVEM.L D0-D4,-(A7)
000013CC                           570  
000013CC                           571              ; SET CONTOUR COLOR
000013CC  103C 0050                572              MOVE.B  #80,D0
000013D0  223C 00FF0000            573              MOVE.L  #TABPCOL,D1
000013D6  4E4F                     574              TRAP    #15
000013D8                           575              
000013D8                           576              ; SET FILL COLOR
000013D8  103C 0051                577              MOVE.B  #81,D0
000013DC  223C 00AA0000            578              MOVE.L  #TABFCOL,D1
000013E2  4E4F                     579              TRAP    #15
000013E4                           580              
000013E4                           581              ; DEFINE COORDINATES
000013E4  323C 0005                582              MOVE.W  #5,D1
000013E8  343C 005A                583              MOVE.W  #PIERAD*2+20,D2
000013EC  363C 03BB                584              MOVE.W  #SCRWIDTH-5,D3
000013F0  383C 02CB                585              MOVE.W  #SCRHEIGH-5,D4
000013F4                           586              
000013F4                           587              ; DRAW RECTANGLE
000013F4  103C 0057                588              MOVE.B  #87,D0
000013F8  4E4F                     589              TRAP    #15
000013FA                           590              
000013FA  4CDF 001F                591              MOVEM.L (A7)+,D0-D4
000013FE                           592  
000013FE  4E75                     593              RTS
00001400                           594  
00001400                           595  
00001400                           596  
00001400                           597  
00001400                           598  
00001400                           599  
00001400                           600  
00001400                           601  
00001400                           602  
00001400                           603  
00001400                           604  
00001400                           605  
00001400                           606  
00001400                           607  
00001400                           608  
00001400                           609  -------------------- end include --------------------
00001400                           610              INCLUDE "PIECE.X68"
00001400                           611  ; ==============================================================================
00001400                           612  ; PIECE MANAGEMENT
00001400                           613  ; ==============================================================================
00001400                           614              
00001400                           615  ; ------------------------------------------------------------------------------
00001400                           616  PIEINIT
00001400                           617  ; INITIALIZE THE PIECE.
00001400                           618  ; INPUT    : NONE 
00001400                           619  ; OUTPUT   : NONE
00001400                           620  ; MODIFIES : NONE
00001400                           621  ; ------------------------------------------------------------------------------
00001400                           622  
00001400  33FC 01DF 00001E02       623              MOVE.W  #SCRWIDTH/2-1,(PIEPOSX)
00001408  33FC 002D 00001E04       624              MOVE.W  #PIERAD+10,(PIEPOSY)
00001410                           625              
00001410  33F9 00001DFE 00001E06   626              MOVE.W  (BOXPOSX),(PIEVELX)
0000141A  33FC 0064 00001E08       627              MOVE.W  #100,(PIEVELY)
00001422                           628              
00001422  33FC 0003 00001E0A       629              MOVE.W  #3,(POSX)
0000142A  33FC FFFF 00001E0C       630              MOVE.W  #-1,(POSY)
00001432                           631              
00001432  4239 00001E0E            632              CLR.B   (FALLING)
00001438                           633              
00001438  4E75                     634              RTS
0000143A                           635              
0000143A                           636  ; ------------------------------------------------------------------------------
0000143A                           637  PIEUPD
0000143A                           638  ; UPDATE THE PIECE.
0000143A                           639  ; INPUT    : NONE 
0000143A                           640  ; OUTPUT   : NONE
0000143A                           641  ; MODIFIES : NONE
0000143A                           642  ; ------------------------------------------------------------------------------
0000143A                           643              
0000143A  48A7 F000                644              MOVEM.W  D0-D3,-(A7)
0000143E                           645              
0000143E  0C39 0000 00001E0E       646              CMP.B   #0,(FALLING)
00001446  6700 0020                647              BEQ     .PASS1
0000144A  1639 00001EC9            648              MOVE.B  (SCRCYCCT),D3
00001450  C63C 00F0                649              AND.B   #$F0,D3
00001454  B639 00001EC9            650              CMP.B   (SCRCYCCT),D3
0000145A  6600 0068                651              BNE     .DONE2
0000145E  4EB9 000015AC            652              JSR     PIEFALL
00001464  6000 005E                653              BRA     .DONE2
00001468                           654              
00001468                           655  .PASS1             
00001468                           656              ; UPDATE X POSITION
00001468  3039 00001E02            657              MOVE.W  (PIEPOSX),D0
0000146E                           658              
0000146E                           659              ; CHECK LEFT ARROW KEY
0000146E  0839 0000 00001EC7       660              BTST.B  #0,(KBDEDGE)
00001476  6700 000C                661              BEQ     .CHKRIGHT
0000147A  4EB9 000014CA            662              JSR     PRESSLEFT
00001480  6000 003C                663              BRA     .DONE
00001484                           664              
00001484                           665              ;CHECK  RIGHT ARROW KEY
00001484  0839 0002 00001EC7       666  .CHKRIGHT   BTST.B  #2,(KBDEDGE)
0000148C  6700 000C                667              BEQ     .CHKSPACE
00001490  4EB9 000014F6            668              JSR     PRESSRIGHT
00001496  6000 0026                669              BRA     .DONE
0000149A                           670              
0000149A                           671              ; CHECK SPACE KEY
0000149A  0839 0004 00001EC7       672  .CHKSPACE   BTST.B  #4,(KBDEDGE)
000014A2  6700 0020                673              BEQ     .DONE2
000014A6  1E3C 0001                674              MOVE.B  #SNDFALL,D7
000014AA  4E42                     675              TRAP    #SNDPLTN
000014AC  13FC 0001 00001E0E       676              MOVE.B  #1,(FALLING)
000014B4  4EB9 000015AC            677              JSR     PIEFALL
000014BA  6000 0008                678              BRA     .DONE2
000014BE                           679  
000014BE                           680              ; UPDATE VARIABLE
000014BE  33C0 00001E02            681  .DONE       MOVE.W  D0,(PIEPOSX) 
000014C4                           682  
000014C4  4C9F 000F                683  .DONE2      MOVEM.W  (A7)+,D0-D3             
000014C8                           684  
000014C8  4E75                     685              RTS
000014CA                           686  
000014CA                           687  PRESSLEFT
000014CA  1E3C 0000                688              MOVE.B  #SNDMOVE,D7
000014CE  4E42                     689              TRAP    #SNDPLTN
000014D0  9079 00001E06            690              SUB.W   (PIEVELX),D0
000014D6  5379 00001E0A            691              SUBQ.W  #1,(POSX)
000014DC                           692              
000014DC                           693              ; CHECK COLISIONS LEFT
000014DC  3239 00001E06            694              MOVE.W  (PIEVELX),D1
000014E2  0441 002C                695              SUB.W   #BOXRAD-1,D1
000014E6  B041                     696              CMP.W   D1,D0
000014E8  6C00 000A                697              BGE     .DONELEFT
000014EC  3001                     698              MOVE.W  D1,D0
000014EE  4279 00001E0A            699              CLR.W   (POSX)
000014F4  4E75                     700  .DONELEFT   RTS   
000014F6                           701  
000014F6                           702  PRESSRIGHT
000014F6  1E3C 0000                703              MOVE.B  #SNDMOVE,D7
000014FA  4E42                     704              TRAP    #SNDPLTN
000014FC  D079 00001E06            705              ADD.W   (PIEVELX),D0
00001502  5279 00001E0A            706              ADDQ.W  #1,(POSX)
00001508                           707              
00001508                           708              ; CHECK COLISIONS RIGHT
00001508  323C 03EC                709              MOVE.W  #SCRWIDTH+BOXRAD-1,D1
0000150C  9279 00001E06            710              SUB.W   (PIEVELX),D1
00001512  B041                     711              CMP.W   D1,D0
00001514  6F00 000C                712              BLE     .DONERIGHT
00001518  3001                     713              MOVE.W  D1,D0
0000151A  33FC 0006 00001E0A       714              MOVE.W  #6,(POSX)
00001522  4E75                     715  .DONERIGHT  RTS            
00001524                           716  
00001524                           717  ; ------------------------------------------------------------------------------
00001524                           718  PIEPLOT
00001524                           719  ; PLOT THE PIECE.
00001524                           720  ; INPUT    : D5.W AS COORDINATE X OF PIECE, D6.W AS COORDINATE Y OF PIECE,
00001524                           721  ;            D0.B INDICATES COLOR OF THE PIECE
00001524                           722  ; OUTPUT   : NONE
00001524                           723  ; MODIFIES : NONE
00001524                           724  ; ------------------------------------------------------------------------------
00001524  48E7 7800                725              MOVEM.L D1-D4,-(A7)
00001528                           726  
00001528  B03C 0001                727              CMP.B   #1,D0
0000152C  6700 0026                728              BEQ     .COLOR1
00001530  B03C 0015                729              CMP.B   #21,D0
00001534  6700 003A                730              BEQ     .COLORWINNER
00001538                           731              
00001538                           732              ; SET PEN COLOR
00001538  103C 0050                733              MOVE.B  #80,D0
0000153C  223C 0000AAAA            734              MOVE.L  #PIEPCOL2,D1
00001542  4E4F                     735              TRAP    #15
00001544                           736              
00001544                           737              ; SET FILL COLOR
00001544  103C 0051                738              MOVE.B  #81,D0
00001548  223C 0000FFFF            739              MOVE.L  #PIEFCOL2,D1
0000154E  4E4F                     740              TRAP    #15
00001550                           741              
00001550  6000 0036                742              BRA     .JUMP
00001554                           743              
00001554                           744  .COLOR1            
00001554                           745              ; SET PEN COLOR
00001554  103C 0050                746              MOVE.B  #80,D0
00001558  223C 000000AA            747              MOVE.L  #PIEPCOL1,D1
0000155E  4E4F                     748              TRAP    #15
00001560                           749              
00001560                           750              ; SET FILL COLOR
00001560  103C 0051                751              MOVE.B  #81,D0
00001564  223C 000000FF            752              MOVE.L  #PIEFCOL1,D1
0000156A  4E4F                     753              TRAP    #15
0000156C                           754              
0000156C  6000 001A                755              BRA     .JUMP
00001570                           756  
00001570                           757  .COLORWINNER
00001570                           758              ; SET PEN COLOR
00001570  103C 0050                759              MOVE.B  #80,D0
00001574  7200                     760              MOVE.L  #PIEPCOL3,D1
00001576  4E4F                     761              TRAP    #15
00001578                           762              
00001578                           763              ; SET FILL COLOR
00001578  103C 0051                764              MOVE.B  #81,D0
0000157C  223C 003FEB1D            765              MOVE.L  #PIEFCOL3,D1
00001582  4E4F                     766              TRAP    #15
00001584                           767              
00001584  6000 0002                768              BRA     .JUMP
00001588                           769  
00001588                           770  .JUMP            
00001588                           771              ; DEFINE COORDINATES
00001588  3205                     772              MOVE.W  D5,D1
0000158A  0441 0023                773              SUB.W   #PIERAD,D1
0000158E                           774              
0000158E  3406                     775              MOVE.W  D6,D2
00001590  0442 0023                776              SUB.W   #PIERAD,D2
00001594                           777              
00001594  3605                     778              MOVE.W  D5,D3
00001596  0643 0023                779              ADD.W   #PIERAD,D3
0000159A                           780              
0000159A  3806                     781              MOVE.W  D6,D4
0000159C  0644 0023                782              ADD.W   #PIERAD,D4
000015A0                           783              
000015A0                           784              ; DRAW PIECE
000015A0  103C 0058                785              MOVE.B  #88,D0
000015A4  4E4F                     786              TRAP    #15
000015A6                           787              
000015A6  4CDF 001E                788              MOVEM.L (A7)+,D1-D4
000015AA                           789  
000015AA  4E75                     790              RTS
000015AC                           791              
000015AC                           792  ; ------------------------------------------------------------------------------
000015AC                           793  PIEFALL
000015AC                           794  ; LET A PIECE FALL IN A COLUMN
000015AC                           795  ; INPUT    : NONE
000015AC                           796  ; OUTPUT   : NONE
000015AC                           797  ; MODIFIES : NONE
000015AC                           798  ; ------------------------------------------------------------------------------
000015AC                           799              
000015AC  48E7 C040                800              MOVEM.L D0-D1/A1,-(A7)
000015B0                           801              
000015B0  4280                     802              CLR.L   D0
000015B2  43F9 00001E10            803              LEA.L   ROW1,A1
000015B8  5279 00001E0C            804              ADDQ.W  #1,(POSY)
000015BE  3039 00001E0C            805              MOVE.W  (POSY),D0
000015C4  C1FC 0007                806              MULS.W  #7,D0
000015C8  D2C0                     807              ADD.W   D0,A1
000015CA  3039 00001E0A            808              MOVE.W  (POSX),D0
000015D0  D2C0                     809              ADD.W   D0,A1
000015D2                           810              
000015D2  0C79 0006 00001E0C       811              CMP.W   #6,(POSY)
000015DA  6700 002E                812              BEQ     .END 
000015DE                           813              
000015DE  0C11 0000                814              CMP.B   #0,(A1)
000015E2  6600 0026                815              BNE     .END
000015E6                           816              
000015E6  3239 00001E08            817              MOVE.W  (PIEVELY),D1
000015EC  D379 00001E04            818              ADD.W   D1,(PIEPOSY)
000015F2  0C79 0000 00001E0C       819              CMP.W   #0,(POSY)
000015FA  6600 0008                820              BNE     .PASS
000015FE  5A79 00001E04            821              ADDQ.W  #5,(PIEPOSY) 
00001604  4CDF 0203                822  .PASS       MOVEM.L (A7)+,D0-D1/A1
00001608                           823  
00001608  4E75                     824              RTS
0000160A                           825  
0000160A  5F89                     826  .END        SUBQ.L  #7,A1
0000160C  5379 00001E0C            827              SUBQ.W  #1,(POSY)
00001612  12B9 00001E3A            828              MOVE.B  (TURN),(A1)
00001618  4EB9 0000163A            829              JSR     CHKCOL                  ;CHECK 4 CONNECT IN COLUMNS
0000161E  4EB9 000016A0            830              JSR     CHKROW                  ;CHECK 4 CONNECT IN ROWS
00001624  4EB9 00001700            831              JSR     CHKDIA                  ;CHECK 4 CONNECT IN DIAGONALS
0000162A  4EB9 000017E4            832              JSR     PLAUPD
00001630  4EB8 1400                833              JSR     PIEINIT
00001634                           834              
00001634  4CDF 0203                835              MOVEM.L (A7)+,D0-D1/A1
00001638                           836  
00001638  4E75                     837              RTS
0000163A                           838              
0000163A                           839  ; ------------------------------------------------------------------------------
0000163A                           840  CHKCOL
0000163A                           841  ; CHECK IF SOME COLUMN HAVE 4 PIECES CONNECTED
0000163A                           842  ; INPUT    : NONE
0000163A                           843  ; OUTPUT   : NONE
0000163A                           844  ; MODIFIES : NONE
0000163A                           845  ; ------------------------------------------------------------------------------
0000163A                           846  
0000163A  48E7 E070                847              MOVEM.L D0-D2/A1-A3,-(A7)
0000163E                           848              
0000163E  43F9 00001E10            849              LEA.L   ROW1,A1
00001644  7006                     850              MOVE.L  #BOXNCOL-1,D0
00001646                           851  .CHECK_NEXT_COL
00001646  2449                     852              MOVE.L  A1,A2
00001648  5289                     853              ADD.L   #1,A1
0000164A  7202                     854              MOVE.L  #BOXNROW-3-1,D1
0000164C                           855              
0000164C                           856  .CHECK_POSITION_COL
0000164C  264A                     857              MOVE.L  A2,A3
0000164E  5E8A                     858              ADD.L   #7,A2
00001650                           859              
00001650  4282                     860              CLR.L   D2
00001652  1413                     861              MOVE.B  (A3),D2
00001654  5E8B                     862              ADD.L   #7,A3
00001656  D413                     863              ADD.B   (A3),D2
00001658  5E8B                     864              ADD.L   #7,A3
0000165A  D413                     865              ADD.B   (A3),D2
0000165C  5E8B                     866              ADD.L   #7,A3
0000165E  D413                     867              ADD.B   (A3),D2
00001660                           868              
00001660  B43C 0004                869              CMP.B   #4,D2
00001664  6700 0018                870              BEQ     .PLAYERWINS_COL
00001668  B43C 0014                871              CMP.B   #20,D2
0000166C  6700 0010                872              BEQ     .PLAYERWINS_COL
00001670                           873              
00001670  51C9 FFDA                874              DBRA    D1,.CHECK_POSITION_COL
00001674                           875              
00001674  51C8 FFD0                876              DBRA    D0,.CHECK_NEXT_COL
00001678                           877              
00001678  4CDF 0E07                878              MOVEM.L (A7)+,D0-D2/A1-A3
0000167C                           879              
0000167C  4E75                     880              RTS
0000167E                           881              
0000167E                           882  .PLAYERWINS_COL
0000167E  13F9 00001E3A 00001E3B   883              MOVE.B  (TURN),(WINNER)
00001688  1E3C 0002                884              MOVE.B  #SNDWIN,D7
0000168C  4E42                     885              TRAP    #SNDPLTN  
0000168E                           886  
0000168E  7003                     887              MOVE.L  #3,D0
00001690                           888  .LOOP_COL
00001690  16BC 0015                889              MOVE.B  #21,(A3)
00001694  5F8B                     890              SUB.L   #7,A3
00001696  51C8 FFF8                891              DBRA    D0,.LOOP_COL
0000169A                           892                      
0000169A  4CDF 0E07                893              MOVEM.L (A7)+,D0-D2/A1-A3
0000169E  4E75                     894              RTS
000016A0                           895  
000016A0                           896  ; ------------------------------------------------------------------------------
000016A0                           897  CHKROW
000016A0                           898  ; CHECK IF SOME ROW HAVE 4 PIECES CONNECTED
000016A0                           899  ; INPUT    : NONE
000016A0                           900  ; OUTPUT   : NONE
000016A0                           901  ; MODIFIES : NONE
000016A0                           902  ; ------------------------------------------------------------------------------
000016A0                           903  
000016A0  48E7 E070                904              MOVEM.L D0-D2/A1-A3,-(A7)
000016A4                           905              
000016A4  43F9 00001E10            906              LEA.L   ROW1,A1
000016AA  7005                     907              MOVE.L  #BOXNROW-1,D0
000016AC                           908  .CHECK_NEXT_ROW
000016AC  2449                     909              MOVE.L  A1,A2
000016AE  5E89                     910              ADD.L   #7,A1
000016B0  7203                     911              MOVE.L  #BOXNCOL-3-1,D1
000016B2                           912              
000016B2                           913  .CHECK_POSITION_ROW
000016B2  264A                     914              MOVE.L  A2,A3
000016B4  528A                     915              ADD.L   #1,A2
000016B6                           916              
000016B6  4282                     917              CLR.L   D2
000016B8  141B                     918              MOVE.B   (A3)+,D2
000016BA  D41B                     919              ADD.B   (A3)+,D2
000016BC  D41B                     920              ADD.B   (A3)+,D2
000016BE  D413                     921              ADD.B   (A3),D2
000016C0                           922              
000016C0  B43C 0004                923              CMP.B   #4,D2
000016C4  6700 0018                924              BEQ     .PLAYERWINS_ROW
000016C8  B43C 0014                925              CMP.B   #20,D2
000016CC  6700 0010                926              BEQ     .PLAYERWINS_ROW
000016D0                           927              
000016D0  51C9 FFE0                928              DBRA    D1,.CHECK_POSITION_ROW
000016D4                           929              
000016D4  51C8 FFD6                930              DBRA    D0,.CHECK_NEXT_ROW
000016D8                           931              
000016D8  4CDF 0E07                932              MOVEM.L (A7)+,D0-D2/A1-A3
000016DC                           933              
000016DC  4E75                     934              RTS
000016DE                           935  
000016DE                           936  .PLAYERWINS_ROW
000016DE  13F9 00001E3A 00001E3B   937              MOVE.B  (TURN),(WINNER)
000016E8  1E3C 0002                938              MOVE.B  #SNDWIN,D7
000016EC  4E42                     939              TRAP    #SNDPLTN
000016EE                           940              
000016EE  7003                     941              MOVE.L  #3,D0
000016F0                           942  .LOOP_ROW
000016F0  16BC 0015                943              MOVE.B  #21,(A3)
000016F4  538B                     944              SUB.L   #1,A3
000016F6  51C8 FFF8                945              DBRA    D0,.LOOP_ROW
000016FA                           946              
000016FA  4CDF 0E07                947              MOVEM.L (A7)+,D0-D2/A1-A3
000016FE  4E75                     948              RTS
00001700                           949  
00001700                           950  ; ------------------------------------------------------------------------------
00001700                           951  CHKDIA
00001700                           952  ; CHECK IF SOME DIAGONAL HAVE 4 PIECES CONNECTED
00001700                           953  ; INPUT    : NONE
00001700                           954  ; OUTPUT   : NONE
00001700                           955  ; MODIFIES : NONE
00001700                           956  ; ------------------------------------------------------------------------------
00001700                           957  
00001700  48E7 FE70                958              MOVEM.L D0-D6/A1-A3,-(A7)
00001704                           959              
00001704  43F9 00001E10            960              LEA.L   ROW1,A1
0000170A                           961             
0000170A  7C08                     962              MOVE.L  #8,D6
0000170C  7201                     963              MOVE.L  #1,D1
0000170E                           964  .LOOP_TO_OTHER_SIDE 
0000170E                           965             
0000170E  7A07                     966              MOVE.L  #7,D5
00001710  7401                     967              MOVE.L  #1,D2
00001712                           968  .LOOP_DIAGONALS_ROW1
00001712                           969  
00001712  2449                     970              MOVE.L  A1,A2
00001714                           971              ;DIAGONAL OF (0,0) AND (6,0) / (1,0) AND (5,0)            
00001714  7602                     972              MOVE.L  #2,D3
00001716                           973  .LOOP1
00001716  264A                     974              MOVE.L  A2,A3
00001718  D5C6                     975              ADD.L   D6,A2
0000171A                           976              
0000171A  4EB9 00001794            977              JSR     CHECK_DIAGONALS
00001720  0C39 0000 00001E3B       978              CMP.B   #0,(WINNER)
00001728  6600 0064                979              BNE     .FINISH_DIA
0000172C                           980             
0000172C  51CB FFE8                981              DBRA    D3,.LOOP1
00001730                           982              
00001730                           983              ;DIAGONAL OF (0,1) AND (6,1) / (2,0) AND (4,0)
00001730  2449                     984              MOVE.L  A1,A2
00001732  D5C5                     985              ADD.L   D5,A2
00001734                           986              
00001734  7601                     987              MOVE.L  #1,D3
00001736                           988  .LOOP2
00001736  264A                     989              MOVE.L  A2,A3
00001738  D5C6                     990              ADD.L   D6,A2
0000173A                           991              
0000173A  4EB9 00001794            992              JSR     CHECK_DIAGONALS
00001740  0C39 0000 00001E3B       993              CMP.B   #0,(WINNER)
00001748  6600 0044                994              BNE     .FINISH_DIA
0000174C                           995             
0000174C  51CB FFE8                996              DBRA    D3,.LOOP2
00001750                           997              
00001750                           998              ;DIAGONAL OF (0,2) AND (6,2) / (3,0)
00001750  2649                     999              MOVE.L  A1,A3
00001752  D7C5                    1000              ADD.L   D5,A3
00001754  D7C5                    1001              ADD.L   D5,A3
00001756                          1002              
00001756  4EB9 00001794           1003              JSR     CHECK_DIAGONALS
0000175C  0C39 0000 00001E3B      1004              CMP.B   #0,(WINNER)
00001764  6600 0028               1005              BNE     .FINISH_DIA          
00001768                          1006              
00001768  B2BC 00000000           1007              CMP.L   #0,D1
0000176E  6700 0008               1008              BEQ     .MINUS1
00001772  7A01                    1009              MOVE.L  #1,D5
00001774  6000 0004               1010              BRA     .PASS_DIA
00001778  7AFF                    1011  .MINUS1     MOVE.L  #-1,D5
0000177A  D3C5                    1012  .PASS_DIA   ADD.L   D5,A1
0000177C  51CA FF94               1013              DBRA    D2,.LOOP_DIAGONALS_ROW1
00001780                          1014              
00001780  43F9 00001E10           1015              LEA     ROW1,A1
00001786  5C89                    1016              ADDQ.L  #6,A1
00001788  7C06                    1017              MOVE.L  #6,D6
0000178A  51C9 FF82               1018              DBRA    D1,.LOOP_TO_OTHER_SIDE
0000178E                          1019  
0000178E                          1020  .FINISH_DIA
0000178E  4CDF 0E7F               1021              MOVEM.L (A7)+,D0-D6/A1-A3            
00001792  4E75                    1022              RTS
00001794                          1023  
00001794                          1024  CHECK_DIAGONALS
00001794  4280                    1025              CLR.L   D0
00001796  1013                    1026              MOVE.B  (A3),D0
00001798  D7C6                    1027              ADD.L   D6,A3
0000179A  D013                    1028              ADD.B   (A3),D0
0000179C  D7C6                    1029              ADD.L   D6,A3
0000179E  D013                    1030              ADD.B   (A3),D0
000017A0  D7C6                    1031              ADD.L   D6,A3
000017A2  D013                    1032              ADD.B   (A3),D0
000017A4                          1033              
000017A4  B03C 0004               1034              CMP.B   #4,D0
000017A8  6700 000C               1035              BEQ     .PLAYERWINS_DIA
000017AC  B03C 0014               1036              CMP.B   #20,D0
000017B0  6700 0004               1037              BEQ     .PLAYERWINS_DIA
000017B4                          1038              
000017B4  4E75                    1039              RTS
000017B6                          1040             
000017B6                          1041  .PLAYERWINS_DIA
000017B6  13F9 00001E3A 00001E3B  1042              MOVE.B  (TURN),(WINNER)
000017C0  1E3C 0002               1043              MOVE.B  #SNDWIN,D7
000017C4  4E42                    1044              TRAP    #SNDPLTN  
000017C6                          1045  
000017C6  7003                    1046              MOVE.L  #3,D0
000017C8                          1047  .LOOP_DIA
000017C8  16BC 0015               1048              MOVE.B  #21,(A3)
000017CC  97C6                    1049              SUB.L   D6,A3
000017CE  51C8 FFF8               1050              DBRA    D0,.LOOP_DIA
000017D2                          1051                     
000017D2  4E75                    1052              RTS
000017D4                          1053  
000017D4                          1054  
000017D4                          1055  
000017D4                          1056  
000017D4                          1057  
000017D4                          1058  
000017D4                          1059  
000017D4                          1060  
000017D4                          1061  
000017D4                          1062  
000017D4                          1063  
000017D4                          1064  
000017D4                          1065  
000017D4                          1066  
000017D4                          1067  -------------------- end include --------------------
000017D4                          1068              INCLUDE "PLAYER.X68"
000017D4                          1069  ; ==============================================================================
000017D4                          1070  ; PLAYERS MANAGEMENT
000017D4                          1071  ; ==============================================================================
000017D4                          1072             
000017D4                          1073  ; ------------------------------------------------------------------------------
000017D4                          1074  PLAINIT
000017D4                          1075  ; INITIALIZE PLAYER.
000017D4                          1076  ; INPUT    : NONE 
000017D4                          1077  ; OUTPUT   : NONE
000017D4                          1078  ; MODIFIES : NONE
000017D4                          1079  ; ------------------------------------------------------------------------------
000017D4                          1080              
000017D4  13FC 0001 00001E3A      1081              MOVE.B  #1,(TURN)               ; STARTS THE PLAYER 1
000017DC  4239 00001E3B           1082              CLR.B   (WINNER)
000017E2                          1083              
000017E2  4E75                    1084              RTS
000017E4                          1085              
000017E4                          1086  ; ------------------------------------------------------------------------------
000017E4                          1087  PLAUPD
000017E4                          1088  ; UPDATES THE PLAYER.
000017E4                          1089  ; INPUT    : NONE 
000017E4                          1090  ; OUTPUT   : NONE
000017E4                          1091  ; MODIFIES : NONE
000017E4                          1092  ; ------------------------------------------------------------------------------
000017E4                          1093              
000017E4  0C39 0001 00001E3A      1094              CMP.B   #1,(TURN)               
000017EC  6700 000C               1095              BEQ     .PLAYER2                ; SWAPS TURN
000017F0  13FC 0001 00001E3A      1096              MOVE.B  #1,(TURN)               ; PLAYER 1 TURN   
000017F8                          1097              
000017F8  4E75                    1098              RTS
000017FA                          1099              
000017FA  13FC 0005 00001E3A      1100  .PLAYER2    MOVE.B  #5,(TURN)               ; PLAYER 2 TURN
00001802                          1101              
00001802  4E75                    1102              RTS
00001804                          1103              
00001804                          1104  
00001804                          1105  
00001804                          1106  
00001804                          1107  
00001804                          1108  
00001804                          1109  
00001804                          1110  -------------------- end include --------------------
00001804                          1111              INCLUDE "BOARD.X68"
00001804                          1112  ; ==============================================================================
00001804                          1113  ; BOARD MANAGEMENT
00001804                          1114  ; ==============================================================================
00001804                          1115              
00001804                          1116  ; ------------------------------------------------------------------------------
00001804                          1117  BOAPLOT
00001804                          1118  ; PLOT THE BOARD
00001804                          1119  ; INPUT    : A1 POINTER TO A NULL-TERMINATED STRING 
00001804                          1120  ; OUTPUT   : NONE
00001804                          1121  ; MODIFIES : NONE
00001804                          1122  ; ------------------------------------------------------------------------------
00001804                          1123  
00001804  48E7 C040               1124              MOVEM.L D0-D1/A1,-(A7)
00001808                          1125  
00001808                          1126              ; SET BACKGROUND COLOR
00001808  103C 0051               1127              MOVE.B  #81,D0
0000180C  7200                    1128              MOVE.L  #00000000,D1
0000180E  4E4F                    1129              TRAP    #15
00001810                          1130              
00001810                          1131              ; SET FIRST LINE POSITION (SCREEN ARRAY COLUMNS = 120 ROWS = 47)
00001810  103C 000B               1132              MOVE.B  #11,D0
00001814  323C 0000               1133              MOVE.W  #$0000,D1
00001818  4E4F                    1134              TRAP    #15
0000181A                          1135  
0000181A                          1136              ; PRINT LINE
0000181A  4281                    1137              CLR.L   D1
0000181C  0C39 0001 00001E3A      1138              CMP.B   #1,(TURN)
00001824  6700 000A               1139              BEQ     .PLAYER1
00001828  123C 0002               1140              MOVE.B  #2,D1
0000182C  6000 0006               1141              BRA     .PASS
00001830                          1142              
00001830  123C 0001               1143  .PLAYER1    MOVE.B  #1,D1
00001834                          1144  
00001834  103C 0011               1145  .PASS       MOVE.B  #17,D0
00001838  4E4F                    1146              TRAP    #15
0000183A  4CDF 0203               1147              MOVEM.L (A7)+,D0-D1/A1
0000183E                          1148              
0000183E  4E75                    1149              RTS
00001840                          1150  
00001840                          1151  
00001840                          1152  
00001840                          1153  
00001840                          1154  
00001840                          1155  
00001840                          1156  
00001840                          1157  
00001840                          1158  
00001840                          1159  
00001840                          1160  
00001840                          1161  -------------------- end include --------------------
00001840                          1162              INCLUDE "GAME.X68"
00001840                          1163  ; ==============================================================================
00001840                          1164  ; GAME MANAGEMENT
00001840                          1165  ; ==============================================================================
00001840                          1166  
00001840                          1167  ; ------------------------------------------------------------------------------
00001840                          1168  GAMINIT
00001840                          1169  ; INITIALIZES GAME.
00001840                          1170  ; INPUT    : NONE
00001840                          1171  ; OUTPUT   : NONE
00001840                          1172  ; MODIFIES : NONE
00001840                          1173  ; ------------------------------------------------------------------------------
00001840  4EB8 13AA               1174              JSR     TABINIT
00001844  4EB8 1304               1175              JSR     BOXINIT
00001848  4EB8 1400               1176              JSR     PIEINIT
0000184C  4EB8 17D4               1177              JSR     PLAINIT
00001850  4E75                    1178              RTS
00001852                          1179  
00001852                          1180  ; ------------------------------------------------------------------------------
00001852                          1181  GAMUPD
00001852                          1182  ; UPDATES THE GAME
00001852                          1183  ; INPUT    : NONE
00001852                          1184  ; OUTPUT   : NONE
00001852                          1185  ; MODIFIES : NONE
00001852                          1186  ; ------------------------------------------------------------------------------
00001852                          1187                          
00001852  0C39 0000 00001E3B      1188              CMP.B   #0,(WINNER)
0000185A  6700 0034               1189              BEQ     .CONTINUE
0000185E                          1190              
0000185E  0839 0004 00001EC7      1191              BTST.B  #4,(KBDEDGE)
00001866  6700 000E               1192              BEQ     .CONT
0000186A  33FC 0002 00001E40      1193              MOVE.W  #2,(STANEXT)
00001872  6000 0020               1194              BRA     .DONE
00001876  5279 00001E3C           1195  .CONT       ADDQ.W  #1,(TIMER)
0000187C  0C79 00B4 00001E3C      1196              CMP.W   #180,(TIMER)
00001884  6D00 000E               1197              BLT     .DONE
00001888  33FC 0002 00001E40      1198              MOVE.W  #2,(STANEXT)                      
00001890  4EB8 143A               1199  .CONTINUE   JSR     PIEUPD
00001894                          1200  .DONE
00001894  4E75                    1201              RTS
00001896                          1202  
00001896                          1203  ; ------------------------------------------------------------------------------
00001896                          1204  GAMPLOT
00001896                          1205  ; PLOTS THE GAME
00001896                          1206  ; INPUT    : NONE
00001896                          1207  ; OUTPUT   : NONE
00001896                          1208  ; MODIFIES : NONE
00001896                          1209  ; ------------------------------------------------------------------------------
00001896  48E7 FE40               1210              MOVEM.L D0-D6/A1,-(A7)
0000189A                          1211              
0000189A  4EB8 13C8               1212              JSR     TABPLOT
0000189E                          1213              
0000189E  303C 0006               1214              MOVE.W  #BOXNCOL-1,D0
000018A2                          1215  .PLOT_NEXT_COL
000018A2  343C 0007               1216              MOVE.W  #BOXNCOL,D2
000018A6  9440                    1217              SUB.W   D0,D2
000018A8  33C2 00001DFA           1218              MOVE.W  D2,(BOXCOL)
000018AE                          1219              
000018AE  323C 0005               1220              MOVE.W  #BOXNROW-1,D1
000018B2                          1221  .PLOT_NEXT_ROW
000018B2  343C 0006               1222              MOVE.W  #BOXNROW,D2
000018B6  9441                    1223              SUB.W   D1,D2
000018B8  33C2 00001DFC           1224              MOVE.W  D2,(BOXROW)
000018BE                          1225              
000018BE  4EB8 1318               1226              JSR     BOXPLOT
000018C2                          1227              
000018C2  51C9 FFEE               1228              DBRA    D1,.PLOT_NEXT_ROW
000018C6  51C8 FFDA               1229              DBRA    D0,.PLOT_NEXT_COL
000018CA                          1230              
000018CA  3A39 00001E02           1231              MOVE.W  (PIEPOSX),D5
000018D0  3C39 00001E04           1232              MOVE.W  (PIEPOSY),D6
000018D6  1039 00001E3A           1233              MOVE.B  (TURN),D0
000018DC  4EB8 1524               1234              JSR     PIEPLOT
000018E0  43F9 000018F0           1235              LEA     .TXT,A1
000018E6  4EB8 1804               1236              JSR     BOAPLOT                 
000018EA                          1237              
000018EA  4CDF 027F               1238              MOVEM.L (A7)+,D0-D6/A1
000018EE                          1239              
000018EE  4E75                    1240              RTS
000018F0                          1241  
000018F0= 50 4C 41 59 45 52 ...   1242  .TXT        DC.B    'PLAYER TURN: ',0            
000018FE                          1243              DS.W    0
000018FE                          1244  
000018FE                          1245  
000018FE                          1246  
000018FE                          1247  
000018FE                          1248  -------------------- end include --------------------
000018FE                          1249              INCLUDE "SCREENS/INTRO.X68"
000018FE                          1250  ; ---------------------------------------------------------------------
000018FE                          1251  ; INTRO SCREEN
000018FE                          1252  ; ---------------------------------------------------------------------
000018FE                          1253  
000018FE                          1254  ; ------------------------------------------------------------------------------
000018FE                          1255  ISCINIT
000018FE                          1256  ; INTRO SCREEN INIT
000018FE                          1257  ; INPUT    : NONE 
000018FE                          1258  ; OUTPUT   : NONE
000018FE                          1259  ; MODIFIES : NONE
000018FE                          1260  ; ------------------------------------------------------------------------------
000018FE                          1261              
000018FE  4279 00001E3C           1262              CLR.W   (TIMER)
00001904  4E75                    1263              RTS
00001906                          1264              
00001906                          1265  ; ------------------------------------------------------------------------------
00001906                          1266  ISCUPD
00001906                          1267  ; INTRO SCREEN UPDATE
00001906                          1268  ; INPUT    : NONE 
00001906                          1269  ; OUTPUT   : NONE
00001906                          1270  ; MODIFIES : NONE
00001906                          1271  ; ------------------------------------------------------------------------------
00001906                          1272              
00001906  0839 0004 00001EC7      1273              BTST.B  #4,(KBDEDGE)
0000190E  6700 000A               1274              BEQ     .CONT
00001912  33FC 0001 00001E40      1275              MOVE.W  #1,(STANEXT)
0000191A                          1276  
0000191A  1E3C 0003               1277  .CONT       MOVE.B  #SNDMUSIC,D7
0000191E  4E42                    1278              TRAP    #SNDPLTN
00001920  5279 00001E3C           1279              ADDQ.W  #1,(TIMER)
00001926  0C79 0258 00001E3C      1280              CMP.W   #600,(TIMER)
0000192E  6D00 000A               1281              BLT     .DONE
00001932  33FC 0003 00001E40      1282              MOVE.W  #3,(STANEXT)
0000193A                          1283  .DONE       
0000193A  4E75                    1284              RTS
0000193C                          1285              
0000193C                          1286  ; ------------------------------------------------------------------------------
0000193C                          1287  ISCPLOT
0000193C                          1288  ; INTRO SCREEN PLOT
0000193C                          1289  ; INPUT    : NONE 
0000193C                          1290  ; OUTPUT   : NONE
0000193C                          1291  ; MODIFIES : NONE
0000193C                          1292  ; ------------------------------------------------------------------------------
0000193C                          1293              
0000193C  48E7 C0C0               1294              MOVEM.L D0-D1/A0-A1,-(A7)
00001940                          1295              
00001940                          1296              ; SET BACKGROUND COLOR
00001940  103C 0051               1297              MOVE.B  #81,D0
00001944  7200                    1298              MOVE.L  #00000000,D1
00001946  4E4F                    1299              TRAP    #15
00001948                          1300              
00001948  103C 000B               1301              MOVE.B  #11,D0
0000194C                          1302              
0000194C  41F9 0000198A           1303              LEA     .TXT1,A0
00001952  4EB8 11B2               1304              JSR     UTLPRINT
00001956                          1305              
00001956  5800                    1306              ADDQ.B  #4,D0
00001958  43F9 00001A7C           1307              LEA     .TXTLST,A1
0000195E  2219                    1308  .LOOP       MOVE.L  (A1)+,D1
00001960  6700 000A               1309              BEQ     .DONE1
00001964  2041                    1310              MOVE.L  D1,A0
00001966  4EB8 11B2               1311              JSR     UTLPRINT
0000196A  60F2                    1312              BRA    .LOOP
0000196C                          1313  .DONE1            
0000196C  0839 0004 00001EC9      1314              BTST.B   #4,(SCRCYCCT)
00001974  6700 000E               1315              BEQ     .DONE2
00001978                          1316              
00001978  41F9 00001A66           1317              LEA     .TXT7,A0
0000197E  5C00                    1318              ADD.B   #6,D0
00001980  4EB8 11B2               1319              JSR     UTLPRINT
00001984                          1320              
00001984  4CDF 0303               1321  .DONE2      MOVEM.L (A7)+,D0-D1/A0-A1
00001988                          1322              
00001988  4E75                    1323              RTS
0000198A                          1324  
0000198A= 43 4F 4E 4E 45 43 ...   1325  .TXT1       DC.B    'CONNECT-4',0
00001994= 54 52 59 20 54 4F ...   1326  .TXT2       DC.B    'TRY TO CONNECT 4 PIECES IN A LINE',0
000019B6= 55 53 45 20 4C 45 ...   1327  .TXT3       DC.B    'USE LEFT AND RIGHT ARROWS TO SELECT PIECE POSITION',0
000019E9= 50 52 45 53 53 20 ...   1328  .TXT4       DC.B    'PRESS SPACE TO PLACE A PIECE',0
00001A06= 41 46 54 45 52 20 ...   1329  .TXT5       DC.B    'AFTER PLACING A PIECE THE TURN WILL SWAP',0
00001A2F= 50 4C 41 59 45 52 ...   1330  .TXT6       DC.B    'PLAYER 1 HAS RED PIECES AND PLAYER 2 HAS YELLOW PIECES',0
00001A66= 50 52 45 53 53 20 ...   1331  .TXT7       DC.B    'PRESS SPACE TO START',0
00001A7C                          1332              DS.W    0
00001A7C= 00001994 000019B6 ...   1333  .TXTLST     DC.L    .TXT2,.TXT3,.TXT4,.TXT5,.TXT6,0
00001A94                          1334  
00001A94                          1335  
00001A94                          1336  
00001A94                          1337  
00001A94                          1338  
00001A94                          1339  
00001A94                          1340  
00001A94                          1341  
00001A94                          1342  
00001A94                          1343  
00001A94                          1344  
00001A94                          1345  
00001A94                          1346  
00001A94                          1347  
00001A94                          1348  -------------------- end include --------------------
00001A94                          1349              INCLUDE "SCREENS/ENDGAME.X68"
00001A94                          1350  ; ---------------------------------------------------------------------
00001A94                          1351  ; END GAME SCREEN
00001A94                          1352  ; ---------------------------------------------------------------------
00001A94                          1353  
00001A94                          1354  ; ------------------------------------------------------------------------------
00001A94                          1355  ENDINIT
00001A94                          1356  ; INTRO SCREEN INIT
00001A94                          1357  ; INPUT    : NONE 
00001A94                          1358  ; OUTPUT   : NONE
00001A94                          1359  ; MODIFIES : NONE
00001A94                          1360  ; ------------------------------------------------------------------------------
00001A94                          1361              
00001A94  4279 00001E3C           1362              CLR.W   (TIMER)
00001A9A                          1363              
00001A9A  33FC 01E0 00001E02      1364              MOVE.W  #SCRWIDTH/2,(PIEPOSX)
00001AA2  33FC 0168 00001E04      1365              MOVE.W  #SCRHEIGH/2,(PIEPOSY)
00001AAA                          1366              
00001AAA  4E75                    1367              RTS
00001AAC                          1368              
00001AAC                          1369  ; ------------------------------------------------------------------------------
00001AAC                          1370  ENDUPD
00001AAC                          1371  ; INTRO SCREEN UPDATE
00001AAC                          1372  ; INPUT    : NONE 
00001AAC                          1373  ; OUTPUT   : NONE
00001AAC                          1374  ; MODIFIES : NONE
00001AAC                          1375  ; ------------------------------------------------------------------------------
00001AAC                          1376              
00001AAC  0839 0004 00001EC7      1377              BTST.B  #4,(KBDEDGE)
00001AB4  6700 000A               1378              BEQ     .CONT
00001AB8  33FC 0000 00001E40      1379              MOVE.W  #0,(STANEXT)
00001AC0                          1380  
00001AC0  1E3C 0003               1381  .CONT       MOVE.B  #SNDMUSIC,D7
00001AC4  4E42                    1382              TRAP    #SNDPLTN
00001AC6  5279 00001E3C           1383              ADDQ.W  #1,(TIMER)
00001ACC  0C79 0258 00001E3C      1384              CMP.W   #600,(TIMER)
00001AD4  6D00 000A               1385              BLT     .DONE
00001AD8  33FC 0000 00001E40      1386              MOVE.W  #0,(STANEXT)
00001AE0                          1387  .DONE     
00001AE0  4E75                    1388              RTS
00001AE2                          1389              
00001AE2                          1390  ; ------------------------------------------------------------------------------
00001AE2                          1391  ENDPLOT
00001AE2                          1392  ; INTRO SCREEN PLOT
00001AE2                          1393  ; INPUT    : NONE 
00001AE2                          1394  ; OUTPUT   : NONE
00001AE2                          1395  ; MODIFIES : NONE
00001AE2                          1396  ; ------------------------------------------------------------------------------
00001AE2                          1397              
00001AE2  48E7 FE80               1398              MOVEM.L D0-D6/A0,-(A7)
00001AE6                          1399              
00001AE6                          1400              ; SET BACKGROUND COLOR
00001AE6  103C 0051               1401              MOVE.B  #81,D0
00001AEA  7200                    1402              MOVE.L  #00000000,D1
00001AEC  4E4F                    1403              TRAP    #15
00001AEE                          1404              
00001AEE  103C 000F               1405              MOVE.B  #15,D0
00001AF2                          1406              
00001AF2  0C39 0005 00001E3B      1407              CMP.B   #5,(WINNER)
00001AFA  6700 000C               1408              BEQ     .PLAYER2_WIN
00001AFE  41F9 00001B32           1409              LEA     .TXT1,A0
00001B04  6000 0008               1410              BRA     .DONE
00001B08                          1411  .PLAYER2_WIN            
00001B08  41F9 00001B4C           1412              LEA     .TXT2,A0
00001B0E                          1413              
00001B0E  4EB8 11B2               1414  .DONE       JSR     UTLPRINT
00001B12                          1415              
00001B12  4285                    1416              CLR.L   D5
00001B14  4286                    1417              CLR.L   D6
00001B16  3A39 00001E02           1418              MOVE.W  (PIEPOSX),D5
00001B1C  3C39 00001E04           1419              MOVE.W  (PIEPOSY),D6
00001B22  1039 00001E3B           1420              MOVE.B  (WINNER),D0
00001B28  4EB8 1524               1421              JSR     PIEPLOT
00001B2C                          1422              
00001B2C  4CDF 017F               1423              MOVEM.L (A7)+,D0-D6/A0
00001B30                          1424              
00001B30  4E75                    1425              RTS
00001B32                          1426  
00001B32= A1 A1 A1 A1 A1 20 ...   1427  .TXT1       DC.B    ' PLAYER 1 WINS !!!!!',0
00001B4C= A1 A1 A1 A1 A1 20 ...   1428  .TXT2       DC.B    ' PLAYER 2 WINS !!!!!',0
00001B66                          1429              DS.W    0
00001B66                          1430  
00001B66                          1431  
00001B66                          1432  
00001B66                          1433  
00001B66                          1434  -------------------- end include --------------------
00001B66                          1435              INCLUDE "ATTRACTMODE/FILE.X68"
00001B66                          1436  ; ==============================================================================
00001B66                          1437  ; FILE MANAGEMENT
00001B66                          1438  ; ==============================================================================
00001B66                          1439  
00001B66                          1440  ; ------------------------------------------------------------------------------
00001B66                          1441  FILEINIT
00001B66                          1442  ; INITIALIZE FILE
00001B66                          1443  ; INPUT    : NONE 
00001B66                          1444  ; OUTPUT   : NONE
00001B66                          1445  ; MODIFIES : NONE
00001B66                          1446  ; ------------------------------------------------------------------------------
00001B66                          1447  
00001B66  48E7 C040               1448              MOVEM.L  D0-D1/A1,-(A7)
00001B6A                          1449              
00001B6A                          1450              ; CLEAR THE STORADGE OF THE THING WE GONA READ
00001B6A  43F9 00001E46           1451              LEA.L   READED,A1
00001B70  703E                    1452              MOVE.L  #(126/2)-1,D0
00001B72  4259                    1453  .LOOP1      CLR.W   (A1)+
00001B74  51C8 FFFC               1454              DBRA    D0,.LOOP1
00001B78                          1455                   
00001B78  43F8 1000               1456              LEA.L   FILE,A1
00001B7C  7033                    1457              MOVE.L  #51,D0
00001B7E  4E4F                    1458              TRAP    #15
00001B80                          1459              
00001B80  23C1 00001E42           1460              MOVE.L  D1,(FILEID)             ;KEEP THE ID OF THE FILE
00001B86                          1461              
00001B86  4CDF 0203               1462              MOVEM.L  (A7)+,D0-D1/A1
00001B8A  4E75                    1463              RTS    
00001B8C                          1464  
00001B8C                          1465  ; ------------------------------------------------------------------------------
00001B8C                          1466  READFILE
00001B8C                          1467  ; READ THE FILE THAT CONTAINS THE MOVES
00001B8C                          1468  ; INPUT    : NONE 
00001B8C                          1469  ; OUTPUT   : NONE
00001B8C                          1470  ; MODIFIES : NONE
00001B8C                          1471  ; ------------------------------------------------------------------------------
00001B8C                          1472  
00001B8C  48E7 E040               1473              MOVEM.L  D0-D2/A1,-(A7)
00001B90                          1474              
00001B90  43F9 00001E46           1475              LEA.L   READED,A1
00001B96  7035                    1476              MOVE.L  #53,D0
00001B98  2239 00001E42           1477              MOVE.L  (FILEID),D1
00001B9E  747E                    1478              MOVE.L  #126,D2
00001BA0  4E4F                    1479              TRAP    #15
00001BA2                          1480              
00001BA2                          1481              ;CEAN WHAT WE READED (PUTS A $3 IN THE HIGH 4 BITS ON EVERY POS.)
00001BA2  43F9 00001E46           1482              LEA.L   READED,A1
00001BA8  5302                    1483              SUBQ.B  #1,D2                   ;D2 = BYTES READED
00001BAA  0419 0030               1484  .LOOP2      SUB.B   #$30,(A1)+
00001BAE  51CA FFFA               1485              DBRA    D2,.LOOP2                
00001BB2                          1486              
00001BB2  4CDF 0207               1487              MOVEM.L  (A7)+,D0-D2/A1
00001BB6  4E75                    1488              RTS
00001BB8                          1489  
00001BB8                          1490  -------------------- end include --------------------
00001BB8                          1491              INCLUDE "ATTRACTMODE/AUTOGAME.X68"
00001BB8                          1492  ; ==============================================================================
00001BB8                          1493  ; AUTOMATIC GAME MANAGEMENT
00001BB8                          1494  ; ==============================================================================
00001BB8                          1495  
00001BB8                          1496  ; ------------------------------------------------------------------------------
00001BB8                          1497  AUTOINIT
00001BB8                          1498  ; INITIALIZES GAME.
00001BB8                          1499  ; INPUT    : NONE
00001BB8                          1500  ; OUTPUT   : NONE
00001BB8                          1501  ; MODIFIES : NONE
00001BB8                          1502  ; ------------------------------------------------------------------------------
00001BB8  4EB8 13AA               1503              JSR     TABINIT
00001BBC  4EB8 1304               1504              JSR     BOXINIT
00001BC0  4EB8 1400               1505              JSR     PIEINIT
00001BC4  4EB8 17D4               1506              JSR     PLAINIT
00001BC8  4EB8 1B66               1507              JSR     FILEINIT
00001BCC  4EB8 1B8C               1508              JSR     READFILE
00001BD0  4239 00001EC4           1509              CLR.B   (INDEXREAD)
00001BD6  4E75                    1510              RTS
00001BD8                          1511  
00001BD8                          1512  ; ------------------------------------------------------------------------------
00001BD8                          1513  AUTOUPD
00001BD8                          1514  ; UPDATES THE GAME
00001BD8                          1515  ; INPUT    : NONE
00001BD8                          1516  ; OUTPUT   : NONE
00001BD8                          1517  ; MODIFIES : NONE
00001BD8                          1518  ; ------------------------------------------------------------------------------
00001BD8                          1519                      
00001BD8  48E7 F040               1520              MOVEM.L  D0-D3/A1,-(A7)
00001BDC                          1521              
00001BDC  4280                    1522              CLR.L   D0
00001BDE  4283                    1523              CLR.L   D3
00001BE0                          1524      
00001BE0  0839 0004 00001EC7      1525              BTST.B  #4,(KBDEDGE)
00001BE8  6700 000E               1526              BEQ     .PASS
00001BEC  33FC 0000 00001E40      1527              MOVE.W  #0,(STANEXT)
00001BF4  6000 00BA               1528              BRA     .DONE
00001BF8                          1529  .PASS
00001BF8  0C39 0000 00001E3B      1530              CMP.B   #0,(WINNER)
00001C00  6700 001C               1531              BEQ     .CONTINUE
00001C04  5279 00001E3C           1532              ADDQ.W  #1,(TIMER)
00001C0A  0C79 00B4 00001E3C      1533              CMP.W   #180,(TIMER)
00001C12  6D00 009C               1534              BLT     .DONE
00001C16  33FC 0000 00001E40      1535              MOVE.W  #0,(STANEXT)                      
00001C1E                          1536  .CONTINUE   
00001C1E  1639 00001EC9           1537              MOVE.B  (SCRCYCCT),D3
00001C24  C63C 00F8               1538              AND.B   #$F8,D3
00001C28  B639 00001EC9           1539              CMP.B   (SCRCYCCT),D3
00001C2E  6600 0080               1540              BNE     .DONE
00001C32  0C39 0000 00001E0E      1541              CMP.B   #0,(FALLING)
00001C3A  6700 000A               1542              BEQ     .PASS1
00001C3E  4EB8 15AC               1543              JSR     PIEFALL
00001C42  6000 006C               1544              BRA     .DONE
00001C46                          1545  .PASS1            
00001C46  0C39 007D 00001EC4      1546              CMP.B   #125,(INDEXREAD)
00001C4E  6300 000E               1547              BLS     .PASS2
00001C52  33FC 0000 00001E40      1548              MOVE.W  #0,(STANEXT)
00001C5A  6000 0054               1549              BRA     .DONE
00001C5E                          1550  .PASS2      
00001C5E  3039 00001E02           1551              MOVE.W  (PIEPOSX),D0      
00001C64  43F9 00001E46           1552              LEA     READED,A1
00001C6A  1639 00001EC4           1553              MOVE.B  (INDEXREAD),D3
00001C70  D3C3                    1554              ADD.L   D3,A1
00001C72                          1555              ; 2 EQUALS PRESS LEFT ARROW
00001C72  0C11 0002               1556              CMP.B   #2,(A1)
00001C76  6700 0020               1557              BEQ     .AUTOLEFT
00001C7A                          1558              ; 3 EQUALS PRESS RIGHT ARROW
00001C7A  0C11 0003               1559              CMP.B   #3,(A1)
00001C7E  6700 0020               1560              BEQ     .AUTORIGHT
00001C82                          1561              ; 1 EQUALS PRESS FIRE 1
00001C82  1E3C 0001               1562              MOVE.B  #SNDFALL,D7
00001C86  4E42                    1563              TRAP    #SNDPLTN
00001C88  13FC 0001 00001E0E      1564              MOVE.B  #1,(FALLING)
00001C90  4EB8 15AC               1565              JSR     PIEFALL
00001C94  6000 000E               1566              BRA     .JUMP            
00001C98  4EB8 14CA               1567  .AUTOLEFT   JSR     PRESSLEFT
00001C9C  6000 0006               1568              BRA     .JUMP
00001CA0  4EB8 14F6               1569  .AUTORIGHT  JSR     PRESSRIGHT
00001CA4                          1570              
00001CA4  33C0 00001E02           1571  .JUMP       MOVE.W  D0,(PIEPOSX)
00001CAA  5239 00001EC4           1572              ADDQ.B  #1,(INDEXREAD)
00001CB0                          1573              
00001CB0  4CDF 020F               1574  .DONE       MOVEM.L  (A7)+,D0-D3/A1
00001CB4  4E75                    1575              RTS
00001CB6                          1576  
00001CB6                          1577  ; ------------------------------------------------------------------------------
00001CB6                          1578  AUTOPLOT
00001CB6                          1579  ; PLOTS THE GAME
00001CB6                          1580  ; INPUT    : NONE
00001CB6                          1581  ; OUTPUT   : NONE
00001CB6                          1582  ; MODIFIES : NONE
00001CB6                          1583  ; ------------------------------------------------------------------------------
00001CB6  48E7 FE40               1584              MOVEM.L D0-D6/A1,-(A7)
00001CBA                          1585              
00001CBA  4EB8 13C8               1586              JSR     TABPLOT
00001CBE                          1587              
00001CBE  303C 0006               1588              MOVE.W  #BOXNCOL-1,D0
00001CC2                          1589  .PLOT_NEXT_COL
00001CC2  343C 0007               1590              MOVE.W  #BOXNCOL,D2
00001CC6  9440                    1591              SUB.W   D0,D2
00001CC8  33C2 00001DFA           1592              MOVE.W  D2,(BOXCOL)
00001CCE                          1593              
00001CCE  323C 0005               1594              MOVE.W  #BOXNROW-1,D1
00001CD2                          1595  .PLOT_NEXT_ROW
00001CD2  343C 0006               1596              MOVE.W  #BOXNROW,D2
00001CD6  9441                    1597              SUB.W   D1,D2
00001CD8  33C2 00001DFC           1598              MOVE.W  D2,(BOXROW)
00001CDE                          1599              
00001CDE  4EB8 1318               1600              JSR     BOXPLOT
00001CE2                          1601              
00001CE2  51C9 FFEE               1602              DBRA    D1,.PLOT_NEXT_ROW
00001CE6  51C8 FFDA               1603              DBRA    D0,.PLOT_NEXT_COL
00001CEA                          1604              
00001CEA  3A39 00001E02           1605              MOVE.W  (PIEPOSX),D5
00001CF0  3C39 00001E04           1606              MOVE.W  (PIEPOSY),D6
00001CF6  1039 00001E3A           1607              MOVE.B  (TURN),D0
00001CFC  4EB8 1524               1608              JSR     PIEPLOT
00001D00  43F9 00001D10           1609              LEA     .TXT,A1
00001D06  4EB8 1804               1610              JSR     BOAPLOT                 
00001D0A                          1611              
00001D0A  4CDF 027F               1612              MOVEM.L (A7)+,D0-D6/A1
00001D0E                          1613              
00001D0E  4E75                    1614              RTS
00001D10                          1615  
00001D10= 41 55 54 4F 4D 41 ...   1616  .TXT        DC.B    'AUTOMATIC GAME /// PLAYER TURN: ',0            
00001D32                          1617              DS.W    0
00001D32                          1618  
00001D32                          1619  
00001D32                          1620  
00001D32                          1621  -------------------- end include --------------------
00001D32                          1622              INCLUDE "STATES.X68"
00001D32                          1623  ; =============================================================================
00001D32                          1624  ; GAME STATE MANAGEMENT
00001D32                          1625  ; =============================================================================
00001D32                          1626  
00001D32                          1627  ; -----------------------------------------------------------------------------
00001D32                          1628  STAINIT
00001D32                          1629  ; INITALIZES THE STATE MANAGER
00001D32                          1630  ; INPUT    - NONE
00001D32                          1631  ; OUTPUT   - NONE
00001D32                          1632  ; MODIFIES - NONE
00001D32                          1633  ; -----------------------------------------------------------------------------
00001D32  33FC FFFF 00001E3E      1634              MOVE.W  #STANONE,(STACUR)
00001D3A  4279 00001E40           1635              CLR.W   (STANEXT)
00001D40  4E75                    1636              RTS
00001D42                          1637  
00001D42                          1638  ; -----------------------------------------------------------------------------
00001D42                          1639  STAUPD
00001D42                          1640  ; PERFORMS STATE UPDATE AND INIT IF NECESSARY
00001D42                          1641  ; INPUT    - NONE
00001D42                          1642  ; OUTPUT   - NONE
00001D42                          1643  ; MODIFIES - NONE
00001D42                          1644  ; -----------------------------------------------------------------------------
00001D42  48E7 8080               1645              MOVEM.L D0/A0,-(A7)
00001D46  4280                    1646              CLR.L   D0
00001D48  3039 00001E40           1647              MOVE.W  (STANEXT),D0
00001D4E  B079 00001E3E           1648              CMP.W   (STACUR),D0
00001D54  6700 0012               1649              BEQ     .DOUPD
00001D58  33C0 00001E3E           1650              MOVE.W  D0,(STACUR)             ; IF STATE CHANGED, DO INIT
00001D5E  E588                    1651              LSL.L   #2,D0
00001D60  2040                    1652              MOVE.L  D0,A0
00001D62  2068 1D80               1653              MOVE.L  .INITBL(A0),A0
00001D66  4E90                    1654              JSR     (A0)
00001D68  4280                    1655  .DOUPD      CLR.L   D0                      ; IN ANY CASE, DO UPDATE
00001D6A  3039 00001E3E           1656              MOVE.W  (STACUR),D0
00001D70  E588                    1657              LSL.L   #2,D0
00001D72  2040                    1658              MOVE.L  D0,A0
00001D74  2068 1D90               1659              MOVE.L  .UPDTBL(A0),A0
00001D78  4E90                    1660              JSR     (A0)
00001D7A  4CDF 0101               1661              MOVEM.L (A7)+,D0/A0
00001D7E  4E75                    1662              RTS
00001D80= 000018FE 00001840 ...   1663  .INITBL     DC.L    ISCINIT,GAMINIT,ENDINIT,AUTOINIT
00001D90= 00001906 00001852 ...   1664  .UPDTBL     DC.L    ISCUPD,GAMUPD,ENDUPD,AUTOUPD
00001DA0                          1665  
00001DA0                          1666  ; -----------------------------------------------------------------------------
00001DA0                          1667  STAPLOT
00001DA0                          1668  ; PERFORMS STATE PLOT
00001DA0                          1669  ; INPUT    - NONE
00001DA0                          1670  ; OUTPUT   - NONE
00001DA0                          1671  ; MODIFIES - NONE
00001DA0                          1672  ; -----------------------------------------------------------------------------
00001DA0  48E7 8080               1673              MOVEM.L D0/A0,-(A7)
00001DA4  4280                    1674              CLR.L   D0
00001DA6  3039 00001E3E           1675              MOVE.W  (STACUR),D0
00001DAC  E588                    1676              LSL.L   #2,D0
00001DAE  2040                    1677              MOVE.L  D0,A0
00001DB0  2068 1DBC               1678              MOVE.L  .PLTTBL(A0),A0
00001DB4  4E90                    1679              JSR     (A0)
00001DB6  4CDF 0101               1680              MOVEM.L (A7)+,D0/A0
00001DBA  4E75                    1681              RTS
00001DBC= 0000193C 00001896 ...   1682  .PLTTBL     DC.L    ISCPLOT,GAMPLOT,ENDPLOT,AUTOPLOT
00001DCC                          1683  
00001DCC                          1684  ; -----------------------------------------------------------------------------
00001DCC                          1685  STAEMPTY
00001DCC                          1686  ; EMPTY SUBROUTINE FOR CASES WITH NOTHING TO DO
00001DCC                          1687  ; INPUT    - NONE
00001DCC                          1688  ; OUTPUT   - NONE
00001DCC                          1689  ; MODIFIES - NONE
00001DCC                          1690  ; NOTE     - JUST A PLACEHOLDER. NOTHING TO DO.
00001DCC                          1691  ; -----------------------------------------------------------------------------
00001DCC  4E75                    1692              RTS
00001DCE                          1693  
00001DCE                          1694  
00001DCE                          1695  
00001DCE                          1696  
00001DCE                          1697  
00001DCE                          1698  
00001DCE                          1699  
00001DCE                          1700  
00001DCE                          1701  
00001DCE                          1702  
00001DCE                          1703  
00001DCE                          1704  
00001DCE                          1705  
00001DCE                          1706  -------------------- end include --------------------
00001DCE                          1707             
00001DCE                          1708  START
00001DCE                          1709  
00001DCE                          1710  ; --- INITIALIZATION -----------------------------------------------------------
00001DCE                          1711              
00001DCE  007C 0700               1712              ORI.W   #$0700,SR
00001DD2  4EB8 1012               1713              JSR     SYSINIT
00001DD6  4EB8 1D32               1714              JSR     STAINIT
00001DDA                          1715  
00001DDA                          1716  .LOOP
00001DDA                          1717  
00001DDA                          1718  ; --- UPDATE -------------------------------------------------------------------
00001DDA                          1719  
00001DDA                          1720  ; READ INPUT DEVICES
00001DDA                          1721  
00001DDA  4E41                    1722              TRAP    #KBDUPTN
00001DDC                          1723  
00001DDC                          1724  ; UPDATE GAME LOGIC
00001DDC                          1725  
00001DDC  4EB8 1D42               1726              JSR     STAUPD   
00001DE0                          1727                      
00001DE0                          1728  ; --- SYNC ---------------------------------------------------------------------
00001DE0                          1729  
00001DE0  4A39 00001EC8           1730  .WINT       TST.B   (SCRINTCT)
00001DE6  67F8                    1731              BEQ     .WINT
00001DE8  4239 00001EC8           1732              CLR.B   (SCRINTCT)
00001DEE                          1733  
00001DEE                          1734  ; --- PLOT ---------------------------------------------------------------------
00001DEE                          1735  
00001DEE  4EB8 1DA0               1736              JSR    STAPLOT
00001DF2                          1737  
00001DF2  4E40                    1738              TRAP    #SCRUPTN                ; UPDATE DOBLE BUFFER
00001DF4                          1739              
00001DF4  60E4                    1740              BRA     .LOOP
00001DF6                          1741  
00001DF6  FFFF FFFF               1742              SIMHALT
00001DFA                          1743              
00001DFA                          1744              INCLUDE "VARS.X68"
00001DFA                          1745  ; ==============================================================================
00001DFA                          1746  ; GAME VARIABLES
00001DFA                          1747  ; ==============================================================================
00001DFA                          1748  
00001DFA                          1749  ; --- BOX RELATED VARIABLES ----------------------------------------------------
00001DFA                          1750  
00001DFA                          1751  BOXCOL      DS.W    1                       ; COLUMN WHERE THE BOX IS PAINTED  
00001DFC                          1752  BOXROW      DS.W    1                       ; ROW WHERE THE BOX IS PAINTED
00001DFE                          1753  BOXPOSX     DS.W    1                       ; BOX X COORDINATE
00001E00                          1754  BOXPOSY     DS.W    1                       ; BOX Y COORDINATE
00001E02                          1755  
00001E02                          1756  ; --- PIECE RELATED VARIABLES --------------------------------------------------
00001E02                          1757  
00001E02                          1758  PIEPOSX     DS.W    1                       ; PIECE X COORDINATE
00001E04                          1759  PIEPOSY     DS.W    1                       ; PIECE Y COORDINATE
00001E06                          1760  PIEVELX     DS.W    1                       ; X MOVEMENT
00001E08                          1761  PIEVELY     DS.W    1                       ; Y MOVEMENT
00001E0A                          1762  POSX        DS.W    1                       ; POS. X IN THE MATRIX 
00001E0C                          1763  POSY        DS.W    1                       ; POS. Y IN THE MATRIX
00001E0E                          1764  FALLING     DS.B    1                       ; 1 A PIECE IS FALLING, 0 NOT
00001E10                          1765              DS.W    0
00001E10                          1766  
00001E10                          1767  ; --- COLUMN RELATED VARIABLES -------------------------------------------------
00001E10                          1768  
00001E10                          1769  ROW1        DS.B    7
00001E17                          1770  ROW2        DS.B    7
00001E1E                          1771  ROW3        DS.B    7
00001E25                          1772  ROW4        DS.B    7
00001E2C                          1773  ROW5        DS.B    7
00001E33                          1774  ROW6        DS.B    7
00001E3A                          1775              DS.W    0
00001E3A                          1776  
00001E3A                          1777  ; --- PLAYER VARIABLES ---------------------------------------------------------
00001E3A                          1778  
00001E3A                          1779  TURN        DS.B    1                       ; PLAYER WHO PLAY IN THAT TURN
00001E3B                          1780  WINNER      DS.B    1                       ; 0 NONE, 1 OR 5 (PLAYER WHO WIN)
00001E3C                          1781              DS.W    0
00001E3C                          1782  
00001E3C                          1783  ; --- INTRO STATE RELATED VARAIBLES --------------------------------------------
00001E3C                          1784  
00001E3C                          1785  TIMER       DS.W    1                       ; INTRO TIMER 
00001E3E                          1786  
00001E3E                          1787  ; --- STATE RELATED VARAIBLES --------------------------------------------------
00001E3E                          1788  
00001E3E                          1789  STACUR      DS.W    1                       ; CURRENT STATE
00001E40                          1790  STANEXT     DS.W    1                       ; NEXT STATE
00001E42                          1791  
00001E42                          1792  ; --- FILE VARAIBLES -----------------------------------------------------------
00001E42                          1793  
00001E42                          1794  FILEID      DS.L    1                       ; ID OF THE OPENED FILE
00001E46                          1795  READED      DS.B    126                     ; MOVEMENTS READ (42 BOXES * 3) 
00001EC4                          1796  INDEXREAD   DS.B    1                       ; INDEX TO TRAVEL READED   
00001EC6                          1797              DS.W    0 
00001EC6                          1798  
00001EC6                          1799  
00001EC6                          1800  
00001EC6                          1801  
00001EC6                          1802  
00001EC6                          1803  
00001EC6                          1804  
00001EC6                          1805  
00001EC6                          1806  
00001EC6                          1807  
00001EC6                          1808  
00001EC6                          1809  
00001EC6                          1810  
00001EC6                          1811  
00001EC6                          1812  
00001EC6                          1813  
00001EC6                          1814  
00001EC6                          1815  
00001EC6                          1816  
00001EC6                          1817  -------------------- end include --------------------
00001EC6                          1818              INCLUDE "SYS/SYSVARS.X68"
00001EC6                          1819  ; ==============================================================================
00001EC6                          1820  ; SYSTEM VARIABLES
00001EC6                          1821  ; ==============================================================================
00001EC6                          1822              
00001EC6                          1823  ; --- KEYBOARD RELATED VARIABLES -----------------------------------------------
00001EC6                          1824  
00001EC6                          1825  KBDVAL      DS.B    1                       ; KEY STATE
00001EC7                          1826  KBDEDGE     DS.B    1                       ; KEY EDGE
00001EC8                          1827  
00001EC8                          1828  ; --- TIMED INTERRUPT RELATED VARIABLES ----------------------------------------
00001EC8                          1829  
00001EC8                          1830  SCRINTCT   DS.B    1                       ; INTERRUPT COUNTER
00001EC9                          1831  SCRCYCCT   DS.B    1                       ; CYCLE COUNTER
00001ECA                          1832             DS.W    0
00001ECA                          1833  
00001ECA                          1834  -------------------- end include --------------------
00001ECA                          1835  
00001ECA                          1836              END     START

No errors detected
No warnings generated


SYMBOL TABLE INFORMATION
Symbol-name         Value
-------------------------
AUTOINIT            1BB8
AUTOPLOT            1CB6
AUTOPLOT:PLOT_NEXT_COL  1CC2
AUTOPLOT:PLOT_NEXT_ROW  1CD2
AUTOPLOT:TXT        1D10
AUTOUPD             1BD8
AUTOUPD:AUTOLEFT    1C98
AUTOUPD:AUTORIGHT   1CA0
AUTOUPD:CONTINUE    1C1E
AUTOUPD:DONE        1CB0
AUTOUPD:JUMP        1CA4
AUTOUPD:PASS        1BF8
AUTOUPD:PASS1       1C46
AUTOUPD:PASS2       1C5E
BOAPLOT             1804
BOAPLOT:PASS        1834
BOAPLOT:PLAYER1     1830
BOXCOL              1DFA
BOXFCOL             0
BOXINIT             1304
BOXNCOL             7
BOXNROW             6
BOXPCOL             AA0000
BOXPLOT             1318
BOXPLOT:EMPTY       13A4
BOXPOSX             1DFE
BOXPOSY             1E00
BOXRAD              2D
BOXROW              1DFC
BOXUPD              1316
CHECK_DIAGONALS     1794
CHECK_DIAGONALS:LOOP_DIA  17C8
CHECK_DIAGONALS:PLAYERWINS_DIA  17B6
CHKCOL              163A
CHKCOL:CHECK_NEXT_COL  1646
CHKCOL:CHECK_POSITION_COL  164C
CHKCOL:LOOP_COL     1690
CHKCOL:PLAYERWINS_COL  167E
CHKDIA              1700
CHKDIA:FINISH_DIA   178E
CHKDIA:LOOP1        1716
CHKDIA:LOOP2        1736
CHKDIA:LOOP_DIAGONALS_ROW1  1712
CHKDIA:LOOP_TO_OTHER_SIDE  170E
CHKDIA:MINUS1       1778
CHKDIA:PASS_DIA     177A
CHKROW              16A0
CHKROW:CHECK_NEXT_ROW  16AC
CHKROW:CHECK_POSITION_ROW  16B2
CHKROW:LOOP_ROW     16F0
CHKROW:PLAYERWINS_ROW  16DE
ENDINIT             1A94
ENDPLOT             1AE2
ENDPLOT:DONE        1B0E
ENDPLOT:PLAYER2_WIN  1B08
ENDPLOT:TXT1        1B32
ENDPLOT:TXT2        1B4C
ENDUPD              1AAC
ENDUPD:CONT         1AC0
ENDUPD:DONE         1AE0
FALLING             1E0E
FILE                1000
FILEID              1E42
FILEINIT            1B66
FILEINIT:LOOP1      1B72
GAMINIT             1840
GAMPLOT             1896
GAMPLOT:PLOT_NEXT_COL  18A2
GAMPLOT:PLOT_NEXT_ROW  18B2
GAMPLOT:TXT         18F0
GAMUPD              1852
GAMUPD:CONT         1876
GAMUPD:CONTINUE     1890
GAMUPD:DONE         1894
INDEXREAD           1EC4
ISCINIT             18FE
ISCPLOT             193C
ISCPLOT:DONE1       196C
ISCPLOT:DONE2       1984
ISCPLOT:LOOP        195E
ISCPLOT:TXT1        198A
ISCPLOT:TXT2        1994
ISCPLOT:TXT3        19B6
ISCPLOT:TXT4        19E9
ISCPLOT:TXT5        1A06
ISCPLOT:TXT6        1A2F
ISCPLOT:TXT7        1A66
ISCPLOT:TXTLST      1A7C
ISCUPD              1906
ISCUPD:CONT         191A
ISCUPD:DONE         193A
KBDDOWN             28
KBDEDGE             1EC7
KBDFIRE1            20
KBDFIRE2            4D
KBDFIRE3            10
KBDINIT             1140
KBDLEFT             25
KBDPAUSE            50
KBDRIGHT            27
KBDUP               26
KBDUPD              114E
KBDUPD:LOOP         1192
KBDUPD:PACK         118E
KBDUPTN             1
KBDVAL              1EC6
PIEFALL             15AC
PIEFALL:END         160A
PIEFALL:PASS        1604
PIEFCOL1            FF
PIEFCOL2            FFFF
PIEFCOL3            3FEB1D
PIEINIT             1400
PIEPCOL1            AA
PIEPCOL2            AAAA
PIEPCOL3            0
PIEPLOT             1524
PIEPLOT:COLOR1      1554
PIEPLOT:COLORWINNER  1570
PIEPLOT:JUMP        1588
PIEPOSX             1E02
PIEPOSY             1E04
PIERAD              23
PIESPEED            3
PIEUPD              143A
PIEUPD:CHKRIGHT     1484
PIEUPD:CHKSPACE     149A
PIEUPD:DONE         14BE
PIEUPD:DONE2        14C4
PIEUPD:PASS1        1468
PIEVELX             1E06
PIEVELY             1E08
PLAINIT             17D4
PLAUPD              17E4
PLAUPD:PLAYER2      17FA
POSX                1E0A
POSY                1E0C
PRESSLEFT           14CA
PRESSLEFT:DONELEFT  14F4
PRESSRIGHT          14F6
PRESSRIGHT:DONERIGHT  1522
READED              1E46
READFILE            1B8C
READFILE:LOOP2      1BAA
ROW1                1E10
ROW2                1E17
ROW3                1E1E
ROW4                1E25
ROW5                1E2C
ROW6                1E33
SCRCYCCT            1EC9
SCRFPS              3C
SCRHEIGH            2D0
SCRINIT             10D4
SCRINTCT            1EC8
SCRINTN             1
SCRPLOT             1118
SCRTIM              1132
SCRUPTN             0
SCRWIDTH            3C0
SNDFALL             1
SNDINIT             104C
SNDINIT:DONE        106A
SNDINIT:LOOP        1058
SNDINIT:SNDFALL     1082
SNDINIT:SNDLIST     10AE
SNDINIT:SNDMOVE     1070
SNDINIT:SNDMUSIC    10A0
SNDINIT:SNDWIN      1094
SNDMOVE             0
SNDMUSIC            3
SNDPLAY             10C2
SNDPLTN             2
SNDWIN              2
STACUR              1E3E
STAEMPTY            1DCC
STAINIT             1D32
STANEXT             1E40
STANONE             FFFFFFFF
STAPLOT             1DA0
STAPLOT:PLTTBL      1DBC
START               1DCE
START:LOOP          1DDA
START:WINT          1DE0
STAUPD              1D42
STAUPD:DOUPD        1D68
STAUPD:INITBL       1D80
STAUPD:UPDTBL       1D90
SYSINIT             1012
TABFCOL             AA0000
TABINIT             13AA
TABINIT:LOOP        13B8
TABPCOL             FF0000
TABPLOT             13C8
TIMER               1E3C
TURN                1E3A
UTLCHRWD            8
UTLINIT             119C
UTLPRINT            11B2
UTLPRINT:ENDLOOP    11C4
UTLPRINT:LOOP       11BA
UTLRAND             11E4
UTLRAND:RANDVEC     1202
UTLRNDIX            1302
WINNER              1E3B
