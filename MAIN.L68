00001D00 Starting Address
Assembler used: EASy68K Editor/Assembler v5.16.01
Created On: 16/01/2023 14:39:50

00000000                             1  ; ==============================================================================
00000000                             2  ; TITLE : CUATRO EN RAYA
00000000                             3  ; AUTHOR: MARC LLOBERA VILLALONGA
00000000                             4  ;         PERE ROIG VERDERA
00000000                             5  ; ==============================================================================
00000000                             6  
00001000                             7              ORG     $1000
00001000                             8              
00001000                             9              INCLUDE "CONST.X68"
00001000                            10  ; ==============================================================================
00001000                            11  ; GAME CONSTANTS
00001000                            12  ; ==============================================================================
00001000                            13  
00001000                            14  ; --- BOX RELATED CONTANTS ----------------------------------------------------
00001000                            15  
00001000  =00000007                 16  BOXNCOL     EQU     7                       ; NUMBER OF BOXES IN A COLUMN
00001000  =00000006                 17  BOXNROW     EQU     6                       ; NUMBER OF BOXES IN A ROW
00001000  =00AA0000                 18  BOXPCOL     EQU     $00AA0000               ; BOXCONTOUR COLOR
00001000  =00000000                 19  BOXFCOL     EQU     $00000000               ; BOX FILL COLOR
00001000  =0000002D                 20  BOXRAD      EQU     45                      ; BOX RADIUS
00001000                            21  
00001000                            22  ; --- PIECE RELATED CONTANTS ----------------------------------------------------
00001000                            23  
00001000  =000000AA                 24  PIEPCOL1    EQU     $000000AA               ; PIECE CONTOUR COLOR TURN 1
00001000  =000000FF                 25  PIEFCOL1    EQU     $000000FF               ; PIECE FILL COLOR TURN 1
00001000  =0000AAAA                 26  PIEPCOL2    EQU     $0000AAAA               ; PIECE CONTOUR COLOR TURN 2
00001000  =0000FFFF                 27  PIEFCOL2    EQU     $0000FFFF               ; PIECE FILL COLOR TURN 2               
00001000  =00000000                 28  PIEPCOL3    EQU     $00000000               ; PIECE CONTOUR COLOR WIN
00001000  =003FEB1D                 29  PIEFCOL3    EQU     $003FEB1D               ; PIECE FILL COLOR WIN
00001000  =00000003                 30  PIESPEED    EQU     3                       ; MAGNITUDE OF THE FALL VEL.
00001000  =00000023                 31  PIERAD      EQU     35                      ; PIECE RADIUS
00001000                            32  
00001000                            33  ; --- TABLE RELATED CONSTANTS ----------------------------------------------------
00001000                            34  
00001000  =00FF0000                 35  TABPCOL     EQU     $00FF0000               ; TAB CONTOUR COLOR
00001000  =00AA0000                 36  TABFCOL     EQU     $00AA0000               ; TAB FILL COLOR
00001000                            37  
00001000                            38  ; --- STATE RELATED CONSTANTS ----------------------------------------------------
00001000                            39  
00001000  =FFFFFFFF                 40  STANONE     EQU     -1                      ; NON-EXISTENT STATE NUMBER
00001000                            41  
00001000                            42  ; --- FILE CONSTANTS -------------------------------------------------------------
00001000                            43  
00001000= 61 75 74 6F 6D 61 ...     44  FILE        DC.B    'automaticgame.txt',0   ; FILE NAME
00001012                            45              DS.W    0
00001012                            46  
00001012                            47  
00001012                            48  
00001012                            49  
00001012                            50  
00001012                            51  
00001012                            52  
00001012                            53  
00001012                            54  
00001012                            55  
00001012                            56  -------------------- end include --------------------
00001012                            57              INCLUDE "SYS/SYSCONST.X68"
00001012                            58  ; ==============================================================================
00001012                            59  ; SYSTEM CONSTANTS
00001012                            60  ; ==============================================================================
00001012                            61  
00001012                            62  ; --- SCREEN RELATED CONSTANTS -------------------------------------------------
00001012                            63  
00001012  =000003C0                 64  SCRWIDTH    EQU     960                     ; SCREEN WIDTH
00001012  =000002D0                 65  SCRHEIGH    EQU     720                     ; SCREEN HEIGHT
00001012  =0000003C                 66  SCRFPS      EQU     60                      ; SCREEN FRAMES PER SECOND
00001012                            67  
00001012                            68  ; --- KEYCODES -----------------------------------------------------------------
00001012                            69  
00001012  =00000025                 70  KBDLEFT     EQU     $25
00001012  =00000026                 71  KBDUP       EQU     $26
00001012  =00000027                 72  KBDRIGHT    EQU     $27
00001012  =00000028                 73  KBDDOWN     EQU     $28
00001012  =00000020                 74  KBDFIRE1    EQU     ' '
00001012  =0000004D                 75  KBDFIRE2    EQU     'M'
00001012  =00000010                 76  KBDFIRE3    EQU     $10
00001012  =00000050                 77  KBDPAUSE    EQU     'P'
00001012                            78  
00001012                            79  ; --- TRAP NUMBERS -------------------------------------------------------------
00001012                            80  
00001012  =00000000                 81  SCRUPTN     EQU     0                       ; SCREEN UPDATE TRAP NUMBER
00001012  =00000001                 82  KBDUPTN     EQU     1                       ; KEYBOARD UPDATE TRAP NUMBER
00001012                            83  
00001012                            84  ; --- INTERRUPT NUMBERS  -------------------------------------------------------
00001012                            85  
00001012  =00000001                 86  SCRINTN     EQU     1                       ; TIMED INTERRUPT NUMBER
00001012                            87  
00001012                            88  -------------------- end include --------------------
00001012                            89              INCLUDE "SYS/SYSTEM.X68"
00001012                            90  ; ==============================================================================
00001012                            91  ; SYSTEM
00001012                            92  ; ==============================================================================
00001012                            93              
00001012                            94  ; ------------------------------------------------------------------------------
00001012                            95  SYSINIT
00001012                            96  ; INITIALIZE SYSTEM.
00001012                            97  ; INPUT    : NONE
00001012                            98  ; OUTPUT   : NONE
00001012                            99  ; MODIFIES : NONE
00001012                           100  ; ------------------------------------------------------------------------------
00001012                           101              
00001012  21FC 00001082 0080       102              MOVE.L  #SCRPLOT,($80+SCRUPTN*4)
0000101A  21FC 000010B8 0084       103              MOVE.L  #KBDUPD,($80+KBDUPTN*4)
00001022  21FC 0000109C 0064       104              MOVE.L  #SCRTIM,($60+SCRINTN*4)
0000102A                           105              
0000102A  4EB9 0000103E            106              JSR     SCRINIT
00001030  4EB9 000010AA            107              JSR     KBDINIT
00001036                           108              
00001036  40E7                     109              MOVE.W  SR,-(A7)
00001038  0257 D8FF                110              ANDI.W  #$D8FF,(A7)
0000103C  4E73                     111              RTE
0000103E                           112              
0000103E                           113  ; ------------------------------------------------------------------------------
0000103E                           114  SCRINIT
0000103E                           115  ; INIT SCREEN. SET SCREEN RESOLUTION, SET WINDOWED MODE, CLEAR SCREEN,
0000103E                           116  ; ENABLE DOBLE BUFFER, ENABLE TIMED INTERRUPT.
0000103E                           117  ; INPUT    : NONE
0000103E                           118  ; OUTPUT   : NONE
0000103E                           119  ; MODIFIES : NONE
0000103E                           120  ; ------------------------------------------------------------------------------
0000103E                           121  
0000103E  48E7 F000                122              MOVEM.L D0-D3,-(A7)
00001042                           123  
00001042                           124              ; SET SCREEN RESOLUTION
00001042  103C 0021                125              MOVE.B  #33,D0
00001046  223C 03C002D0            126              MOVE.L  #SCRWIDTH<<16|SCRHEIGH,D1
0000104C  4E4F                     127              TRAP    #15
0000104E                           128              
0000104E                           129              ; SET WINDOWED MODE
0000104E  7201                     130              MOVE.L  #1,D1
00001050  4E4F                     131              TRAP    #15
00001052                           132              
00001052                           133              ; CLEAR SCREEN
00001052  103C 000B                134              MOVE.B  #11,D0
00001056  323C FF00                135              MOVE.W  #$FF00,D1
0000105A  4E4F                     136              TRAP    #15
0000105C                           137              
0000105C                           138              ; ENABLE DOUBLE BUFFER
0000105C  103C 005C                139              MOVE.B #92,D0
00001060  123C 0011                140              MOVE.B #17,D1
00001064  4E4F                     141              TRAP #15
00001066                           142              
00001066                           143              ; ENABLE TIMED INTERRUPT
00001066  103C 0020                144              MOVE.B  #32,D0
0000106A  123C 0006                145              MOVE.B  #6,D1
0000106E  143C 0081                146              MOVE.B  #$80|SCRINTN,D2
00001072  7610                     147              MOVE.L  #1000/SCRFPS,D3
00001074  4E4F                     148              TRAP    #15
00001076                           149              
00001076                           150              ; CLEAR INTERRUPT COUNTER
00001076  4279 00001DFA            151              CLR.W   (SCRINTCT)
0000107C                           152              
0000107C  4CDF 000F                153              MOVEM.L (A7)+,D0-D3
00001080                           154              
00001080  4E75                     155              RTS
00001082                           156              
00001082                           157  ; ------------------------------------------------------------------------------
00001082                           158  SCRPLOT
00001082                           159  ; UPDATES DOBLE BUFFER
00001082                           160  ; INPUT    : NONE
00001082                           161  ; OUTPUT   : NONE
00001082                           162  ; MODIFIES : NONE
00001082                           163  ; ------------------------------------------------------------------------------
00001082  48A7 C000                164              MOVEM.W D0-D1,-(A7)
00001086                           165  
00001086                           166              ; SWITCH BUFFERS
00001086  103C 005E                167              MOVE.B  #94,D0
0000108A  4E4F                     168              TRAP    #15
0000108C                           169              
0000108C                           170              ; CLEAR HIDDEN BUFFER
0000108C  103C 000B                171              MOVE.B  #11,D0
00001090  323C FF00                172              MOVE.W  #$FF00,D1
00001094  4E4F                     173              TRAP    #15
00001096                           174              
00001096  4C9F 0003                175              MOVEM.W (A7)+,D0-D1
0000109A                           176              
0000109A  4E73                     177              RTE 
0000109C                           178  
0000109C                           179  ; ------------------------------------------------------------------------------
0000109C                           180  SCRTIM
0000109C                           181  ; TIMED INTERRUPT SERVICE ROUTINE
0000109C                           182  ; INPUT    : NONE
0000109C                           183  ; OUTPUT   : NONE
0000109C                           184  ; MODIFIES : NONE
0000109C                           185  ; ------------------------------------------------------------------------------
0000109C                           186  
0000109C  5239 00001DFA            187              ADDQ.B  #1,(SCRINTCT)
000010A2  5239 00001DFB            188              ADDQ.B  #1,(SCRCYCCT)
000010A8  4E73                     189              RTE
000010AA                           190              
000010AA                           191  ; ------------------------------------------------------------------------------
000010AA                           192  KBDINIT
000010AA                           193  ; INIT KEYBOOARD
000010AA                           194  ; INPUT    : NONE
000010AA                           195  ; OUTPUT   : NONE
000010AA                           196  ; MODIFIES : NONE
000010AA                           197  ; ------------------------------------------------------------------------------
000010AA  4239 00001DF8            198              CLR.B   (KBDVAL)
000010B0  4239 00001DF9            199              CLR.B   (KBDEDGE)
000010B6  4E75                     200              RTS
000010B8                           201              
000010B8                           202  ; ------------------------------------------------------------------------------
000010B8                           203  KBDUPD
000010B8                           204  ; UPDATE KEYBOARD INFO.  
000010B8                           205  ; 7 -> PAUSE
000010B8                           206  ; 6 -> FIRE 3
000010B8                           207  ; 5 -> FIRE 2
000010B8                           208  ; 4 -> FIRE 1
000010B8                           209  ; 3 -> DOWN
000010B8                           210  ; 2 -> RIGHT
000010B8                           211  ; 1 -> UP
000010B8                           212  ; 0 -> LEFT
000010B8                           213  ; INPUT    : NONE
000010B8                           214  ; OUTPUT   : NONE
000010B8                           215  ; MODIFIES : NONE
000010B8                           216  ; ------------------------------------------------------------------------------
000010B8                           217  
000010B8  48E7 F000                218              MOVEM.L D0-D3,-(A7)
000010BC                           219  
000010BC                           220              ; READ FIRST PART
000010BC  103C 0013                221              MOVE.B  #19,D0
000010C0  223C 50104D20            222              MOVE.L  #KBDPAUSE<<24|KBDFIRE3<<16|KBDFIRE2<<8|KBDFIRE1,D1
000010C6  4E4F                     223              TRAP    #15
000010C8                           224              
000010C8                           225              ; CONVERT TO DESIRED FORMAT
000010C8  4EB9 000010F8            226              JSR     .PACK
000010CE                           227  
000010CE                           228              ; READ SECOND PART
000010CE  223C 28272625            229              MOVE.L  #KBDDOWN<<24|KBDRIGHT<<16|KBDUP<<8|KBDLEFT,D1
000010D4  4E4F                     230              TRAP    #15
000010D6                           231  
000010D6                           232              ; CONVERT TO DESIRED FORMAT
000010D6  4EB9 000010F8            233              JSR     .PACK
000010DC                           234              
000010DC                           235              ; COMPUTE KBDEDGE
000010DC  1039 00001DF8            236              MOVE.B  (KBDVAL),D0
000010E2  4600                     237              NOT.B   D0
000010E4  C002                     238              AND.B   D2,D0
000010E6  13C0 00001DF9            239              MOVE.B  D0,(KBDEDGE)
000010EC                           240              
000010EC                           241              ; STORE KBDVAL
000010EC  13C2 00001DF8            242              MOVE.B  D2,(KBDVAL)
000010F2                           243              
000010F2  4CDF 000F                244              MOVEM.L (A7)+,D0-D3
000010F6                           245  
000010F6  4E73                     246              RTE
000010F8                           247              
000010F8  363C 0003                248  .PACK       MOVE.W  #3,D3
000010FC  E189                     249  .LOOP       LSL.L   #8,D1
000010FE  E312                     250              ROXL.B  #1,D2
00001100  51CB FFFA                251              DBRA.W  D3,.LOOP
00001104  4E75                     252              RTS
00001106                           253  
00001106                           254              
00001106                           255              
00001106                           256  
00001106                           257  
00001106                           258  
00001106                           259  -------------------- end include --------------------
00001106                           260              INCLUDE "LIB/UTLCONST.X68"
00001106                           261  ; ==============================================================================
00001106                           262  ; UTIL CONSTANTS
00001106                           263  ; ==============================================================================
00001106                           264  
00001106  =00000008                265  UTLCHRWD    EQU     8                       ; CHARACTER WIDTH IN PIXELS
00001106  =00000008                266  -------------------- end include --------------------
00001106                           267              INCLUDE "LIB/UTLCODE.X68"
00001106                           268  ; =============================================================================
00001106                           269  ; UTILITY CODE
00001106                           270  ; =============================================================================
00001106                           271  
00001106                           272  ; -----------------------------------------------------------------------------
00001106                           273  UTLINIT
00001106                           274  ; INITIALIZES UTILITY CODE
00001106                           275  ; INPUT    - NONE
00001106                           276  ; OUTPUT   - NONE
00001106                           277  ; MODIFIES - NONE
00001106                           278  ; -----------------------------------------------------------------------------
00001106  48E7 C000                279              MOVEM.L D0-D1,-(A7)
0000110A  103C 0008                280              MOVE.B  #8,D0
0000110E  4E4F                     281              TRAP    #15
00001110  13C1 0000126C            282              MOVE.B  D1,(UTLRNDIX)
00001116  4CDF 0003                283              MOVEM.L (A7)+,D0-D1
0000111A  4E75                     284              RTS
0000111C                           285  
0000111C                           286  ; -----------------------------------------------------------------------------
0000111C                           287  UTLPRINT
0000111C                           288  ; PRINT SCREEN CENTERED TEXT
0000111C                           289  ; INPUT    : A0 POINTER TO ZERO-TERMINATED STRING
0000111C                           290  ;            D0.B SCREEN ROW TO PRINT TEXT
0000111C                           291  ; OUTPUT   : D0.B NEXT ROW
0000111C                           292  ; MODIFIES : NONE (ASIDE OF OUTPUT)
0000111C                           293  ; -----------------------------------------------------------------------------
0000111C  48E7 C0C0                294              MOVEM.L D0-D1/A0-A1,-(A7)
00001120  4201                     295              CLR.B   D1
00001122  2248                     296              MOVE.L  A0,A1
00001124  4A18                     297  .LOOP       TST.B   (A0)+
00001126  6700 0006                298              BEQ     .ENDLOOP
0000112A  5201                     299              ADDQ.B  #1,D1
0000112C  60F6                     300              BRA     .LOOP
0000112E  E209                     301  .ENDLOOP    LSR.B   #1,D1
00001130  0401 003C                302              SUB.B   #(SCRWIDTH/UTLCHRWD)/2,D1
00001134  4401                     303              NEG.B   D1
00001136  E141                     304              ASL.W   #8,D1
00001138  8240                     305              OR.W    D0,D1
0000113A  103C 000B                306              MOVE.B  #11,D0
0000113E  4E4F                     307              TRAP    #15
00001140  103C 000D                308              MOVE.B  #13,D0
00001144  4E4F                     309              TRAP    #15
00001146  4CDF 0303                310              MOVEM.L (A7)+,D0-D1/A0-A1
0000114A  5400                     311              ADDQ.B  #2,D0
0000114C  4E75                     312              RTS
0000114E                           313              
0000114E                           314              
0000114E                           315  
0000114E                           316  
0000114E                           317              ; (SCRWIDTH/UTLCHRWD)/2 - D1/2
0000114E                           318  
0000114E                           319  
0000114E                           320  ; -----------------------------------------------------------------------------
0000114E                           321  UTLRAND
0000114E                           322  ; PROVIDES A PSEUDO-RANDOM BYTE
0000114E                           323  ; INPUT    - NONE
0000114E                           324  ; OUTPUT   - D0.L RANDOM VALUE (ONLY BYTE)
0000114E                           325  ; MODIFIES - NONE (ASIDE OF OUTPUT)
0000114E                           326  ; -----------------------------------------------------------------------------
0000114E  2F08                     327              MOVE.L  A0,-(A7)
00001150  41F9 0000116C            328              LEA     .RANDVEC,A0
00001156  4280                     329              CLR.L   D0
00001158  1039 0000126C            330              MOVE.B  (UTLRNDIX),D0
0000115E  1030 0800                331              MOVE.B  (A0,D0.L),D0
00001162  5239 0000126C            332              ADDQ.B  #1,(UTLRNDIX)
00001168  205F                     333              MOVE.L  (A7)+,A0
0000116A  4E75                     334              RTS
0000116C                           335  
0000116C                           336  
0000116C= A2 EE 9A 0C F5 24 ...    337  .RANDVEC    DC.B    162, 238, 154, 12 , 245, 36 , 32 , 103
00001174= 2A A3 51 26 E0 AC ...    338              DC.B    42 , 163, 81 , 38 , 224, 172, 19 , 69
0000117C= 75 51 CA FD 33 EB ...    339              DC.B    117, 81 , 202, 253, 51 , 235, 108, 154
00001184= 60 CC E7 B8 9A EB ...    340              DC.B    96 , 204, 231, 184, 154, 235, 34 , 203
0000118C= 1D 76 B5 95 B0 89 ...    341              DC.B    29 , 118, 181, 149, 176, 137, 62 , 108
00001194= 39 15 48 C9 6E CA ...    342              DC.B    57 , 21 , 72 , 201, 110, 202, 159, 41
0000119C= 43 E7 E2 7C 37 25 ...    343              DC.B    67 , 231, 226, 124, 55 , 37 , 84 , 62
000011A4= E9 94 CE E9 E4 52 ...    344              DC.B    233, 148, 206, 233, 228, 82 , 243, 78
000011AC= 37 6D 9A 84 A2 28 ...    345              DC.B    55 , 109, 154, 132, 162, 40 , 30 , 39
000011B4= 19 E2 C6 77 80 D4 ...    346              DC.B    25 , 226, 198, 119, 128, 212, 232, 225
000011BC= 0A 5A 32 67 33 C2 ...    347              DC.B    10 , 90 , 50 , 103, 51 , 194, 222, 40
000011C4= 59 80 DC 0E 57 FC ...    348              DC.B    89 , 128, 220, 14 , 87 , 252, 243, 252
000011CC= 8A AB BC F7 07 4D ...    349              DC.B    138, 171, 188, 247, 7  , 77 , 29 , 234
000011D4= EF D5 77 6E 1E BB ...    350              DC.B    239, 213, 119, 110, 30 , 187, 131, 23
000011DC= D6 E0 2A 8F BD 28 ...    351              DC.B    214, 224, 42 , 143, 189, 40 , 212, 130
000011E4= 13 4F 66 EC 0A 64 ...    352              DC.B    19 , 79 , 102, 236, 10 , 100, 122, 188
000011EC= 56 52 9A 16 9B 90 ...    353              DC.B    86 , 82 , 154, 22 , 155, 144, 7  , 199
000011F4= 06 8A A4 F7 01 DA ...    354              DC.B    6  , 138, 164, 247, 1  , 218, 166, 82
000011FC= F2 E7 77 28 B1 76 ...    355              DC.B    242, 231, 119, 40 , 177, 118, 220, 102
00001204= A4 42 E3 81 B1 67 ...    356              DC.B    164, 66 , 227, 129, 177, 103, 165, 108
0000120C= BF CE FA 16 BF 38 ...    357              DC.B    191, 206, 250, 22 , 191, 56 , 30 , 161
00001214= D1 8B 50 0C 5F 49 ...    358              DC.B    209, 139, 80 , 12 , 95 , 73 , 168, 56
0000121C= DE 4C 14 A2 40 DC ...    359              DC.B    222, 76 , 20 , 162, 64 , 220, 93 , 12
00001224= B6 9B 0A 38 5D AB ...    360              DC.B    182, 155, 10 , 56 , 93 , 171, 89 , 6
0000122C= E2 1B DD 75 15 82 ...    361              DC.B    226, 27 , 221, 117, 21 , 130, 101, 18
00001234= 8A 26 51 30 9F 47 ...    362              DC.B    138, 38 , 81 , 48 , 159, 71 , 57 , 21
0000123C= 1E 8A BB 71 C6 6E ...    363              DC.B    30 , 138, 187, 113, 198, 110, 185, 152
00001244= 9F 47 E5 34 94 27 ...    364              DC.B    159, 71 , 229, 52 , 148, 39 , 77 , 6
0000124C= 7D 06 D6 BA 30 0F ...    365              DC.B    125, 6  , 214, 186, 48 , 15 , 212, 22
00001254= EC 7F 7E 03 CF 2D ...    366              DC.B    236, 127, 126, 3  , 207, 45 , 193, 2
0000125C= 94 5B 23 F2 8B CD ...    367              DC.B    148, 91 , 35 , 242, 139, 205, 248, 237
00001264= 74 33 EC B9 0F D5 ...    368              DC.B    116, 51 , 236, 185, 15 , 213, 221, 6
0000126C                           369  
0000126C                           370  
0000126C                           371  
0000126C                           372  -------------------- end include --------------------
0000126C                           373              INCLUDE "LIB/UTLVARS.X68"
0000126C                           374  ; =============================================================================
0000126C                           375  ; UTILITY VARIABLES
0000126C                           376  ; =============================================================================
0000126C                           377  
0000126C                           378  UTLRNDIX    DS.B    1                       ; NEXT INDEX TO RANDOM NUMBER
0000126E                           379              DS.W    0
0000126E                           380  -------------------- end include --------------------
0000126E                           381              INCLUDE "BOX.X68"
0000126E                           382  ; ==============================================================================
0000126E                           383  ; BOX MANAGEMENT
0000126E                           384  ; ==============================================================================
0000126E                           385              
0000126E                           386  ; ------------------------------------------------------------------------------
0000126E                           387  BOXINIT
0000126E                           388  ; INITIALIZE BOX.
0000126E                           389  ; INPUT    : NONE 
0000126E                           390  ; OUTPUT   : NONE
0000126E                           391  ; MODIFIES : NONE
0000126E                           392  ; ------------------------------------------------------------------------------
0000126E                           393              
0000126E  33FC 0083 00001D30       394              MOVE.W  #BOXRAD*2+41,(BOXPOSX)
00001276  33FC 0064 00001D32       395              MOVE.W  #BOXRAD*2+10,(BOXPOSY)
0000127E                           396              
0000127E  4E75                     397              RTS
00001280                           398              
00001280                           399  ; ------------------------------------------------------------------------------
00001280                           400  BOXUPD
00001280                           401  ; UPDATES THE BOX.
00001280                           402  ; INPUT    : NONE 
00001280                           403  ; OUTPUT   : NONE
00001280                           404  ; MODIFIES : NONE
00001280                           405  ; ------------------------------------------------------------------------------
00001280  4E75                     406              RTS
00001282                           407              
00001282                           408  ; ------------------------------------------------------------------------------
00001282                           409  BOXPLOT
00001282                           410  ; PLOT THE BOX.
00001282                           411  ; INPUT    : NONE 
00001282                           412  ; OUTPUT   : NONE
00001282                           413  ; MODIFIES : NONE
00001282                           414  ; ------------------------------------------------------------------------------
00001282  48E7 FE40                415              MOVEM.L D0-D6/A1,-(A7)
00001286                           416  
00001286                           417              ; SET PEN COLOR
00001286  103C 0050                418              MOVE.B  #80,D0
0000128A  223C 00AA0000            419              MOVE.L  #BOXPCOL,D1
00001290  4E4F                     420              TRAP    #15
00001292                           421              
00001292                           422              ; SET FILL COLOR
00001292  103C 0051                423              MOVE.B  #81,D0
00001296  7200                     424              MOVE.L  #BOXFCOL,D1                                                                     
00001298  4E4F                     425              TRAP    #15                                                                             
0000129A                           426              
0000129A                           427              ; DEFINE COORDINATES
0000129A  3239 00001D30            428              MOVE.W  (BOXPOSX),D1
000012A0  3439 00001D2C            429              MOVE.W  (BOXCOL),D2
000012A6  C3C2                     430              MULS.W  D2,D1
000012A8  0441 005A                431              SUB.W   #BOXRAD*2,D1
000012AC                           432              
000012AC  3439 00001D32            433              MOVE.W  (BOXPOSY),D2
000012B2  3639 00001D2E            434              MOVE.W  (BOXROW),D3
000012B8  C5C3                     435              MULS.W  D3,D2
000012BA  0642 005A                436              ADD.W   #PIERAD*2+20,D2
000012BE  0442 0055                437              SUB.W   #BOXRAD*2-5,D2
000012C2                           438              
000012C2  3601                     439              MOVE.W  D1,D3
000012C4  0643 005A                440              ADD.W   #BOXRAD*2,D3
000012C8                           441              
000012C8  3802                     442              MOVE.W  D2,D4
000012CA  0644 005A                443              ADD.W   #BOXRAD*2,D4
000012CE                           444              
000012CE                           445              ; DRAW CIRCLE
000012CE  103C 0058                446              MOVE.B  #88,D0
000012D2  4E4F                     447              TRAP    #15
000012D4                           448              
000012D4  43F9 00001D42            449              LEA.L   ROW1,A1
000012DA  3639 00001D2C            450              MOVE.W  (BOXCOL),D3
000012E0  3839 00001D2E            451              MOVE.W  (BOXROW),D4
000012E6  5343                     452              SUBQ.W  #1,D3
000012E8  5344                     453              SUBQ.W  #1,D4
000012EA  D2C3                     454              ADD.W   D3,A1   
000012EC  C9FC 0007                455              MULS.W  #7,D4
000012F0  D2C4                     456              ADD.W   D4,A1
000012F2                           457              
000012F2  0C11 0000                458              CMP.B   #0,(A1)
000012F6  6700 0016                459              BEQ     .EMPTY
000012FA  3A01                     460              MOVE.W  D1,D5
000012FC  0645 002D                461              ADD.W   #BOXRAD,D5
00001300  3C02                     462              MOVE.W  D2,D6
00001302  0646 002D                463              ADD.W   #BOXRAD,D6
00001306  1011                     464              MOVE.B  (A1),D0
00001308  4EB9 00001478            465              JSR     PIEPLOT
0000130E                           466              
0000130E                           467  .EMPTY
0000130E  4CDF 027F                468              MOVEM.L (A7)+,D0-D6/A1
00001312                           469  
00001312  4E75                     470              RTS
00001314                           471  
00001314                           472  
00001314                           473  
00001314                           474  
00001314                           475  
00001314                           476  
00001314                           477  
00001314                           478  
00001314                           479  
00001314                           480  
00001314                           481  -------------------- end include --------------------
00001314                           482              INCLUDE "TABLE.X68"
00001314                           483  ; ==============================================================================
00001314                           484  ; TABLE MANAGEMENT
00001314                           485  ; ==============================================================================
00001314                           486              
00001314                           487  ; ------------------------------------------------------------------------------
00001314                           488  TABINIT
00001314                           489  ; INITIALIZE TABLE.
00001314                           490  ; INPUT    : NONE 
00001314                           491  ; OUTPUT   : NONE
00001314                           492  ; MODIFIES : NONE
00001314                           493  ; ------------------------------------------------------------------------------
00001314                           494  
00001314  48E7 8040                495              MOVEM.L D0/A1,-(A7)
00001318                           496  
00001318                           497              ;INITIALICE ROWS VALUES
00001318  303C 0029                498              MOVE.W  #6*7-1,D0
0000131C  43F9 00001D42            499              LEA.L   ROW1,A1
00001322                           500  .LOOP       
00001322  12BC 0000                501              MOVE.B  #0,(A1)
00001326  5289                     502              ADD.L  #1,A1
00001328  51C8 FFF8                503              DBRA    D0,.LOOP
0000132C                           504  
0000132C  4CDF 0201                505              MOVEM.L (A7)+,D0/A1
00001330                           506  
00001330  4E75                     507              RTS
00001332                           508              
00001332                           509  ; ------------------------------------------------------------------------------
00001332                           510  TABPLOT
00001332                           511  ; PLOT THE TABLE.
00001332                           512  ; INPUT    : NONE 
00001332                           513  ; OUTPUT   : NONE
00001332                           514  ; MODIFIES : NONE
00001332                           515  ; ------------------------------------------------------------------------------
00001332                           516  
00001332  48E7 F800                517              MOVEM.L D0-D4,-(A7)
00001336                           518  
00001336                           519              ; SET CONTOUR COLOR
00001336  103C 0050                520              MOVE.B  #80,D0
0000133A  223C 00FF0000            521              MOVE.L  #TABPCOL,D1
00001340  4E4F                     522              TRAP    #15
00001342                           523              
00001342                           524              ; SET FILL COLOR
00001342  103C 0051                525              MOVE.B  #81,D0
00001346  223C 00AA0000            526              MOVE.L  #TABFCOL,D1
0000134C  4E4F                     527              TRAP    #15
0000134E                           528              
0000134E                           529              ; DEFINE COORDINATES
0000134E  323C 0005                530              MOVE.W  #5,D1
00001352  343C 005A                531              MOVE.W  #PIERAD*2+20,D2
00001356  363C 03BB                532              MOVE.W  #SCRWIDTH-5,D3
0000135A  383C 02CB                533              MOVE.W  #SCRHEIGH-5,D4
0000135E                           534              
0000135E                           535              ; DRAW RECTANGLE
0000135E  103C 0057                536              MOVE.B  #87,D0
00001362  4E4F                     537              TRAP    #15
00001364                           538              
00001364  4CDF 001F                539              MOVEM.L (A7)+,D0-D4
00001368                           540  
00001368  4E75                     541              RTS
0000136A                           542  
0000136A                           543  
0000136A                           544  
0000136A                           545  
0000136A                           546  
0000136A                           547  
0000136A                           548  
0000136A                           549  
0000136A                           550  
0000136A                           551  
0000136A                           552  
0000136A                           553  
0000136A                           554  
0000136A                           555  
0000136A                           556  
0000136A                           557  -------------------- end include --------------------
0000136A                           558              INCLUDE "PIECE.X68"
0000136A                           559  ; ==============================================================================
0000136A                           560  ; PIECE MANAGEMENT
0000136A                           561  ; ==============================================================================
0000136A                           562              
0000136A                           563  ; ------------------------------------------------------------------------------
0000136A                           564  PIEINIT
0000136A                           565  ; INITIALIZE THE PIECE.
0000136A                           566  ; INPUT    : NONE 
0000136A                           567  ; OUTPUT   : NONE
0000136A                           568  ; MODIFIES : NONE
0000136A                           569  ; ------------------------------------------------------------------------------
0000136A                           570  
0000136A  33FC 01DF 00001D34       571              MOVE.W  #SCRWIDTH/2-1,(PIEPOSX)
00001372  33FC 002D 00001D36       572              MOVE.W  #PIERAD+10,(PIEPOSY)
0000137A                           573              
0000137A  33F9 00001D30 00001D38   574              MOVE.W  (BOXPOSX),(PIEVELX)
00001384  33FC 0064 00001D3A       575              MOVE.W  #100,(PIEVELY)
0000138C                           576              
0000138C  33FC 0003 00001D3C       577              MOVE.W  #3,(POSX)
00001394  33FC FFFF 00001D3E       578              MOVE.W  #-1,(POSY)
0000139C                           579              
0000139C  4239 00001D40            580              CLR.B   (FALLING)
000013A2                           581              
000013A2  4E75                     582              RTS
000013A4                           583              
000013A4                           584  ; ------------------------------------------------------------------------------
000013A4                           585  PIEUPD
000013A4                           586  ; UPDATE THE PIECE.
000013A4                           587  ; INPUT    : NONE 
000013A4                           588  ; OUTPUT   : NONE
000013A4                           589  ; MODIFIES : NONE
000013A4                           590  ; ------------------------------------------------------------------------------
000013A4                           591              
000013A4  48A7 F000                592              MOVEM.W  D0-D3,-(A7)
000013A8                           593              
000013A8  0C39 0000 00001D40       594              CMP.B   #0,(FALLING)
000013B0  6700 0020                595              BEQ     .PASS1
000013B4  1639 00001DFB            596              MOVE.B  (SCRCYCCT),D3
000013BA  C63C 00F0                597              AND.B   #$F0,D3
000013BE  B639 00001DFB            598              CMP.B   (SCRCYCCT),D3
000013C4  6600 0062                599              BNE     .DONE2
000013C8  4EB9 00001500            600              JSR     PIEFALL
000013CE  6000 0058                601              BRA     .DONE2
000013D2                           602              
000013D2                           603  .PASS1             
000013D2                           604              ; UPDATE X POSITION
000013D2  3039 00001D34            605              MOVE.W  (PIEPOSX),D0
000013D8                           606              
000013D8                           607              ; CHECK LEFT ARROW KEY
000013D8  0839 0000 00001DF9       608              BTST.B  #0,(KBDEDGE)
000013E0  6700 000C                609              BEQ     .CHKRIGHT
000013E4  4EB9 0000142E            610              JSR     PRESSLEFT
000013EA  6000 0036                611              BRA     .DONE
000013EE                           612              
000013EE                           613              ;CHECK  RIGHT ARROW KEY
000013EE  0839 0002 00001DF9       614  .CHKRIGHT   BTST.B  #2,(KBDEDGE)
000013F6  6700 000C                615              BEQ     .CHKSPACE
000013FA  4EB9 00001454            616              JSR     PRESSRIGHT
00001400  6000 0020                617              BRA     .DONE
00001404                           618              
00001404                           619              ; CHECK SPACE KEY
00001404  0839 0004 00001DF9       620  .CHKSPACE   BTST.B  #4,(KBDEDGE)
0000140C  6700 001A                621              BEQ     .DONE2
00001410  13FC 0001 00001D40       622              MOVE.B  #1,(FALLING)
00001418  4EB9 00001500            623              JSR     PIEFALL
0000141E  6000 0008                624              BRA     .DONE2
00001422                           625  
00001422                           626              ; UPDATE VARIABLE
00001422  33C0 00001D34            627  .DONE       MOVE.W  D0,(PIEPOSX) 
00001428                           628  
00001428  4C9F 000F                629  .DONE2      MOVEM.W  (A7)+,D0-D3             
0000142C                           630  
0000142C  4E75                     631              RTS
0000142E                           632  
0000142E                           633  PRESSLEFT
0000142E  9079 00001D38            634              SUB.W   (PIEVELX),D0
00001434  5379 00001D3C            635              SUBQ.W  #1,(POSX)
0000143A                           636              
0000143A                           637              ; CHECK COLISIONS LEFT
0000143A  3239 00001D38            638              MOVE.W  (PIEVELX),D1
00001440  0441 002C                639              SUB.W   #BOXRAD-1,D1
00001444  B041                     640              CMP.W   D1,D0
00001446  6C00 000A                641              BGE     .DONELEFT
0000144A  3001                     642              MOVE.W  D1,D0
0000144C  4279 00001D3C            643              CLR.W   (POSX)
00001452  4E75                     644  .DONELEFT   RTS   
00001454                           645  
00001454                           646  PRESSRIGHT
00001454  D079 00001D38            647              ADD.W   (PIEVELX),D0
0000145A  5279 00001D3C            648              ADDQ.W  #1,(POSX)
00001460                           649              
00001460                           650              ; CHECK COLISIONS RIGHT
00001460  343C 03C0                651              MOVE.W  #SCRWIDTH,D2
00001464  9441                     652              SUB.W   D1,D2
00001466  B042                     653              CMP.W   D2,D0
00001468  6F00 000C                654              BLE     .DONERIGHT
0000146C  3002                     655              MOVE.W  D2,D0
0000146E  33FC 0006 00001D3C       656              MOVE.W  #6,(POSX)
00001476  4E75                     657  .DONERIGHT  RTS            
00001478                           658  
00001478                           659  ; ------------------------------------------------------------------------------
00001478                           660  PIEPLOT
00001478                           661  ; PLOT THE PIECE.
00001478                           662  ; INPUT    : D5.W AS COORDINATE X OF PIECE, D6.W AS COORDINATE Y OF PIECE,
00001478                           663  ;            D0.B INDICATES COLOR OF THE PIECE
00001478                           664  ; OUTPUT   : NONE
00001478                           665  ; MODIFIES : NONE
00001478                           666  ; ------------------------------------------------------------------------------
00001478  48E7 7800                667              MOVEM.L D1-D4,-(A7)
0000147C                           668  
0000147C  B03C 0001                669              CMP.B   #1,D0
00001480  6700 0026                670              BEQ     .COLOR1
00001484  B03C 0015                671              CMP.B   #21,D0
00001488  6700 003A                672              BEQ     .COLORWINNER
0000148C                           673              
0000148C                           674              ; SET PEN COLOR
0000148C  103C 0050                675              MOVE.B  #80,D0
00001490  223C 0000AAAA            676              MOVE.L  #PIEPCOL2,D1
00001496  4E4F                     677              TRAP    #15
00001498                           678              
00001498                           679              ; SET FILL COLOR
00001498  103C 0051                680              MOVE.B  #81,D0
0000149C  223C 0000FFFF            681              MOVE.L  #PIEFCOL2,D1
000014A2  4E4F                     682              TRAP    #15
000014A4                           683              
000014A4  6000 0036                684              BRA     .JUMP
000014A8                           685              
000014A8                           686  .COLOR1            
000014A8                           687              ; SET PEN COLOR
000014A8  103C 0050                688              MOVE.B  #80,D0
000014AC  223C 000000AA            689              MOVE.L  #PIEPCOL1,D1
000014B2  4E4F                     690              TRAP    #15
000014B4                           691              
000014B4                           692              ; SET FILL COLOR
000014B4  103C 0051                693              MOVE.B  #81,D0
000014B8  223C 000000FF            694              MOVE.L  #PIEFCOL1,D1
000014BE  4E4F                     695              TRAP    #15
000014C0                           696              
000014C0  6000 001A                697              BRA     .JUMP
000014C4                           698  
000014C4                           699  .COLORWINNER
000014C4                           700              ; SET PEN COLOR
000014C4  103C 0050                701              MOVE.B  #80,D0
000014C8  7200                     702              MOVE.L  #PIEPCOL3,D1
000014CA  4E4F                     703              TRAP    #15
000014CC                           704              
000014CC                           705              ; SET FILL COLOR
000014CC  103C 0051                706              MOVE.B  #81,D0
000014D0  223C 003FEB1D            707              MOVE.L  #PIEFCOL3,D1
000014D6  4E4F                     708              TRAP    #15
000014D8                           709              
000014D8  6000 0002                710              BRA     .JUMP
000014DC                           711  
000014DC                           712  .JUMP            
000014DC                           713              ; DEFINE COORDINATES
000014DC  3205                     714              MOVE.W  D5,D1
000014DE  0441 0023                715              SUB.W   #PIERAD,D1
000014E2                           716              
000014E2  3406                     717              MOVE.W  D6,D2
000014E4  0442 0023                718              SUB.W   #PIERAD,D2
000014E8                           719              
000014E8  3605                     720              MOVE.W  D5,D3
000014EA  0643 0023                721              ADD.W   #PIERAD,D3
000014EE                           722              
000014EE  3806                     723              MOVE.W  D6,D4
000014F0  0644 0023                724              ADD.W   #PIERAD,D4
000014F4                           725              
000014F4                           726              ; DRAW PIECE
000014F4  103C 0058                727              MOVE.B  #88,D0
000014F8  4E4F                     728              TRAP    #15
000014FA                           729              
000014FA  4CDF 001E                730              MOVEM.L (A7)+,D1-D4
000014FE                           731  
000014FE  4E75                     732              RTS
00001500                           733              
00001500                           734  ; ------------------------------------------------------------------------------
00001500                           735  PIEFALL
00001500                           736  ; LET A PIECE FALL IN A COLUMN
00001500                           737  ; INPUT    : NONE
00001500                           738  ; OUTPUT   : NONE
00001500                           739  ; MODIFIES : NONE
00001500                           740  ; ------------------------------------------------------------------------------
00001500                           741              
00001500  48E7 C040                742              MOVEM.L D0-D1/A1,-(A7)
00001504                           743              
00001504  4280                     744              CLR.L   D0
00001506  43F9 00001D42            745              LEA.L   ROW1,A1
0000150C  5279 00001D3E            746              ADDQ.W  #1,(POSY)
00001512  3039 00001D3E            747              MOVE.W  (POSY),D0
00001518  C1FC 0007                748              MULS.W  #7,D0
0000151C  D2C0                     749              ADD.W   D0,A1
0000151E  3039 00001D3C            750              MOVE.W  (POSX),D0
00001524  D2C0                     751              ADD.W   D0,A1
00001526                           752              
00001526  0C79 0006 00001D3E       753              CMP.W   #6,(POSY)
0000152E  6700 002E                754              BEQ     .END 
00001532                           755              
00001532  0C11 0000                756              CMP.B   #0,(A1)
00001536  6600 0026                757              BNE     .END
0000153A                           758              
0000153A  3239 00001D3A            759              MOVE.W  (PIEVELY),D1
00001540  D379 00001D36            760              ADD.W   D1,(PIEPOSY)
00001546  0C79 0000 00001D3E       761              CMP.W   #0,(POSY)
0000154E  6600 0008                762              BNE     .PASS
00001552  5A79 00001D36            763              ADDQ.W  #5,(PIEPOSY) 
00001558  4CDF 0203                764  .PASS       MOVEM.L (A7)+,D0-D1/A1
0000155C                           765  
0000155C  4E75                     766              RTS
0000155E                           767  
0000155E  5F89                     768  .END        SUBQ.L  #7,A1
00001560  5379 00001D3E            769              SUBQ.W  #1,(POSY)
00001566  12B9 00001D6C            770              MOVE.B  (TURN),(A1)
0000156C  4EB9 0000158E            771              JSR     CHKCOL                  ;CHECK 4 CONNECT IN COLUMNS
00001572  4EB9 000015EE            772              JSR     CHKROW                  ;CHECK 4 CONNECT IN ROWS
00001578  4EB9 00001648            773              JSR     CHKDIA                  ;CHECK 4 CONNECT IN DIAGONALS
0000157E  4EB9 00001726            774              JSR     PLAUPD
00001584  4EB8 136A                775              JSR     PIEINIT
00001588                           776              
00001588  4CDF 0203                777              MOVEM.L (A7)+,D0-D1/A1
0000158C                           778  
0000158C  4E75                     779              RTS
0000158E                           780              
0000158E                           781  ; ------------------------------------------------------------------------------
0000158E                           782  CHKCOL
0000158E                           783  ; CHECK IF SOME COLUMN HAVE 4 PIECES CONNECTED
0000158E                           784  ; INPUT    : NONE
0000158E                           785  ; OUTPUT   : NONE
0000158E                           786  ; MODIFIES : NONE
0000158E                           787  ; ------------------------------------------------------------------------------
0000158E                           788  
0000158E  48E7 E070                789              MOVEM.L D0-D2/A1-A3,-(A7)
00001592                           790              
00001592  43F9 00001D42            791              LEA.L   ROW1,A1
00001598  7006                     792              MOVE.L  #BOXNCOL-1,D0
0000159A                           793  .CHECK_NEXT_COL
0000159A  2449                     794              MOVE.L  A1,A2
0000159C  5289                     795              ADD.L   #1,A1
0000159E  7202                     796              MOVE.L  #BOXNROW-3-1,D1
000015A0                           797              
000015A0                           798  .CHECK_POSITION_COL
000015A0  264A                     799              MOVE.L  A2,A3
000015A2  5E8A                     800              ADD.L   #7,A2
000015A4                           801              
000015A4  4282                     802              CLR.L   D2
000015A6  1413                     803              MOVE.B  (A3),D2
000015A8  5E8B                     804              ADD.L   #7,A3
000015AA  D413                     805              ADD.B   (A3),D2
000015AC  5E8B                     806              ADD.L   #7,A3
000015AE  D413                     807              ADD.B   (A3),D2
000015B0  5E8B                     808              ADD.L   #7,A3
000015B2  D413                     809              ADD.B   (A3),D2
000015B4                           810              
000015B4  B43C 0004                811              CMP.B   #4,D2
000015B8  6700 0018                812              BEQ     .PLAYERWINS_COL
000015BC  B43C 0014                813              CMP.B   #20,D2
000015C0  6700 0010                814              BEQ     .PLAYERWINS_COL
000015C4                           815              
000015C4  51C9 FFDA                816              DBRA    D1,.CHECK_POSITION_COL
000015C8                           817              
000015C8  51C8 FFD0                818              DBRA    D0,.CHECK_NEXT_COL
000015CC                           819              
000015CC  4CDF 0E07                820              MOVEM.L (A7)+,D0-D2/A1-A3
000015D0                           821              
000015D0  4E75                     822              RTS
000015D2                           823              
000015D2                           824  .PLAYERWINS_COL
000015D2  13F9 00001D6C 00001D6D   825              MOVE.B  (TURN),(WINNER)  
000015DC                           826  
000015DC  7003                     827              MOVE.L  #3,D0
000015DE                           828  .LOOP_COL
000015DE  16BC 0015                829              MOVE.B  #21,(A3)
000015E2  5F8B                     830              SUB.L   #7,A3
000015E4  51C8 FFF8                831              DBRA    D0,.LOOP_COL
000015E8                           832                      
000015E8  4CDF 0E07                833              MOVEM.L (A7)+,D0-D2/A1-A3
000015EC  4E75                     834              RTS
000015EE                           835  
000015EE                           836  ; ------------------------------------------------------------------------------
000015EE                           837  CHKROW
000015EE                           838  ; CHECK IF SOME ROW HAVE 4 PIECES CONNECTED
000015EE                           839  ; INPUT    : NONE
000015EE                           840  ; OUTPUT   : NONE
000015EE                           841  ; MODIFIES : NONE
000015EE                           842  ; ------------------------------------------------------------------------------
000015EE                           843  
000015EE  48E7 E070                844              MOVEM.L D0-D2/A1-A3,-(A7)
000015F2                           845              
000015F2  43F9 00001D42            846              LEA.L   ROW1,A1
000015F8  7005                     847              MOVE.L  #BOXNROW-1,D0
000015FA                           848  .CHECK_NEXT_ROW
000015FA  2449                     849              MOVE.L  A1,A2
000015FC  5E89                     850              ADD.L   #7,A1
000015FE  7203                     851              MOVE.L  #BOXNCOL-3-1,D1
00001600                           852              
00001600                           853  .CHECK_POSITION_ROW
00001600  264A                     854              MOVE.L  A2,A3
00001602  528A                     855              ADD.L   #1,A2
00001604                           856              
00001604  4282                     857              CLR.L   D2
00001606  141B                     858              MOVE.B   (A3)+,D2
00001608  D41B                     859              ADD.B   (A3)+,D2
0000160A  D41B                     860              ADD.B   (A3)+,D2
0000160C  D413                     861              ADD.B   (A3),D2
0000160E                           862              
0000160E  B43C 0004                863              CMP.B   #4,D2
00001612  6700 0018                864              BEQ     .PLAYERWINS_ROW
00001616  B43C 0014                865              CMP.B   #20,D2
0000161A  6700 0010                866              BEQ     .PLAYERWINS_ROW
0000161E                           867              
0000161E  51C9 FFE0                868              DBRA    D1,.CHECK_POSITION_ROW
00001622                           869              
00001622  51C8 FFD6                870              DBRA    D0,.CHECK_NEXT_ROW
00001626                           871              
00001626  4CDF 0E07                872              MOVEM.L (A7)+,D0-D2/A1-A3
0000162A                           873              
0000162A  4E75                     874              RTS
0000162C                           875  
0000162C                           876  .PLAYERWINS_ROW
0000162C  13F9 00001D6C 00001D6D   877              MOVE.B  (TURN),(WINNER)
00001636                           878              
00001636  7003                     879              MOVE.L  #3,D0
00001638                           880  .LOOP_ROW
00001638  16BC 0015                881              MOVE.B  #21,(A3)
0000163C  538B                     882              SUB.L   #1,A3
0000163E  51C8 FFF8                883              DBRA    D0,.LOOP_ROW
00001642                           884              
00001642  4CDF 0E07                885              MOVEM.L (A7)+,D0-D2/A1-A3
00001646  4E75                     886              RTS
00001648                           887  
00001648                           888  ; ------------------------------------------------------------------------------
00001648                           889  CHKDIA
00001648                           890  ; CHECK IF SOME DIAGONAL HAVE 4 PIECES CONNECTED
00001648                           891  ; INPUT    : NONE
00001648                           892  ; OUTPUT   : NONE
00001648                           893  ; MODIFIES : NONE
00001648                           894  ; ------------------------------------------------------------------------------
00001648                           895  
00001648  48E7 FE70                896              MOVEM.L D0-D6/A1-A3,-(A7)
0000164C                           897              
0000164C  43F9 00001D42            898              LEA.L   ROW1,A1
00001652                           899             
00001652  7C08                     900              MOVE.L  #8,D6
00001654  7201                     901              MOVE.L  #1,D1
00001656                           902  .LOOP_TO_OTHER_SIDE 
00001656                           903             
00001656  7A07                     904              MOVE.L  #7,D5
00001658  7401                     905              MOVE.L  #1,D2
0000165A                           906  .LOOP_DIAGONALS_ROW1
0000165A                           907  
0000165A  2449                     908              MOVE.L  A1,A2
0000165C                           909              ;DIAGONAL OF (0,0) AND (6,0) / (1,0) AND (5,0)            
0000165C  7602                     910              MOVE.L  #2,D3
0000165E                           911  .LOOP1
0000165E  264A                     912              MOVE.L  A2,A3
00001660  D5C6                     913              ADD.L   D6,A2
00001662                           914              
00001662  4EB9 000016DC            915              JSR     CHECK_DIAGONALS
00001668  0C39 0000 00001D6D       916              CMP.B   #0,(WINNER)
00001670  6600 0064                917              BNE     .FINISH_DIA
00001674                           918             
00001674  51CB FFE8                919              DBRA    D3,.LOOP1
00001678                           920              
00001678                           921              ;DIAGONAL OF (0,1) AND (6,1) / (2,0) AND (4,0)
00001678  2449                     922              MOVE.L  A1,A2
0000167A  D5C5                     923              ADD.L   D5,A2
0000167C                           924              
0000167C  7601                     925              MOVE.L  #1,D3
0000167E                           926  .LOOP2
0000167E  264A                     927              MOVE.L  A2,A3
00001680  D5C6                     928              ADD.L   D6,A2
00001682                           929              
00001682  4EB9 000016DC            930              JSR     CHECK_DIAGONALS
00001688  0C39 0000 00001D6D       931              CMP.B   #0,(WINNER)
00001690  6600 0044                932              BNE     .FINISH_DIA
00001694                           933             
00001694  51CB FFE8                934              DBRA    D3,.LOOP2
00001698                           935              
00001698                           936              ;DIAGONAL OF (0,2) AND (6,2) / (3,0)
00001698  2649                     937              MOVE.L  A1,A3
0000169A  D7C5                     938              ADD.L   D5,A3
0000169C  D7C5                     939              ADD.L   D5,A3
0000169E                           940              
0000169E  4EB9 000016DC            941              JSR     CHECK_DIAGONALS
000016A4  0C39 0000 00001D6D       942              CMP.B   #0,(WINNER)
000016AC  6600 0028                943              BNE     .FINISH_DIA          
000016B0                           944              
000016B0  B2BC 00000000            945              CMP.L   #0,D1
000016B6  6700 0008                946              BEQ     .MINUS1
000016BA  7A01                     947              MOVE.L  #1,D5
000016BC  6000 0004                948              BRA     .PASS_DIA
000016C0  7AFF                     949  .MINUS1     MOVE.L  #-1,D5
000016C2  D3C5                     950  .PASS_DIA   ADD.L   D5,A1
000016C4  51CA FF94                951              DBRA    D2,.LOOP_DIAGONALS_ROW1
000016C8                           952              
000016C8  43F9 00001D42            953              LEA     ROW1,A1
000016CE  5C89                     954              ADDQ.L  #6,A1
000016D0  7C06                     955              MOVE.L  #6,D6
000016D2  51C9 FF82                956              DBRA    D1,.LOOP_TO_OTHER_SIDE
000016D6                           957  
000016D6                           958  .FINISH_DIA
000016D6  4CDF 0E7F                959              MOVEM.L (A7)+,D0-D6/A1-A3            
000016DA  4E75                     960              RTS
000016DC                           961  
000016DC                           962  CHECK_DIAGONALS
000016DC  4280                     963              CLR.L   D0
000016DE  1013                     964              MOVE.B  (A3),D0
000016E0  D7C6                     965              ADD.L   D6,A3
000016E2  D013                     966              ADD.B   (A3),D0
000016E4  D7C6                     967              ADD.L   D6,A3
000016E6  D013                     968              ADD.B   (A3),D0
000016E8  D7C6                     969              ADD.L   D6,A3
000016EA  D013                     970              ADD.B   (A3),D0
000016EC                           971              
000016EC  B03C 0004                972              CMP.B   #4,D0
000016F0  6700 000C                973              BEQ     .PLAYERWINS_DIA
000016F4  B03C 0014                974              CMP.B   #20,D0
000016F8  6700 0004                975              BEQ     .PLAYERWINS_DIA
000016FC                           976              
000016FC  4E75                     977              RTS
000016FE                           978             
000016FE                           979  .PLAYERWINS_DIA
000016FE  13F9 00001D6C 00001D6D   980              MOVE.B  (TURN),(WINNER)  
00001708                           981  
00001708  7003                     982              MOVE.L  #3,D0
0000170A                           983  .LOOP_DIA
0000170A  16BC 0015                984              MOVE.B  #21,(A3)
0000170E  97C6                     985              SUB.L   D6,A3
00001710  51C8 FFF8                986              DBRA    D0,.LOOP_DIA
00001714                           987                     
00001714  4E75                     988              RTS
00001716                           989  
00001716                           990  
00001716                           991  
00001716                           992  
00001716                           993  
00001716                           994  
00001716                           995  
00001716                           996  
00001716                           997  
00001716                           998  
00001716                           999  
00001716                          1000  
00001716                          1001  -------------------- end include --------------------
00001716                          1002              INCLUDE "PLAYER.X68"
00001716                          1003  ; ==============================================================================
00001716                          1004  ; PLAYERS MANAGEMENT
00001716                          1005  ; ==============================================================================
00001716                          1006             
00001716                          1007  ; ------------------------------------------------------------------------------
00001716                          1008  PLAINIT
00001716                          1009  ; INITIALIZE PLAYER.
00001716                          1010  ; INPUT    : NONE 
00001716                          1011  ; OUTPUT   : NONE
00001716                          1012  ; MODIFIES : NONE
00001716                          1013  ; ------------------------------------------------------------------------------
00001716                          1014              
00001716  13FC 0001 00001D6C      1015              MOVE.B  #1,(TURN)               ; STARTS THE PLAYER 1
0000171E  4239 00001D6D           1016              CLR.B   (WINNER)
00001724                          1017              
00001724  4E75                    1018              RTS
00001726                          1019              
00001726                          1020  ; ------------------------------------------------------------------------------
00001726                          1021  PLAUPD
00001726                          1022  ; UPDATES THE PLAYER.
00001726                          1023  ; INPUT    : NONE 
00001726                          1024  ; OUTPUT   : NONE
00001726                          1025  ; MODIFIES : NONE
00001726                          1026  ; ------------------------------------------------------------------------------
00001726                          1027              
00001726  0C39 0001 00001D6C      1028              CMP.B   #1,(TURN)               
0000172E  6700 000C               1029              BEQ     .PLAYER2                ; SWAPS TURN
00001732  13FC 0001 00001D6C      1030              MOVE.B  #1,(TURN)               ; PLAYER 1 TURN   
0000173A                          1031              
0000173A  4E75                    1032              RTS
0000173C                          1033              
0000173C  13FC 0005 00001D6C      1034  .PLAYER2    MOVE.B  #5,(TURN)               ; PLAYER 2 TURN
00001744                          1035              
00001744  4E75                    1036              RTS
00001746                          1037              
00001746                          1038  
00001746                          1039  
00001746                          1040  
00001746                          1041  
00001746                          1042  
00001746                          1043  
00001746                          1044  -------------------- end include --------------------
00001746                          1045              INCLUDE "BOARD.X68"
00001746                          1046  ; ==============================================================================
00001746                          1047  ; BOARD MANAGEMENT
00001746                          1048  ; ==============================================================================
00001746                          1049              
00001746                          1050  ; ------------------------------------------------------------------------------
00001746                          1051  BOAPLOT
00001746                          1052  ; PLOT THE BOARD
00001746                          1053  ; INPUT    : A1 POINTER TO A NULL-TERMINATED STRING 
00001746                          1054  ; OUTPUT   : NONE
00001746                          1055  ; MODIFIES : NONE
00001746                          1056  ; ------------------------------------------------------------------------------
00001746                          1057  
00001746  48E7 C040               1058              MOVEM.L D0-D1/A1,-(A7)
0000174A                          1059  
0000174A                          1060              ; SET BACKGROUND COLOR
0000174A  103C 0051               1061              MOVE.B  #81,D0
0000174E  7200                    1062              MOVE.L  #00000000,D1
00001750  4E4F                    1063              TRAP    #15
00001752                          1064              
00001752                          1065              ; SET FIRST LINE POSITION (SCREEN ARRAY COLUMNS = 120 ROWS = 47)
00001752  103C 000B               1066              MOVE.B  #11,D0
00001756  323C 0000               1067              MOVE.W  #$0000,D1
0000175A  4E4F                    1068              TRAP    #15
0000175C                          1069  
0000175C                          1070              ; PRINT LINE
0000175C  4281                    1071              CLR.L   D1
0000175E  0C39 0001 00001D6C      1072              CMP.B   #1,(TURN)
00001766  6700 000A               1073              BEQ     .PLAYER1
0000176A  123C 0002               1074              MOVE.B  #2,D1
0000176E  6000 0006               1075              BRA     .PASS
00001772                          1076              
00001772  123C 0001               1077  .PLAYER1    MOVE.B  #1,D1
00001776                          1078  
00001776  103C 0011               1079  .PASS       MOVE.B  #17,D0
0000177A  4E4F                    1080              TRAP    #15
0000177C  4CDF 0203               1081              MOVEM.L (A7)+,D0-D1/A1
00001780                          1082              
00001780  4E75                    1083              RTS
00001782                          1084  
00001782                          1085  
00001782                          1086  
00001782                          1087  
00001782                          1088  
00001782                          1089  
00001782                          1090  
00001782                          1091  
00001782                          1092  
00001782                          1093  
00001782                          1094  
00001782                          1095  -------------------- end include --------------------
00001782                          1096              INCLUDE "GAME.X68"
00001782                          1097  ; ==============================================================================
00001782                          1098  ; GAME MANAGEMENT
00001782                          1099  ; ==============================================================================
00001782                          1100  
00001782                          1101  ; ------------------------------------------------------------------------------
00001782                          1102  GAMINIT
00001782                          1103  ; INITIALIZES GAME.
00001782                          1104  ; INPUT    : NONE
00001782                          1105  ; OUTPUT   : NONE
00001782                          1106  ; MODIFIES : NONE
00001782                          1107  ; ------------------------------------------------------------------------------
00001782  4EB8 1314               1108              JSR     TABINIT
00001786  4EB8 126E               1109              JSR     BOXINIT
0000178A  4EB8 136A               1110              JSR     PIEINIT
0000178E  4EB8 1716               1111              JSR     PLAINIT
00001792  4E75                    1112              RTS
00001794                          1113  
00001794                          1114  ; ------------------------------------------------------------------------------
00001794                          1115  GAMUPD
00001794                          1116  ; UPDATES THE GAME
00001794                          1117  ; INPUT    : NONE
00001794                          1118  ; OUTPUT   : NONE
00001794                          1119  ; MODIFIES : NONE
00001794                          1120  ; ------------------------------------------------------------------------------
00001794                          1121                          
00001794  0C39 0000 00001D6D      1122              CMP.B   #0,(WINNER)
0000179C  6700 0034               1123              BEQ     .CONTINUE
000017A0                          1124              
000017A0  0839 0004 00001DF9      1125              BTST.B  #4,(KBDEDGE)
000017A8  6700 000E               1126              BEQ     .CONT
000017AC  33FC 0002 00001D72      1127              MOVE.W  #2,(STANEXT)
000017B4  6000 0020               1128              BRA     .DONE
000017B8  5279 00001D6E           1129  .CONT       ADDQ.W  #1,(TIMER)
000017BE  0C79 0096 00001D6E      1130              CMP.W   #150,(TIMER)
000017C6  6D00 000E               1131              BLT     .DONE
000017CA  33FC 0002 00001D72      1132              MOVE.W  #2,(STANEXT)                      
000017D2  4EB8 13A4               1133  .CONTINUE   JSR     PIEUPD
000017D6                          1134  .DONE
000017D6  4E75                    1135              RTS
000017D8                          1136  
000017D8                          1137  ; ------------------------------------------------------------------------------
000017D8                          1138  GAMPLOT
000017D8                          1139  ; PLOTS THE GAME
000017D8                          1140  ; INPUT    : NONE
000017D8                          1141  ; OUTPUT   : NONE
000017D8                          1142  ; MODIFIES : NONE
000017D8                          1143  ; ------------------------------------------------------------------------------
000017D8  48E7 FE40               1144              MOVEM.L D0-D6/A1,-(A7)
000017DC                          1145              
000017DC  4EB8 1332               1146              JSR     TABPLOT
000017E0                          1147              
000017E0  303C 0006               1148              MOVE.W  #BOXNCOL-1,D0
000017E4                          1149  .PLOT_NEXT_COL
000017E4  343C 0007               1150              MOVE.W  #BOXNCOL,D2
000017E8  9440                    1151              SUB.W   D0,D2
000017EA  33C2 00001D2C           1152              MOVE.W  D2,(BOXCOL)
000017F0                          1153              
000017F0  323C 0005               1154              MOVE.W  #BOXNROW-1,D1
000017F4                          1155  .PLOT_NEXT_ROW
000017F4  343C 0006               1156              MOVE.W  #BOXNROW,D2
000017F8  9441                    1157              SUB.W   D1,D2
000017FA  33C2 00001D2E           1158              MOVE.W  D2,(BOXROW)
00001800                          1159              
00001800  4EB8 1282               1160              JSR     BOXPLOT
00001804                          1161              
00001804  51C9 FFEE               1162              DBRA    D1,.PLOT_NEXT_ROW
00001808  51C8 FFDA               1163              DBRA    D0,.PLOT_NEXT_COL
0000180C                          1164              
0000180C  3A39 00001D34           1165              MOVE.W  (PIEPOSX),D5
00001812  3C39 00001D36           1166              MOVE.W  (PIEPOSY),D6
00001818  1039 00001D6C           1167              MOVE.B  (TURN),D0
0000181E  4EB8 1478               1168              JSR     PIEPLOT
00001822  43F9 00001832           1169              LEA     .TXT,A1
00001828  4EB8 1746               1170              JSR     BOAPLOT                 
0000182C                          1171              
0000182C  4CDF 027F               1172              MOVEM.L (A7)+,D0-D6/A1
00001830                          1173              
00001830  4E75                    1174              RTS
00001832                          1175  
00001832= 50 4C 41 59 45 52 ...   1176  .TXT        DC.B    'PLAYER TURN: ',0            
00001840                          1177              DS.W    0
00001840                          1178  
00001840                          1179  
00001840                          1180  
00001840                          1181  -------------------- end include --------------------
00001840                          1182              INCLUDE "SCREENS/INTRO.X68"
00001840                          1183  ; ---------------------------------------------------------------------
00001840                          1184  ; INTRO SCREEN
00001840                          1185  ; ---------------------------------------------------------------------
00001840                          1186  
00001840                          1187  ; ------------------------------------------------------------------------------
00001840                          1188  ISCINIT
00001840                          1189  ; INTRO SCREEN INIT
00001840                          1190  ; INPUT    : NONE 
00001840                          1191  ; OUTPUT   : NONE
00001840                          1192  ; MODIFIES : NONE
00001840                          1193  ; ------------------------------------------------------------------------------
00001840                          1194              
00001840  4279 00001D6E           1195              CLR.W   (TIMER)
00001846  4E75                    1196              RTS
00001848                          1197              
00001848                          1198  ; ------------------------------------------------------------------------------
00001848                          1199  ISCUPD
00001848                          1200  ; INTRO SCREEN UPDATE
00001848                          1201  ; INPUT    : NONE 
00001848                          1202  ; OUTPUT   : NONE
00001848                          1203  ; MODIFIES : NONE
00001848                          1204  ; ------------------------------------------------------------------------------
00001848                          1205              
00001848  0839 0004 00001DF9      1206              BTST.B  #4,(KBDEDGE)
00001850  6700 000A               1207              BEQ     .CONT
00001854  33FC 0001 00001D72      1208              MOVE.W  #1,(STANEXT)
0000185C                          1209  
0000185C  5279 00001D6E           1210  .CONT       ADDQ.W  #1,(TIMER)
00001862  0C79 0258 00001D6E      1211              CMP.W   #600,(TIMER)
0000186A  6D00 000A               1212              BLT     .DONE
0000186E  33FC 0003 00001D72      1213              MOVE.W  #3,(STANEXT)
00001876                          1214  .DONE     
00001876  4E75                    1215              RTS
00001878                          1216              
00001878                          1217  ; ------------------------------------------------------------------------------
00001878                          1218  ISCPLOT
00001878                          1219  ; INTRO SCREEN PLOT
00001878                          1220  ; INPUT    : NONE 
00001878                          1221  ; OUTPUT   : NONE
00001878                          1222  ; MODIFIES : NONE
00001878                          1223  ; ------------------------------------------------------------------------------
00001878                          1224              
00001878  48E7 C0C0               1225              MOVEM.L D0-D1/A0-A1,-(A7)
0000187C                          1226              
0000187C                          1227              ; SET BACKGROUND COLOR
0000187C  103C 0051               1228              MOVE.B  #81,D0
00001880  7200                    1229              MOVE.L  #00000000,D1
00001882  4E4F                    1230              TRAP    #15
00001884                          1231              
00001884  103C 000B               1232              MOVE.B  #11,D0
00001888                          1233              
00001888  41F9 000018C6           1234              LEA     .TXT1,A0
0000188E  4EB8 111C               1235              JSR     UTLPRINT
00001892                          1236              
00001892  5800                    1237              ADDQ.B  #4,D0
00001894  43F9 000019BA           1238              LEA     .TXTLST,A1
0000189A  2219                    1239  .LOOP       MOVE.L  (A1)+,D1
0000189C  6700 000A               1240              BEQ     .DONE1
000018A0  2041                    1241              MOVE.L  D1,A0
000018A2  4EB8 111C               1242              JSR     UTLPRINT
000018A6  60F2                    1243              BRA    .LOOP
000018A8                          1244  .DONE1            
000018A8  0839 0004 00001DFB      1245              BTST.B   #4,(SCRCYCCT)
000018B0  6700 000E               1246              BEQ     .DONE2
000018B4                          1247              
000018B4  41F9 000019A4           1248              LEA     .TXT7,A0
000018BA  5C00                    1249              ADD.B   #6,D0
000018BC  4EB8 111C               1250              JSR     UTLPRINT
000018C0                          1251              
000018C0  4CDF 0303               1252  .DONE2      MOVEM.L (A7)+,D0-D1/A0-A1
000018C4                          1253              
000018C4  4E75                    1254              RTS
000018C6                          1255  
000018C6= 43 4F 4E 4E 45 43 ...   1256  .TXT1       DC.B    'CONNECT-4',0
000018D0= 54 52 59 20 54 4F ...   1257  .TXT2       DC.B    'TRY TO CONNECT 4 PIECES IN A LINE',0
000018F2= 55 53 45 20 4C 45 ...   1258  .TXT3       DC.B    'USE LEFT AND RIGHT ARROWS TO SELECT PIECE POSITION',0
00001925= 50 52 45 53 53 20 ...   1259  .TXT4       DC.B    'PRESS SPACE TO PLACE A PIECE',0
00001942= 41 46 54 45 52 20 ...   1260  .TXT5       DC.B    'AFTER PLACING A PIECE THE TURN WILL SWAP',0
0000196B= 50 4C 41 59 45 52 ...   1261  .TXT6       DC.B    'PLAYER 1 HAVE RED PIECES AND PLAYER 2 HAVE YELLOW PIECES',0
000019A4= 50 52 45 53 53 20 ...   1262  .TXT7       DC.B    'PRESS SPACE TO START',0
000019BA                          1263              DS.W    0
000019BA= 000018D0 000018F2 ...   1264  .TXTLST     DC.L    .TXT2,.TXT3,.TXT4,.TXT5,.TXT6,0
000019D2                          1265  
000019D2                          1266  
000019D2                          1267  
000019D2                          1268  
000019D2                          1269  
000019D2                          1270  
000019D2                          1271  
000019D2                          1272  
000019D2                          1273  
000019D2                          1274  
000019D2                          1275  
000019D2                          1276  
000019D2                          1277  -------------------- end include --------------------
000019D2                          1278              INCLUDE "SCREENS/ENDGAME.X68"
000019D2                          1279  ; ---------------------------------------------------------------------
000019D2                          1280  ; END GAME SCREEN
000019D2                          1281  ; ---------------------------------------------------------------------
000019D2                          1282  
000019D2                          1283  ; ------------------------------------------------------------------------------
000019D2                          1284  ENDINIT
000019D2                          1285  ; INTRO SCREEN INIT
000019D2                          1286  ; INPUT    : NONE 
000019D2                          1287  ; OUTPUT   : NONE
000019D2                          1288  ; MODIFIES : NONE
000019D2                          1289  ; ------------------------------------------------------------------------------
000019D2                          1290              
000019D2  4279 00001D6E           1291              CLR.W   (TIMER)
000019D8                          1292              
000019D8  33FC 01E0 00001D34      1293              MOVE.W  #SCRWIDTH/2,(PIEPOSX)
000019E0  33FC 0168 00001D36      1294              MOVE.W  #SCRHEIGH/2,(PIEPOSY)
000019E8                          1295              
000019E8  4E75                    1296              RTS
000019EA                          1297              
000019EA                          1298  ; ------------------------------------------------------------------------------
000019EA                          1299  ENDUPD
000019EA                          1300  ; INTRO SCREEN UPDATE
000019EA                          1301  ; INPUT    : NONE 
000019EA                          1302  ; OUTPUT   : NONE
000019EA                          1303  ; MODIFIES : NONE
000019EA                          1304  ; ------------------------------------------------------------------------------
000019EA                          1305              
000019EA  0839 0004 00001DF9      1306              BTST.B  #4,(KBDEDGE)
000019F2  6700 000A               1307              BEQ     .CONT
000019F6  33FC 0000 00001D72      1308              MOVE.W  #0,(STANEXT)
000019FE                          1309  
000019FE  5279 00001D6E           1310  .CONT       ADDQ.W  #1,(TIMER)
00001A04  0C79 0258 00001D6E      1311              CMP.W   #600,(TIMER)
00001A0C  6D00 000A               1312              BLT     .DONE
00001A10  33FC 0000 00001D72      1313              MOVE.W  #0,(STANEXT)
00001A18                          1314  .DONE     
00001A18  4E75                    1315              RTS
00001A1A                          1316              
00001A1A                          1317  ; ------------------------------------------------------------------------------
00001A1A                          1318  ENDPLOT
00001A1A                          1319  ; INTRO SCREEN PLOT
00001A1A                          1320  ; INPUT    : NONE 
00001A1A                          1321  ; OUTPUT   : NONE
00001A1A                          1322  ; MODIFIES : NONE
00001A1A                          1323  ; ------------------------------------------------------------------------------
00001A1A                          1324              
00001A1A  48E7 FE80               1325              MOVEM.L D0-D6/A0,-(A7)
00001A1E                          1326              
00001A1E                          1327              ; SET BACKGROUND COLOR
00001A1E  103C 0051               1328              MOVE.B  #81,D0
00001A22  7200                    1329              MOVE.L  #00000000,D1
00001A24  4E4F                    1330              TRAP    #15
00001A26                          1331              
00001A26  103C 000F               1332              MOVE.B  #15,D0
00001A2A                          1333              
00001A2A  0C39 0005 00001D6D      1334              CMP.B   #5,(WINNER)
00001A32  6700 000C               1335              BEQ     .PLAYER2_WIN
00001A36  41F9 00001A6A           1336              LEA     .TXT1,A0
00001A3C  6000 0008               1337              BRA     .DONE
00001A40                          1338  .PLAYER2_WIN            
00001A40  41F9 00001A84           1339              LEA     .TXT2,A0
00001A46                          1340              
00001A46  4EB8 111C               1341  .DONE       JSR     UTLPRINT
00001A4A                          1342              
00001A4A  4285                    1343              CLR.L   D5
00001A4C  4286                    1344              CLR.L   D6
00001A4E  3A39 00001D34           1345              MOVE.W  (PIEPOSX),D5
00001A54  3C39 00001D36           1346              MOVE.W  (PIEPOSY),D6
00001A5A  1039 00001D6D           1347              MOVE.B  (WINNER),D0
00001A60  4EB8 1478               1348              JSR     PIEPLOT
00001A64                          1349              
00001A64  4CDF 017F               1350              MOVEM.L (A7)+,D0-D6/A0
00001A68                          1351              
00001A68  4E75                    1352              RTS
00001A6A                          1353  
00001A6A= A1 A1 A1 A1 A1 20 ...   1354  .TXT1       DC.B    ' PLAYER 1 WINS !!!!!',0
00001A84= A1 A1 A1 A1 A1 20 ...   1355  .TXT2       DC.B    ' PLAYER 2 WINS !!!!!',0
00001A9E                          1356              DS.W    0
00001A9E                          1357  
00001A9E                          1358  
00001A9E                          1359  
00001A9E                          1360  -------------------- end include --------------------
00001A9E                          1361              INCLUDE "ATTRACTMODE/FILE.X68"
00001A9E                          1362  ; ==============================================================================
00001A9E                          1363  ; FILE MANAGEMENT
00001A9E                          1364  ; ==============================================================================
00001A9E                          1365  
00001A9E                          1366  ; ------------------------------------------------------------------------------
00001A9E                          1367  FILEINIT
00001A9E                          1368  ; INITIALIZE FILE
00001A9E                          1369  ; INPUT    : NONE 
00001A9E                          1370  ; OUTPUT   : NONE
00001A9E                          1371  ; MODIFIES : NONE
00001A9E                          1372  ; ------------------------------------------------------------------------------
00001A9E                          1373  
00001A9E  48E7 C040               1374              MOVEM.L  D0-D1/A1,-(A7)
00001AA2                          1375              
00001AA2                          1376              ; CLEAR THE STORADGE OF THE THING WE GONA READ
00001AA2  43F9 00001D78           1377              LEA.L   READED,A1
00001AA8  703E                    1378              MOVE.L  #(126/2)-1,D0
00001AAA  4259                    1379  .LOOP1      CLR.W   (A1)+
00001AAC  51C8 FFFC               1380              DBRA    D0,.LOOP1
00001AB0                          1381                   
00001AB0  43F8 1000               1382              LEA.L   FILE,A1
00001AB4  7033                    1383              MOVE.L  #51,D0
00001AB6  4E4F                    1384              TRAP    #15
00001AB8                          1385              
00001AB8  23C1 00001D74           1386              MOVE.L  D1,(FILEID)             ;KEEP THE ID OF THE FILE
00001ABE                          1387              
00001ABE  4CDF 0203               1388              MOVEM.L  (A7)+,D0-D1/A1
00001AC2  4E75                    1389              RTS    
00001AC4                          1390  
00001AC4                          1391  ; ------------------------------------------------------------------------------
00001AC4                          1392  READFILE
00001AC4                          1393  ; READ THE FILE THAT CONTAINS THE MOVES
00001AC4                          1394  ; INPUT    : NONE 
00001AC4                          1395  ; OUTPUT   : NONE
00001AC4                          1396  ; MODIFIES : NONE
00001AC4                          1397  ; ------------------------------------------------------------------------------
00001AC4                          1398  
00001AC4  48E7 E040               1399              MOVEM.L  D0-D2/A1,-(A7)
00001AC8                          1400              
00001AC8  43F9 00001D78           1401              LEA.L   READED,A1
00001ACE  7035                    1402              MOVE.L  #53,D0
00001AD0  2239 00001D74           1403              MOVE.L  (FILEID),D1
00001AD6  747E                    1404              MOVE.L  #126,D2
00001AD8  4E4F                    1405              TRAP    #15
00001ADA                          1406              
00001ADA                          1407              ;CEAN WHAT WE READED (PUTS A $3 IN THE HIGH 4 BITS ON EVERY POS.)
00001ADA  43F9 00001D78           1408              LEA.L   READED,A1
00001AE0  5302                    1409              SUBQ.B  #1,D2                   ;D2 = BYTES READED
00001AE2  0419 0030               1410  .LOOP2      SUB.B   #$30,(A1)+
00001AE6  51CA FFFA               1411              DBRA    D2,.LOOP2                
00001AEA                          1412              
00001AEA  4CDF 0207               1413              MOVEM.L  (A7)+,D0-D2/A1
00001AEE  4E75                    1414              RTS
00001AF0                          1415  
00001AF0                          1416  -------------------- end include --------------------
00001AF0                          1417              INCLUDE "ATTRACTMODE/AUTOGAME.X68"
00001AF0                          1418  ; ==============================================================================
00001AF0                          1419  ; AUTOMATIC GAME MANAGEMENT
00001AF0                          1420  ; ==============================================================================
00001AF0                          1421  
00001AF0                          1422  ; ------------------------------------------------------------------------------
00001AF0                          1423  AUTOINIT
00001AF0                          1424  ; INITIALIZES GAME.
00001AF0                          1425  ; INPUT    : NONE
00001AF0                          1426  ; OUTPUT   : NONE
00001AF0                          1427  ; MODIFIES : NONE
00001AF0                          1428  ; ------------------------------------------------------------------------------
00001AF0  4EB8 1314               1429              JSR     TABINIT
00001AF4  4EB8 126E               1430              JSR     BOXINIT
00001AF8  4EB8 136A               1431              JSR     PIEINIT
00001AFC  4EB8 1716               1432              JSR     PLAINIT
00001B00  4EB8 1A9E               1433              JSR     FILEINIT
00001B04  4EB8 1AC4               1434              JSR     READFILE
00001B08  4239 00001DF6           1435              CLR.B   (INDEXREAD)
00001B0E  4E75                    1436              RTS
00001B10                          1437  
00001B10                          1438  ; ------------------------------------------------------------------------------
00001B10                          1439  AUTOUPD
00001B10                          1440  ; UPDATES THE GAME
00001B10                          1441  ; INPUT    : NONE
00001B10                          1442  ; OUTPUT   : NONE
00001B10                          1443  ; MODIFIES : NONE
00001B10                          1444  ; ------------------------------------------------------------------------------
00001B10                          1445                      
00001B10  48E7 F040               1446              MOVEM.L  D0-D3/A1,-(A7)
00001B14                          1447              
00001B14  4280                    1448              CLR.L   D0
00001B16  4283                    1449              CLR.L   D3
00001B18                          1450      
00001B18  0839 0004 00001DF9      1451              BTST.B  #4,(KBDEDGE)
00001B20  6700 000E               1452              BEQ     .PASS
00001B24  33FC 0000 00001D72      1453              MOVE.W  #0,(STANEXT)
00001B2C  6000 00B4               1454              BRA     .DONE
00001B30                          1455  .PASS
00001B30  0C39 0000 00001D6D      1456              CMP.B   #0,(WINNER)
00001B38  6700 001C               1457              BEQ     .CONTINUE
00001B3C  5279 00001D6E           1458              ADDQ.W  #1,(TIMER)
00001B42  0C79 00B4 00001D6E      1459              CMP.W   #180,(TIMER)
00001B4A  6D00 0096               1460              BLT     .DONE
00001B4E  33FC 0000 00001D72      1461              MOVE.W  #0,(STANEXT)                      
00001B56                          1462  .CONTINUE   
00001B56  1639 00001DFB           1463              MOVE.B  (SCRCYCCT),D3
00001B5C  C63C 00F0               1464              AND.B   #$F0,D3
00001B60  B639 00001DFB           1465              CMP.B   (SCRCYCCT),D3
00001B66  6600 007A               1466              BNE     .DONE
00001B6A  0C39 0000 00001D40      1467              CMP.B   #0,(FALLING)
00001B72  6700 000A               1468              BEQ     .PASS1
00001B76  4EB8 1500               1469              JSR     PIEFALL
00001B7A  6000 0066               1470              BRA     .DONE
00001B7E                          1471  .PASS1            
00001B7E  0C39 007D 00001DF6      1472              CMP.B   #125,(INDEXREAD)
00001B86  6300 000E               1473              BLS     .PASS2
00001B8A  33FC 0000 00001D72      1474              MOVE.W  #0,(STANEXT)
00001B92  6000 004E               1475              BRA     .DONE
00001B96                          1476  .PASS2      
00001B96  3039 00001D34           1477              MOVE.W  (PIEPOSX),D0      
00001B9C  43F9 00001D78           1478              LEA     READED,A1
00001BA2  1639 00001DF6           1479              MOVE.B  (INDEXREAD),D3
00001BA8  D3C3                    1480              ADD.L   D3,A1
00001BAA                          1481              ; 2 EQUALS PRESS LEFT ARROW
00001BAA  0C11 0002               1482              CMP.B   #2,(A1)
00001BAE  6700 001A               1483              BEQ     .AUTOLEFT
00001BB2                          1484              ; 3 EQUALS PRESS RIGHT ARROW
00001BB2  0C11 0003               1485              CMP.B   #3,(A1)
00001BB6  6700 001A               1486              BEQ     .AUTORIGHT
00001BBA                          1487              ; 1 EQUALS PRESS FIRE 1
00001BBA  13FC 0001 00001D40      1488              MOVE.B  #1,(FALLING)
00001BC2  4EB8 1500               1489              JSR     PIEFALL
00001BC6  6000 000E               1490              BRA     .JUMP            
00001BCA  4EB8 142E               1491  .AUTOLEFT   JSR     PRESSLEFT
00001BCE  6000 0006               1492              BRA     .JUMP
00001BD2  4EB8 1454               1493  .AUTORIGHT  JSR     PRESSRIGHT
00001BD6                          1494              
00001BD6  33C0 00001D34           1495  .JUMP       MOVE.W  D0,(PIEPOSX)
00001BDC  5239 00001DF6           1496              ADDQ.B  #1,(INDEXREAD)
00001BE2                          1497              
00001BE2  4CDF 020F               1498  .DONE       MOVEM.L  (A7)+,D0-D3/A1
00001BE6  4E75                    1499              RTS
00001BE8                          1500  
00001BE8                          1501  ; ------------------------------------------------------------------------------
00001BE8                          1502  AUTOPLOT
00001BE8                          1503  ; PLOTS THE GAME
00001BE8                          1504  ; INPUT    : NONE
00001BE8                          1505  ; OUTPUT   : NONE
00001BE8                          1506  ; MODIFIES : NONE
00001BE8                          1507  ; ------------------------------------------------------------------------------
00001BE8  48E7 FE40               1508              MOVEM.L D0-D6/A1,-(A7)
00001BEC                          1509              
00001BEC  4EB8 1332               1510              JSR     TABPLOT
00001BF0                          1511              
00001BF0  303C 0006               1512              MOVE.W  #BOXNCOL-1,D0
00001BF4                          1513  .PLOT_NEXT_COL
00001BF4  343C 0007               1514              MOVE.W  #BOXNCOL,D2
00001BF8  9440                    1515              SUB.W   D0,D2
00001BFA  33C2 00001D2C           1516              MOVE.W  D2,(BOXCOL)
00001C00                          1517              
00001C00  323C 0005               1518              MOVE.W  #BOXNROW-1,D1
00001C04                          1519  .PLOT_NEXT_ROW
00001C04  343C 0006               1520              MOVE.W  #BOXNROW,D2
00001C08  9441                    1521              SUB.W   D1,D2
00001C0A  33C2 00001D2E           1522              MOVE.W  D2,(BOXROW)
00001C10                          1523              
00001C10  4EB8 1282               1524              JSR     BOXPLOT
00001C14                          1525              
00001C14  51C9 FFEE               1526              DBRA    D1,.PLOT_NEXT_ROW
00001C18  51C8 FFDA               1527              DBRA    D0,.PLOT_NEXT_COL
00001C1C                          1528              
00001C1C  3A39 00001D34           1529              MOVE.W  (PIEPOSX),D5
00001C22  3C39 00001D36           1530              MOVE.W  (PIEPOSY),D6
00001C28  1039 00001D6C           1531              MOVE.B  (TURN),D0
00001C2E  4EB8 1478               1532              JSR     PIEPLOT
00001C32  43F9 00001C42           1533              LEA     .TXT,A1
00001C38  4EB8 1746               1534              JSR     BOAPLOT                 
00001C3C                          1535              
00001C3C  4CDF 027F               1536              MOVEM.L (A7)+,D0-D6/A1
00001C40                          1537              
00001C40  4E75                    1538              RTS
00001C42                          1539  
00001C42= 41 55 54 4F 4D 41 ...   1540  .TXT        DC.B    'AUTOMATIC GAME /// PLAYER TURN: ',0            
00001C64                          1541              DS.W    0
00001C64                          1542  
00001C64                          1543  
00001C64                          1544  -------------------- end include --------------------
00001C64                          1545              INCLUDE "STATES.X68"
00001C64                          1546  ; =============================================================================
00001C64                          1547  ; GAME STATE MANAGEMENT
00001C64                          1548  ; =============================================================================
00001C64                          1549  
00001C64                          1550  ; -----------------------------------------------------------------------------
00001C64                          1551  STAINIT
00001C64                          1552  ; INITALIZES THE STATE MANAGER
00001C64                          1553  ; INPUT    - NONE
00001C64                          1554  ; OUTPUT   - NONE
00001C64                          1555  ; MODIFIES - NONE
00001C64                          1556  ; -----------------------------------------------------------------------------
00001C64  33FC FFFF 00001D70      1557              MOVE.W  #STANONE,(STACUR)
00001C6C  4279 00001D72           1558              CLR.W   (STANEXT)
00001C72  4E75                    1559              RTS
00001C74                          1560  
00001C74                          1561  ; -----------------------------------------------------------------------------
00001C74                          1562  STAUPD
00001C74                          1563  ; PERFORMS STATE UPDATE AND INIT IF NECESSARY
00001C74                          1564  ; INPUT    - NONE
00001C74                          1565  ; OUTPUT   - NONE
00001C74                          1566  ; MODIFIES - NONE
00001C74                          1567  ; -----------------------------------------------------------------------------
00001C74  48E7 8080               1568              MOVEM.L D0/A0,-(A7)
00001C78  4280                    1569              CLR.L   D0
00001C7A  3039 00001D72           1570              MOVE.W  (STANEXT),D0
00001C80  B079 00001D70           1571              CMP.W   (STACUR),D0
00001C86  6700 0012               1572              BEQ     .DOUPD
00001C8A  33C0 00001D70           1573              MOVE.W  D0,(STACUR)             ; IF STATE CHANGED, DO INIT
00001C90  E588                    1574              LSL.L   #2,D0
00001C92  2040                    1575              MOVE.L  D0,A0
00001C94  2068 1CB2               1576              MOVE.L  .INITBL(A0),A0
00001C98  4E90                    1577              JSR     (A0)
00001C9A  4280                    1578  .DOUPD      CLR.L   D0                      ; IN ANY CASE, DO UPDATE
00001C9C  3039 00001D70           1579              MOVE.W  (STACUR),D0
00001CA2  E588                    1580              LSL.L   #2,D0
00001CA4  2040                    1581              MOVE.L  D0,A0
00001CA6  2068 1CC2               1582              MOVE.L  .UPDTBL(A0),A0
00001CAA  4E90                    1583              JSR     (A0)
00001CAC  4CDF 0101               1584              MOVEM.L (A7)+,D0/A0
00001CB0  4E75                    1585              RTS
00001CB2= 00001840 00001782 ...   1586  .INITBL     DC.L    ISCINIT,GAMINIT,ENDINIT,AUTOINIT
00001CC2= 00001848 00001794 ...   1587  .UPDTBL     DC.L    ISCUPD,GAMUPD,ENDUPD,AUTOUPD
00001CD2                          1588  
00001CD2                          1589  ; -----------------------------------------------------------------------------
00001CD2                          1590  STAPLOT
00001CD2                          1591  ; PERFORMS STATE PLOT
00001CD2                          1592  ; INPUT    - NONE
00001CD2                          1593  ; OUTPUT   - NONE
00001CD2                          1594  ; MODIFIES - NONE
00001CD2                          1595  ; -----------------------------------------------------------------------------
00001CD2  48E7 8080               1596              MOVEM.L D0/A0,-(A7)
00001CD6  4280                    1597              CLR.L   D0
00001CD8  3039 00001D70           1598              MOVE.W  (STACUR),D0
00001CDE  E588                    1599              LSL.L   #2,D0
00001CE0  2040                    1600              MOVE.L  D0,A0
00001CE2  2068 1CEE               1601              MOVE.L  .PLTTBL(A0),A0
00001CE6  4E90                    1602              JSR     (A0)
00001CE8  4CDF 0101               1603              MOVEM.L (A7)+,D0/A0
00001CEC  4E75                    1604              RTS
00001CEE= 00001878 000017D8 ...   1605  .PLTTBL     DC.L    ISCPLOT,GAMPLOT,ENDPLOT,AUTOPLOT
00001CFE                          1606  
00001CFE                          1607  ; -----------------------------------------------------------------------------
00001CFE                          1608  STAEMPTY
00001CFE                          1609  ; EMPTY SUBROUTINE FOR CASES WITH NOTHING TO DO
00001CFE                          1610  ; INPUT    - NONE
00001CFE                          1611  ; OUTPUT   - NONE
00001CFE                          1612  ; MODIFIES - NONE
00001CFE                          1613  ; NOTE     - JUST A PLACEHOLDER. NOTHING TO DO.
00001CFE                          1614  ; -----------------------------------------------------------------------------
00001CFE  4E75                    1615              RTS
00001D00                          1616  
00001D00                          1617  
00001D00                          1618  
00001D00                          1619  
00001D00                          1620  
00001D00                          1621  
00001D00                          1622  
00001D00                          1623  
00001D00                          1624  
00001D00                          1625  
00001D00                          1626  
00001D00                          1627  
00001D00                          1628  
00001D00                          1629  -------------------- end include --------------------
00001D00                          1630             
00001D00                          1631  START
00001D00                          1632  
00001D00                          1633  ; --- INITIALIZATION -----------------------------------------------------------
00001D00                          1634              
00001D00  007C 0700               1635              ORI.W   #$0700,SR
00001D04  4EB8 1012               1636              JSR     SYSINIT
00001D08  4EB8 1C64               1637              JSR     STAINIT
00001D0C                          1638  
00001D0C                          1639  .LOOP
00001D0C                          1640  
00001D0C                          1641  ; --- UPDATE -------------------------------------------------------------------
00001D0C                          1642  
00001D0C                          1643  ; READ INPUT DEVICES
00001D0C                          1644  
00001D0C  4E41                    1645              TRAP    #KBDUPTN
00001D0E                          1646  
00001D0E                          1647  ; UPDATE GAME LOGIC
00001D0E                          1648  
00001D0E  4EB8 1C74               1649              JSR     STAUPD   
00001D12                          1650                      
00001D12                          1651  ; --- SYNC ---------------------------------------------------------------------
00001D12                          1652  
00001D12  4A39 00001DFA           1653  .WINT       TST.B   (SCRINTCT)
00001D18  67F8                    1654              BEQ     .WINT
00001D1A  4239 00001DFA           1655              CLR.B   (SCRINTCT)
00001D20                          1656  
00001D20                          1657  ; --- PLOT ---------------------------------------------------------------------
00001D20                          1658  
00001D20  4EB8 1CD2               1659              JSR    STAPLOT
00001D24                          1660  
00001D24  4E40                    1661              TRAP    #SCRUPTN                ; UPDATE DOBLE BUFFER
00001D26                          1662              
00001D26  60E4                    1663              BRA     .LOOP
00001D28                          1664  
00001D28  FFFF FFFF               1665              SIMHALT
00001D2C                          1666              
00001D2C                          1667              INCLUDE "VARS.X68"
00001D2C                          1668  ; ==============================================================================
00001D2C                          1669  ; GAME VARIABLES
00001D2C                          1670  ; ==============================================================================
00001D2C                          1671  
00001D2C                          1672  ; --- BOX RELATED VARIABLES ----------------------------------------------------
00001D2C                          1673  
00001D2C                          1674  BOXCOL      DS.W    1                       ; COLUMN WHERE THE BOX IS PAINTED  
00001D2E                          1675  BOXROW      DS.W    1                       ; ROW WHERE THE BOX IS PAINTED
00001D30                          1676  BOXPOSX     DS.W    1                       ; BOX X COORDINATE
00001D32                          1677  BOXPOSY     DS.W    1                       ; BOX Y COORDINATE
00001D34                          1678  
00001D34                          1679  ; --- PIECE RELATED VARIABLES --------------------------------------------------
00001D34                          1680  
00001D34                          1681  PIEPOSX     DS.W    1                       ; PIECE X COORDINATE
00001D36                          1682  PIEPOSY     DS.W    1                       ; PIECE Y COORDINATE
00001D38                          1683  PIEVELX     DS.W    1                       ; X MOVEMENT
00001D3A                          1684  PIEVELY     DS.W    1                       ; Y MOVEMENT
00001D3C                          1685  POSX        DS.W    1                       ; POS. X IN THE MATRIX 
00001D3E                          1686  POSY        DS.W    1                       ; POS. Y IN THE MATRIX
00001D40                          1687  FALLING     DS.B    1                       ; 1 A PIECE IS FALLING, 0 NOT
00001D42                          1688              DS.W    0
00001D42                          1689  
00001D42                          1690  ; --- COLUMN RELATED VARIABLES -------------------------------------------------
00001D42                          1691  
00001D42                          1692  ROW1        DS.B    7
00001D49                          1693  ROW2        DS.B    7
00001D50                          1694  ROW3        DS.B    7
00001D57                          1695  ROW4        DS.B    7
00001D5E                          1696  ROW5        DS.B    7
00001D65                          1697  ROW6        DS.B    7
00001D6C                          1698              DS.W    0
00001D6C                          1699  
00001D6C                          1700  ; --- PLAYER VARIABLES ---------------------------------------------------------
00001D6C                          1701  
00001D6C                          1702  TURN        DS.B    1                       ; PLAYER WHO PLAY IN THAT TURN
00001D6D                          1703  WINNER      DS.B    1                       ; 0 NONE, 1 OR 5 (PLAYER WHO WIN)
00001D6E                          1704              DS.W    0
00001D6E                          1705  
00001D6E                          1706  ; --- INTRO STATE RELATED VARAIBLES --------------------------------------------
00001D6E                          1707  
00001D6E                          1708  TIMER       DS.W    1                       ; INTRO TIMER 
00001D70                          1709  
00001D70                          1710  ; --- STATE RELATED VARAIBLES --------------------------------------------------
00001D70                          1711  
00001D70                          1712  STACUR      DS.W    1                       ; CURRENT STATE
00001D72                          1713  STANEXT     DS.W    1                       ; NEXT STATE
00001D74                          1714  
00001D74                          1715  ; --- FILE VARAIBLES -----------------------------------------------------------
00001D74                          1716  
00001D74                          1717  FILEID      DS.L    1                       ; ID OF THE OPENED FILE
00001D78                          1718  READED      DS.B    126                     ; MOVEMENTS READ (42 BOXES * 3) 
00001DF6                          1719  INDEXREAD   DS.B    1                       ; INDEX TO TRAVEL READED   
00001DF8                          1720              DS.W    0 
00001DF8                          1721  
00001DF8                          1722  
00001DF8                          1723  
00001DF8                          1724  
00001DF8                          1725  
00001DF8                          1726  
00001DF8                          1727  
00001DF8                          1728  
00001DF8                          1729  
00001DF8                          1730  
00001DF8                          1731  
00001DF8                          1732  
00001DF8                          1733  
00001DF8                          1734  
00001DF8                          1735  
00001DF8                          1736  
00001DF8                          1737  
00001DF8                          1738  
00001DF8                          1739  
00001DF8                          1740  -------------------- end include --------------------
00001DF8                          1741              INCLUDE "SYS/SYSVARS.X68"
00001DF8                          1742  ; ==============================================================================
00001DF8                          1743  ; SYSTEM VARIABLES
00001DF8                          1744  ; ==============================================================================
00001DF8                          1745              
00001DF8                          1746  ; --- KEYBOARD RELATED VARIABLES -----------------------------------------------
00001DF8                          1747  
00001DF8                          1748  KBDVAL      DS.B    1                       ; KEY STATE
00001DF9                          1749  KBDEDGE     DS.B    1                       ; KEY EDGE
00001DFA                          1750  
00001DFA                          1751  ; --- TIMED INTERRUPT RELATED VARIABLES ----------------------------------------
00001DFA                          1752  
00001DFA                          1753  SCRINTCT   DS.B    1                       ; INTERRUPT COUNTER
00001DFB                          1754  SCRCYCCT   DS.B    1                       ; CYCLE COUNTER
00001DFC                          1755             DS.W    0
00001DFC                          1756  
00001DFC                          1757  -------------------- end include --------------------
00001DFC                          1758  
00001DFC                          1759              END     START

No errors detected
No warnings generated


SYMBOL TABLE INFORMATION
Symbol-name         Value
-------------------------
AUTOINIT            1AF0
AUTOPLOT            1BE8
AUTOPLOT:PLOT_NEXT_COL  1BF4
AUTOPLOT:PLOT_NEXT_ROW  1C04
AUTOPLOT:TXT        1C42
AUTOUPD             1B10
AUTOUPD:AUTOLEFT    1BCA
AUTOUPD:AUTORIGHT   1BD2
AUTOUPD:CONTINUE    1B56
AUTOUPD:DONE        1BE2
AUTOUPD:JUMP        1BD6
AUTOUPD:PASS        1B30
AUTOUPD:PASS1       1B7E
AUTOUPD:PASS2       1B96
BOAPLOT             1746
BOAPLOT:PASS        1776
BOAPLOT:PLAYER1     1772
BOXCOL              1D2C
BOXFCOL             0
BOXINIT             126E
BOXNCOL             7
BOXNROW             6
BOXPCOL             AA0000
BOXPLOT             1282
BOXPLOT:EMPTY       130E
BOXPOSX             1D30
BOXPOSY             1D32
BOXRAD              2D
BOXROW              1D2E
BOXUPD              1280
CHECK_DIAGONALS     16DC
CHECK_DIAGONALS:LOOP_DIA  170A
CHECK_DIAGONALS:PLAYERWINS_DIA  16FE
CHKCOL              158E
CHKCOL:CHECK_NEXT_COL  159A
CHKCOL:CHECK_POSITION_COL  15A0
CHKCOL:LOOP_COL     15DE
CHKCOL:PLAYERWINS_COL  15D2
CHKDIA              1648
CHKDIA:FINISH_DIA   16D6
CHKDIA:LOOP1        165E
CHKDIA:LOOP2        167E
CHKDIA:LOOP_DIAGONALS_ROW1  165A
CHKDIA:LOOP_TO_OTHER_SIDE  1656
CHKDIA:MINUS1       16C0
CHKDIA:PASS_DIA     16C2
CHKROW              15EE
CHKROW:CHECK_NEXT_ROW  15FA
CHKROW:CHECK_POSITION_ROW  1600
CHKROW:LOOP_ROW     1638
CHKROW:PLAYERWINS_ROW  162C
ENDINIT             19D2
ENDPLOT             1A1A
ENDPLOT:DONE        1A46
ENDPLOT:PLAYER2_WIN  1A40
ENDPLOT:TXT1        1A6A
ENDPLOT:TXT2        1A84
ENDUPD              19EA
ENDUPD:CONT         19FE
ENDUPD:DONE         1A18
FALLING             1D40
FILE                1000
FILEID              1D74
FILEINIT            1A9E
FILEINIT:LOOP1      1AAA
GAMINIT             1782
GAMPLOT             17D8
GAMPLOT:PLOT_NEXT_COL  17E4
GAMPLOT:PLOT_NEXT_ROW  17F4
GAMPLOT:TXT         1832
GAMUPD              1794
GAMUPD:CONT         17B8
GAMUPD:CONTINUE     17D2
GAMUPD:DONE         17D6
INDEXREAD           1DF6
ISCINIT             1840
ISCPLOT             1878
ISCPLOT:DONE1       18A8
ISCPLOT:DONE2       18C0
ISCPLOT:LOOP        189A
ISCPLOT:TXT1        18C6
ISCPLOT:TXT2        18D0
ISCPLOT:TXT3        18F2
ISCPLOT:TXT4        1925
ISCPLOT:TXT5        1942
ISCPLOT:TXT6        196B
ISCPLOT:TXT7        19A4
ISCPLOT:TXTLST      19BA
ISCUPD              1848
ISCUPD:CONT         185C
ISCUPD:DONE         1876
KBDDOWN             28
KBDEDGE             1DF9
KBDFIRE1            20
KBDFIRE2            4D
KBDFIRE3            10
KBDINIT             10AA
KBDLEFT             25
KBDPAUSE            50
KBDRIGHT            27
KBDUP               26
KBDUPD              10B8
KBDUPD:LOOP         10FC
KBDUPD:PACK         10F8
KBDUPTN             1
KBDVAL              1DF8
PIEFALL             1500
PIEFALL:END         155E
PIEFALL:PASS        1558
PIEFCOL1            FF
PIEFCOL2            FFFF
PIEFCOL3            3FEB1D
PIEINIT             136A
PIEPCOL1            AA
PIEPCOL2            AAAA
PIEPCOL3            0
PIEPLOT             1478
PIEPLOT:COLOR1      14A8
PIEPLOT:COLORWINNER  14C4
PIEPLOT:JUMP        14DC
PIEPOSX             1D34
PIEPOSY             1D36
PIERAD              23
PIESPEED            3
PIEUPD              13A4
PIEUPD:CHKRIGHT     13EE
PIEUPD:CHKSPACE     1404
PIEUPD:DONE         1422
PIEUPD:DONE2        1428
PIEUPD:PASS1        13D2
PIEVELX             1D38
PIEVELY             1D3A
PLAINIT             1716
PLAUPD              1726
PLAUPD:PLAYER2      173C
POSX                1D3C
POSY                1D3E
PRESSLEFT           142E
PRESSLEFT:DONELEFT  1452
PRESSRIGHT          1454
PRESSRIGHT:DONERIGHT  1476
READED              1D78
READFILE            1AC4
READFILE:LOOP2      1AE2
ROW1                1D42
ROW2                1D49
ROW3                1D50
ROW4                1D57
ROW5                1D5E
ROW6                1D65
SCRCYCCT            1DFB
SCRFPS              3C
SCRHEIGH            2D0
SCRINIT             103E
SCRINTCT            1DFA
SCRINTN             1
SCRPLOT             1082
SCRTIM              109C
SCRUPTN             0
SCRWIDTH            3C0
STACUR              1D70
STAEMPTY            1CFE
STAINIT             1C64
STANEXT             1D72
STANONE             FFFFFFFF
STAPLOT             1CD2
STAPLOT:PLTTBL      1CEE
START               1D00
START:LOOP          1D0C
START:WINT          1D12
STAUPD              1C74
STAUPD:DOUPD        1C9A
STAUPD:INITBL       1CB2
STAUPD:UPDTBL       1CC2
SYSINIT             1012
TABFCOL             AA0000
TABINIT             1314
TABINIT:LOOP        1322
TABPCOL             FF0000
TABPLOT             1332
TIMER               1D6E
TURN                1D6C
UTLCHRWD            8
UTLINIT             1106
UTLPRINT            111C
UTLPRINT:ENDLOOP    112E
UTLPRINT:LOOP       1124
UTLRAND             114E
UTLRAND:RANDVEC     116C
UTLRNDIX            126C
WINNER              1D6D
